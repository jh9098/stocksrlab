function SC(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}function TC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var X1={exports:{}},Ic={},Y1={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),bC=Symbol.for("react.portal"),IC=Symbol.for("react.fragment"),CC=Symbol.for("react.strict_mode"),RC=Symbol.for("react.profiler"),PC=Symbol.for("react.provider"),AC=Symbol.for("react.context"),kC=Symbol.for("react.forward_ref"),xC=Symbol.for("react.suspense"),MC=Symbol.for("react.memo"),OC=Symbol.for("react.lazy"),Yv=Symbol.iterator;function VC(n){return n===null||typeof n!="object"?null:(n=Yv&&n[Yv]||n["@@iterator"],typeof n=="function"?n:null)}var J1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z1=Object.assign,ew={};function Fs(n,e,t){this.props=n,this.context=e,this.refs=ew,this.updater=t||J1}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Fs.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function tw(){}tw.prototype=Fs.prototype;function zp(n,e,t){this.props=n,this.context=e,this.refs=ew,this.updater=t||J1}var $p=zp.prototype=new tw;$p.constructor=zp;Z1($p,Fs.prototype);$p.isPureReactComponent=!0;var Jv=Array.isArray,nw=Object.prototype.hasOwnProperty,Up={current:null},iw={key:!0,ref:!0,__self:!0,__source:!0};function rw(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nw.call(e,i)&&!iw.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Ma,type:n,key:s,ref:o,props:r,_owner:Up.current}}function DC(n,e){return{$$typeof:Ma,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Bp(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ma}function NC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Zv=/\/+/g;function qh(n,e){return typeof n=="object"&&n!==null&&n.key!=null?NC(""+n.key):e.toString(36)}function eu(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ma:case bC:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+qh(o,0):i,Jv(r)?(t="",n!=null&&(t=n.replace(Zv,"$&/")+"/"),eu(r,e,t,"",function(c){return c})):r!=null&&(Bp(r)&&(r=DC(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Zv,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Jv(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+qh(s,a);o+=eu(s,e,t,l,r)}else if(l=VC(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+qh(s,a++),o+=eu(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gl(n,e,t){if(n==null)return n;var i=[],r=0;return eu(n,i,"","",function(s){return e.call(t,s,r++)}),i}function LC(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Pt={current:null},tu={transition:null},FC={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:tu,ReactCurrentOwner:Up};function sw(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:gl,forEach:function(n,e,t){gl(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return gl(n,function(){e++}),e},toArray:function(n){return gl(n,function(e){return e})||[]},only:function(n){if(!Bp(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ie.Component=Fs;ie.Fragment=IC;ie.Profiler=RC;ie.PureComponent=zp;ie.StrictMode=CC;ie.Suspense=xC;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FC;ie.act=sw;ie.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Z1({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Up.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)nw.call(e,l)&&!iw.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ma,type:n.type,key:r,ref:s,props:i,_owner:o}};ie.createContext=function(n){return n={$$typeof:AC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:PC,_context:n},n.Consumer=n};ie.createElement=rw;ie.createFactory=function(n){var e=rw.bind(null,n);return e.type=n,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(n){return{$$typeof:kC,render:n}};ie.isValidElement=Bp;ie.lazy=function(n){return{$$typeof:OC,_payload:{_status:-1,_result:n},_init:LC}};ie.memo=function(n,e){return{$$typeof:MC,type:n,compare:e===void 0?null:e}};ie.startTransition=function(n){var e=tu.transition;tu.transition={};try{n()}finally{tu.transition=e}};ie.unstable_act=sw;ie.useCallback=function(n,e){return Pt.current.useCallback(n,e)};ie.useContext=function(n){return Pt.current.useContext(n)};ie.useDebugValue=function(){};ie.useDeferredValue=function(n){return Pt.current.useDeferredValue(n)};ie.useEffect=function(n,e){return Pt.current.useEffect(n,e)};ie.useId=function(){return Pt.current.useId()};ie.useImperativeHandle=function(n,e,t){return Pt.current.useImperativeHandle(n,e,t)};ie.useInsertionEffect=function(n,e){return Pt.current.useInsertionEffect(n,e)};ie.useLayoutEffect=function(n,e){return Pt.current.useLayoutEffect(n,e)};ie.useMemo=function(n,e){return Pt.current.useMemo(n,e)};ie.useReducer=function(n,e,t){return Pt.current.useReducer(n,e,t)};ie.useRef=function(n){return Pt.current.useRef(n)};ie.useState=function(n){return Pt.current.useState(n)};ie.useSyncExternalStore=function(n,e,t){return Pt.current.useSyncExternalStore(n,e,t)};ie.useTransition=function(){return Pt.current.useTransition()};ie.version="18.3.1";Y1.exports=ie;var O=Y1.exports;const zC=TC(O),rf=SC({__proto__:null,default:zC},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=O,UC=Symbol.for("react.element"),BC=Symbol.for("react.fragment"),jC=Object.prototype.hasOwnProperty,WC=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HC={key:!0,ref:!0,__self:!0,__source:!0};function ow(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)jC.call(e,i)&&!HC.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:UC,type:n,key:s,ref:o,props:r,_owner:WC.current}}Ic.Fragment=BC;Ic.jsx=ow;Ic.jsxs=ow;X1.exports=Ic;var a3=X1.exports,e0={},aw={exports:{}},Wt={},lw={exports:{}},uw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,q){var G=U.length;U.push(q);e:for(;0<G;){var ue=G-1>>>1,J=U[ue];if(0<r(J,q))U[ue]=q,U[G]=J,G=ue;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var q=U[0],G=U.pop();if(G!==q){U[0]=G;e:for(var ue=0,J=U.length,se=J>>>1;ue<se;){var He=2*(ue+1)-1,Xe=U[He],Ne=He+1,qe=U[Ne];if(0>r(Xe,G))Ne<J&&0>r(qe,Xe)?(U[ue]=qe,U[Ne]=G,ue=Ne):(U[ue]=Xe,U[He]=G,ue=He);else if(Ne<J&&0>r(qe,G))U[ue]=qe,U[Ne]=G,ue=Ne;else break e}}return q}function r(U,q){var G=U.sortIndex-q.sortIndex;return G!==0?G:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(U){for(var q=t(c);q!==null;){if(q.callback===null)i(c);else if(q.startTime<=U)i(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=t(c)}}function A(U){if(_=!1,I(U),!y)if(t(l)!==null)y=!0,pe(V);else{var q=t(c);q!==null&&Pe(A,q.startTime-U)}}function V(U,q){y=!1,_&&(_=!1,v(E),E=-1),g=!0;var G=p;try{for(I(q),d=t(l);d!==null&&(!(d.expirationTime>q)||U&&!k());){var ue=d.callback;if(typeof ue=="function"){d.callback=null,p=d.priorityLevel;var J=ue(d.expirationTime<=q);q=n.unstable_now(),typeof J=="function"?d.callback=J:d===t(l)&&i(l),I(q)}else i(l);d=t(l)}if(d!==null)var se=!0;else{var He=t(c);He!==null&&Pe(A,He.startTime-q),se=!1}return se}finally{d=null,p=G,g=!1}}var N=!1,T=null,E=-1,C=5,R=-1;function k(){return!(n.unstable_now()-R<C)}function x(){if(T!==null){var U=n.unstable_now();R=U;var q=!0;try{q=T(!0,U)}finally{q?P():(N=!1,T=null)}}else N=!1}var P;if(typeof w=="function")P=function(){w(x)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,me=we.port2;we.port1.onmessage=x,P=function(){me.postMessage(null)}}else P=function(){b(x,0)};function pe(U){T=U,N||(N=!0,P())}function Pe(U,q){E=b(function(){U(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,pe(V))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var G=p;p=q;try{return U()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=p;p=U;try{return q()}finally{p=G}},n.unstable_scheduleCallback=function(U,q,G){var ue=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ue+G:ue):G=ue,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=G+J,U={id:h++,callback:q,priorityLevel:U,startTime:G,expirationTime:J,sortIndex:-1},G>ue?(U.sortIndex=G,e(c,U),t(l)===null&&U===t(c)&&(_?(v(E),E=-1):_=!0,Pe(A,G-ue))):(U.sortIndex=J,e(l,U),y||g||(y=!0,pe(V))),U},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(U){var q=p;return function(){var G=p;p=q;try{return U.apply(this,arguments)}finally{p=G}}}})(uw);lw.exports=uw;var qC=lw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC=O,jt=qC;function $(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cw=new Set,Xo={};function Pr(n,e){ws(n,e),ws(n+"Capture",e)}function ws(n,e){for(Xo[n]=e,n=0;n<e.length;n++)cw.add(e[n])}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=Object.prototype.hasOwnProperty,GC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t0={},n0={};function QC(n){return sf.call(n0,n)?!0:sf.call(t0,n)?!1:GC.test(n)?n0[n]=!0:(t0[n]=!0,!1)}function XC(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function YC(n,e,t,i){if(e===null||typeof e>"u"||XC(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ut[n]=new At(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ut[e]=new At(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ut[n]=new At(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ut[n]=new At(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ut[n]=new At(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ut[n]=new At(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ut[n]=new At(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ut[n]=new At(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ut[n]=new At(n,5,!1,n.toLowerCase(),null,!1,!1)});var jp=/[\-:]([a-z])/g;function Wp(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(jp,Wp);ut[e]=new At(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(jp,Wp);ut[e]=new At(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(jp,Wp);ut[e]=new At(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ut[n]=new At(n,1,!1,n.toLowerCase(),null,!1,!1)});ut.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ut[n]=new At(n,1,!1,n.toLowerCase(),null,!0,!0)});function Hp(n,e,t,i){var r=ut.hasOwnProperty(e)?ut[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YC(e,t,r,i)&&(t=null),i||r===null?QC(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ni=KC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vl=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),qp=Symbol.for("react.strict_mode"),of=Symbol.for("react.profiler"),hw=Symbol.for("react.provider"),dw=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),af=Symbol.for("react.suspense"),lf=Symbol.for("react.suspense_list"),Gp=Symbol.for("react.memo"),hi=Symbol.for("react.lazy"),fw=Symbol.for("react.offscreen"),i0=Symbol.iterator;function ho(n){return n===null||typeof n!="object"?null:(n=i0&&n[i0]||n["@@iterator"],typeof n=="function"?n:null)}var xe=Object.assign,Kh;function bo(n){if(Kh===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Kh=e&&e[1]||""}return`
`+Kh+n}var Gh=!1;function Qh(n,e){if(!n||Gh)return"";Gh=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gh=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?bo(n):""}function JC(n){switch(n.tag){case 5:return bo(n.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 2:case 15:return n=Qh(n.type,!1),n;case 11:return n=Qh(n.type.render,!1),n;case 1:return n=Qh(n.type,!0),n;default:return""}}function uf(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Qr:return"Fragment";case Gr:return"Portal";case of:return"Profiler";case qp:return"StrictMode";case af:return"Suspense";case lf:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dw:return(n.displayName||"Context")+".Consumer";case hw:return(n._context.displayName||"Context")+".Provider";case Kp:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Gp:return e=n.displayName||null,e!==null?e:uf(n.type)||"Memo";case hi:e=n._payload,n=n._init;try{return uf(n(e))}catch{}}return null}function ZC(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uf(e);case 8:return e===qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fi(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pw(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eR(n){var e=pw(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function yl(n){n._valueTracker||(n._valueTracker=eR(n))}function mw(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=pw(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Cu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function cf(n,e){var t=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function r0(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Fi(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gw(n,e){e=e.checked,e!=null&&Hp(n,"checked",e,!1)}function hf(n,e){gw(n,e);var t=Fi(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?df(n,e.type,t):e.hasOwnProperty("defaultValue")&&df(n,e.type,Fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function s0(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function df(n,e,t){(e!=="number"||Cu(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Io=Array.isArray;function ls(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Fi(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function ff(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function o0(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error($(92));if(Io(t)){if(1<t.length)throw Error($(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Fi(t)}}function vw(n,e){var t=Fi(e.value),i=Fi(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function a0(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function yw(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pf(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?yw(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var _l,_w=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_l.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Yo(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tR=["Webkit","ms","Moz","O"];Object.keys(Mo).forEach(function(n){tR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Mo[e]=Mo[n]})});function ww(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Mo.hasOwnProperty(n)&&Mo[n]?(""+e).trim():e+"px"}function Ew(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=ww(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var nR=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mf(n,e){if(e){if(nR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function gf(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vf=null;function Qp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var yf=null,us=null,cs=null;function l0(n){if(n=Da(n)){if(typeof yf!="function")throw Error($(280));var e=n.stateNode;e&&(e=kc(e),yf(n.stateNode,n.type,e))}}function Sw(n){us?cs?cs.push(n):cs=[n]:us=n}function Tw(){if(us){var n=us,e=cs;if(cs=us=null,l0(n),e)for(n=0;n<e.length;n++)l0(e[n])}}function bw(n,e){return n(e)}function Iw(){}var Xh=!1;function Cw(n,e,t){if(Xh)return n(e,t);Xh=!0;try{return bw(n,e,t)}finally{Xh=!1,(us!==null||cs!==null)&&(Iw(),Tw())}}function Jo(n,e){var t=n.stateNode;if(t===null)return null;var i=kc(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error($(231,e,typeof t));return t}var _f=!1;if(Gn)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){_f=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{_f=!1}function iR(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var Oo=!1,Ru=null,Pu=!1,wf=null,rR={onError:function(n){Oo=!0,Ru=n}};function sR(n,e,t,i,r,s,o,a,l){Oo=!1,Ru=null,iR.apply(rR,arguments)}function oR(n,e,t,i,r,s,o,a,l){if(sR.apply(this,arguments),Oo){if(Oo){var c=Ru;Oo=!1,Ru=null}else throw Error($(198));Pu||(Pu=!0,wf=c)}}function Ar(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Rw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function u0(n){if(Ar(n)!==n)throw Error($(188))}function aR(n){var e=n.alternate;if(!e){if(e=Ar(n),e===null)throw Error($(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return u0(r),n;if(s===i)return u0(r),e;s=s.sibling}throw Error($(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error($(189))}}if(t.alternate!==i)throw Error($(190))}if(t.tag!==3)throw Error($(188));return t.stateNode.current===t?n:e}function Pw(n){return n=aR(n),n!==null?Aw(n):null}function Aw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Aw(n);if(e!==null)return e;n=n.sibling}return null}var kw=jt.unstable_scheduleCallback,c0=jt.unstable_cancelCallback,lR=jt.unstable_shouldYield,uR=jt.unstable_requestPaint,Fe=jt.unstable_now,cR=jt.unstable_getCurrentPriorityLevel,Xp=jt.unstable_ImmediatePriority,xw=jt.unstable_UserBlockingPriority,Au=jt.unstable_NormalPriority,hR=jt.unstable_LowPriority,Mw=jt.unstable_IdlePriority,Cc=null,Cn=null;function dR(n){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Cc,n,void 0,(n.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:mR,fR=Math.log,pR=Math.LN2;function mR(n){return n>>>=0,n===0?32:31-(fR(n)/pR|0)|0}var wl=64,El=4194304;function Co(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ku(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Co(a):(s&=o,s!==0&&(i=Co(s)))}else o=t&~r,o!==0?i=Co(o):s!==0&&(i=Co(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-cn(e),r=1<<t,i|=n[t],e&=~r;return i}function gR(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vR(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-cn(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=gR(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Ef(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ow(){var n=wl;return wl<<=1,!(wl&4194240)&&(wl=64),n}function Yh(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Oa(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-cn(e),n[e]=t}function yR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-cn(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Yp(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-cn(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var ge=0;function Vw(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Dw,Jp,Nw,Lw,Fw,Sf=!1,Sl=[],Ti=null,bi=null,Ii=null,Zo=new Map,ea=new Map,fi=[],_R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h0(n,e){switch(n){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(e.pointerId)}}function po(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Da(e),e!==null&&Jp(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function wR(n,e,t,i,r){switch(e){case"focusin":return Ti=po(Ti,n,e,t,i,r),!0;case"dragenter":return bi=po(bi,n,e,t,i,r),!0;case"mouseover":return Ii=po(Ii,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Zo.set(s,po(Zo.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ea.set(s,po(ea.get(s)||null,n,e,t,i,r)),!0}return!1}function zw(n){var e=ir(n.target);if(e!==null){var t=Ar(e);if(t!==null){if(e=t.tag,e===13){if(e=Rw(t),e!==null){n.blockedOn=e,Fw(n.priority,function(){Nw(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nu(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Tf(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);vf=i,t.target.dispatchEvent(i),vf=null}else return e=Da(t),e!==null&&Jp(e),n.blockedOn=t,!1;e.shift()}return!0}function d0(n,e,t){nu(n)&&t.delete(e)}function ER(){Sf=!1,Ti!==null&&nu(Ti)&&(Ti=null),bi!==null&&nu(bi)&&(bi=null),Ii!==null&&nu(Ii)&&(Ii=null),Zo.forEach(d0),ea.forEach(d0)}function mo(n,e){n.blockedOn===e&&(n.blockedOn=null,Sf||(Sf=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,ER)))}function ta(n){function e(r){return mo(r,n)}if(0<Sl.length){mo(Sl[0],n);for(var t=1;t<Sl.length;t++){var i=Sl[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ti!==null&&mo(Ti,n),bi!==null&&mo(bi,n),Ii!==null&&mo(Ii,n),Zo.forEach(e),ea.forEach(e),t=0;t<fi.length;t++)i=fi[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<fi.length&&(t=fi[0],t.blockedOn===null);)zw(t),t.blockedOn===null&&fi.shift()}var hs=ni.ReactCurrentBatchConfig,xu=!0;function SR(n,e,t,i){var r=ge,s=hs.transition;hs.transition=null;try{ge=1,Zp(n,e,t,i)}finally{ge=r,hs.transition=s}}function TR(n,e,t,i){var r=ge,s=hs.transition;hs.transition=null;try{ge=4,Zp(n,e,t,i)}finally{ge=r,hs.transition=s}}function Zp(n,e,t,i){if(xu){var r=Tf(n,e,t,i);if(r===null)ad(n,e,i,Mu,t),h0(n,i);else if(wR(r,n,e,t,i))i.stopPropagation();else if(h0(n,i),e&4&&-1<_R.indexOf(n)){for(;r!==null;){var s=Da(r);if(s!==null&&Dw(s),s=Tf(n,e,t,i),s===null&&ad(n,e,i,Mu,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else ad(n,e,i,null,t)}}var Mu=null;function Tf(n,e,t,i){if(Mu=null,n=Qp(i),n=ir(n),n!==null)if(e=Ar(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Rw(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Mu=n,null}function $w(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cR()){case Xp:return 1;case xw:return 4;case Au:case hR:return 16;case Mw:return 536870912;default:return 16}default:return 16}}var _i=null,em=null,iu=null;function Uw(){if(iu)return iu;var n,e=em,t=e.length,i,r="value"in _i?_i.value:_i.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return iu=r.slice(n,1<i?1-i:void 0)}function ru(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Tl(){return!0}function f0(){return!1}function Ht(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tl:f0,this.isPropagationStopped=f0,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tm=Ht(zs),Va=xe({},zs,{view:0,detail:0}),bR=Ht(Va),Jh,Zh,go,Rc=xe({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nm,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==go&&(go&&n.type==="mousemove"?(Jh=n.screenX-go.screenX,Zh=n.screenY-go.screenY):Zh=Jh=0,go=n),Jh)},movementY:function(n){return"movementY"in n?n.movementY:Zh}}),p0=Ht(Rc),IR=xe({},Rc,{dataTransfer:0}),CR=Ht(IR),RR=xe({},Va,{relatedTarget:0}),ed=Ht(RR),PR=xe({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),AR=Ht(PR),kR=xe({},zs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xR=Ht(kR),MR=xe({},zs,{data:0}),m0=Ht(MR),OR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NR(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=DR[n])?!!e[n]:!1}function nm(){return NR}var LR=xe({},Va,{key:function(n){if(n.key){var e=OR[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ru(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nm,charCode:function(n){return n.type==="keypress"?ru(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ru(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),FR=Ht(LR),zR=xe({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g0=Ht(zR),$R=xe({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nm}),UR=Ht($R),BR=xe({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),jR=Ht(BR),WR=xe({},Rc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),HR=Ht(WR),qR=[9,13,27,32],im=Gn&&"CompositionEvent"in window,Vo=null;Gn&&"documentMode"in document&&(Vo=document.documentMode);var KR=Gn&&"TextEvent"in window&&!Vo,Bw=Gn&&(!im||Vo&&8<Vo&&11>=Vo),v0=String.fromCharCode(32),y0=!1;function jw(n,e){switch(n){case"keyup":return qR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ww(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xr=!1;function GR(n,e){switch(n){case"compositionend":return Ww(e);case"keypress":return e.which!==32?null:(y0=!0,v0);case"textInput":return n=e.data,n===v0&&y0?null:n;default:return null}}function QR(n,e){if(Xr)return n==="compositionend"||!im&&jw(n,e)?(n=Uw(),iu=em=_i=null,Xr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bw&&e.locale!=="ko"?null:e.data;default:return null}}var XR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!XR[n.type]:e==="textarea"}function Hw(n,e,t,i){Sw(i),e=Ou(e,"onChange"),0<e.length&&(t=new tm("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Do=null,na=null;function YR(n){nE(n,0)}function Pc(n){var e=Zr(n);if(mw(e))return n}function JR(n,e){if(n==="change")return e}var qw=!1;if(Gn){var td;if(Gn){var nd="oninput"in document;if(!nd){var w0=document.createElement("div");w0.setAttribute("oninput","return;"),nd=typeof w0.oninput=="function"}td=nd}else td=!1;qw=td&&(!document.documentMode||9<document.documentMode)}function E0(){Do&&(Do.detachEvent("onpropertychange",Kw),na=Do=null)}function Kw(n){if(n.propertyName==="value"&&Pc(na)){var e=[];Hw(e,na,n,Qp(n)),Cw(YR,e)}}function ZR(n,e,t){n==="focusin"?(E0(),Do=e,na=t,Do.attachEvent("onpropertychange",Kw)):n==="focusout"&&E0()}function eP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pc(na)}function tP(n,e){if(n==="click")return Pc(e)}function nP(n,e){if(n==="input"||n==="change")return Pc(e)}function iP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var pn=typeof Object.is=="function"?Object.is:iP;function ia(n,e){if(pn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!sf.call(e,r)||!pn(n[r],e[r]))return!1}return!0}function S0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function T0(n,e){var t=S0(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=S0(t)}}function Gw(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Gw(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Qw(){for(var n=window,e=Cu();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Cu(n.document)}return e}function rm(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function rP(n){var e=Qw(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Gw(t.ownerDocument.documentElement,t)){if(i!==null&&rm(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=T0(t,s);var o=T0(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var sP=Gn&&"documentMode"in document&&11>=document.documentMode,Yr=null,bf=null,No=null,If=!1;function b0(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;If||Yr==null||Yr!==Cu(i)||(i=Yr,"selectionStart"in i&&rm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),No&&ia(No,i)||(No=i,i=Ou(bf,"onSelect"),0<i.length&&(e=new tm("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Yr)))}function bl(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Jr={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},id={},Xw={};Gn&&(Xw=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function Ac(n){if(id[n])return id[n];if(!Jr[n])return n;var e=Jr[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Xw)return id[n]=e[t];return n}var Yw=Ac("animationend"),Jw=Ac("animationiteration"),Zw=Ac("animationstart"),eE=Ac("transitionend"),tE=new Map,I0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wi(n,e){tE.set(n,e),Pr(e,[n])}for(var rd=0;rd<I0.length;rd++){var sd=I0[rd],oP=sd.toLowerCase(),aP=sd[0].toUpperCase()+sd.slice(1);Wi(oP,"on"+aP)}Wi(Yw,"onAnimationEnd");Wi(Jw,"onAnimationIteration");Wi(Zw,"onAnimationStart");Wi("dblclick","onDoubleClick");Wi("focusin","onFocus");Wi("focusout","onBlur");Wi(eE,"onTransitionEnd");ws("onMouseEnter",["mouseout","mouseover"]);ws("onMouseLeave",["mouseout","mouseover"]);ws("onPointerEnter",["pointerout","pointerover"]);ws("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function C0(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,oR(i,e,void 0,n),n.currentTarget=null}function nE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;C0(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;C0(r,a,c),s=l}}}if(Pu)throw n=wf,Pu=!1,wf=null,n}function Te(n,e){var t=e[kf];t===void 0&&(t=e[kf]=new Set);var i=n+"__bubble";t.has(i)||(iE(e,n,2,!1),t.add(i))}function od(n,e,t){var i=0;e&&(i|=4),iE(t,n,i,e)}var Il="_reactListening"+Math.random().toString(36).slice(2);function ra(n){if(!n[Il]){n[Il]=!0,cw.forEach(function(t){t!=="selectionchange"&&(lP.has(t)||od(t,!1,n),od(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Il]||(e[Il]=!0,od("selectionchange",!1,e))}}function iE(n,e,t,i){switch($w(e)){case 1:var r=SR;break;case 4:r=TR;break;default:r=Zp}t=r.bind(null,e,t,n),r=void 0,!_f||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function ad(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ir(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Cw(function(){var c=s,h=Qp(t),d=[];e:{var p=tE.get(n);if(p!==void 0){var g=tm,y=n;switch(n){case"keypress":if(ru(t)===0)break e;case"keydown":case"keyup":g=FR;break;case"focusin":y="focus",g=ed;break;case"focusout":y="blur",g=ed;break;case"beforeblur":case"afterblur":g=ed;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=CR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=UR;break;case Yw:case Jw:case Zw:g=AR;break;case eE:g=jR;break;case"scroll":g=bR;break;case"wheel":g=HR;break;case"copy":case"cut":case"paste":g=xR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=g0}var _=(e&4)!==0,b=!_&&n==="scroll",v=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,I;w!==null;){I=w;var A=I.stateNode;if(I.tag===5&&A!==null&&(I=A,v!==null&&(A=Jo(w,v),A!=null&&_.push(sa(w,A,I)))),b)break;w=w.return}0<_.length&&(p=new g(p,y,null,t,h),d.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==vf&&(y=t.relatedTarget||t.fromElement)&&(ir(y)||y[Qn]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=t.relatedTarget||t.toElement,g=c,y=y?ir(y):null,y!==null&&(b=Ar(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(_=p0,A="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(_=g0,A="onPointerLeave",v="onPointerEnter",w="pointer"),b=g==null?p:Zr(g),I=y==null?p:Zr(y),p=new _(A,w+"leave",g,t,h),p.target=b,p.relatedTarget=I,A=null,ir(h)===c&&(_=new _(v,w+"enter",y,t,h),_.target=I,_.relatedTarget=b,A=_),b=A,g&&y)t:{for(_=g,v=y,w=0,I=_;I;I=Br(I))w++;for(I=0,A=v;A;A=Br(A))I++;for(;0<w-I;)_=Br(_),w--;for(;0<I-w;)v=Br(v),I--;for(;w--;){if(_===v||v!==null&&_===v.alternate)break t;_=Br(_),v=Br(v)}_=null}else _=null;g!==null&&R0(d,p,g,_,!1),y!==null&&b!==null&&R0(d,b,y,_,!0)}}e:{if(p=c?Zr(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=JR;else if(_0(p))if(qw)V=nP;else{V=eP;var N=ZR}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=tP);if(V&&(V=V(n,c))){Hw(d,V,t,h);break e}N&&N(n,p,c),n==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&df(p,"number",p.value)}switch(N=c?Zr(c):window,n){case"focusin":(_0(N)||N.contentEditable==="true")&&(Yr=N,bf=c,No=null);break;case"focusout":No=bf=Yr=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,b0(d,t,h);break;case"selectionchange":if(sP)break;case"keydown":case"keyup":b0(d,t,h)}var T;if(im)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Xr?jw(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(Bw&&t.locale!=="ko"&&(Xr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Xr&&(T=Uw()):(_i=h,em="value"in _i?_i.value:_i.textContent,Xr=!0)),N=Ou(c,E),0<N.length&&(E=new m0(E,n,null,t,h),d.push({event:E,listeners:N}),T?E.data=T:(T=Ww(t),T!==null&&(E.data=T)))),(T=KR?GR(n,t):QR(n,t))&&(c=Ou(c,"onBeforeInput"),0<c.length&&(h=new m0("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=T))}nE(d,e)})}function sa(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ou(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Jo(n,t),s!=null&&i.unshift(sa(n,s,r)),s=Jo(n,e),s!=null&&i.push(sa(n,s,r))),n=n.return}return i}function Br(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function R0(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Jo(t,s),l!=null&&o.unshift(sa(t,l,a))):r||(l=Jo(t,s),l!=null&&o.push(sa(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var uP=/\r\n?/g,cP=/\u0000|\uFFFD/g;function P0(n){return(typeof n=="string"?n:""+n).replace(uP,`
`).replace(cP,"")}function Cl(n,e,t){if(e=P0(e),P0(n)!==e&&t)throw Error($(425))}function Vu(){}var Cf=null,Rf=null;function Pf(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Af=typeof setTimeout=="function"?setTimeout:void 0,hP=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,dP=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(n){return A0.resolve(null).then(n).catch(fP)}:Af;function fP(n){setTimeout(function(){throw n})}function ld(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),ta(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);ta(e)}function Ci(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function k0(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var $s=Math.random().toString(36).slice(2),Tn="__reactFiber$"+$s,oa="__reactProps$"+$s,Qn="__reactContainer$"+$s,kf="__reactEvents$"+$s,pP="__reactListeners$"+$s,mP="__reactHandles$"+$s;function ir(n){var e=n[Tn];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qn]||t[Tn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=k0(n);n!==null;){if(t=n[Tn])return t;n=k0(n)}return e}n=t,t=n.parentNode}return null}function Da(n){return n=n[Tn]||n[Qn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($(33))}function kc(n){return n[oa]||null}var xf=[],es=-1;function Hi(n){return{current:n}}function Ce(n){0>es||(n.current=xf[es],xf[es]=null,es--)}function Ee(n,e){es++,xf[es]=n.current,n.current=e}var zi={},Et=Hi(zi),Mt=Hi(!1),dr=zi;function Es(n,e){var t=n.type.contextTypes;if(!t)return zi;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ot(n){return n=n.childContextTypes,n!=null}function Du(){Ce(Mt),Ce(Et)}function x0(n,e,t){if(Et.current!==zi)throw Error($(168));Ee(Et,e),Ee(Mt,t)}function rE(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,ZC(n)||"Unknown",r));return xe({},t,i)}function Nu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zi,dr=Et.current,Ee(Et,n),Ee(Mt,Mt.current),!0}function M0(n,e,t){var i=n.stateNode;if(!i)throw Error($(169));t?(n=rE(n,e,dr),i.__reactInternalMemoizedMergedChildContext=n,Ce(Mt),Ce(Et),Ee(Et,n)):Ce(Mt),Ee(Mt,t)}var Ln=null,xc=!1,ud=!1;function sE(n){Ln===null?Ln=[n]:Ln.push(n)}function gP(n){xc=!0,sE(n)}function qi(){if(!ud&&Ln!==null){ud=!0;var n=0,e=ge;try{var t=Ln;for(ge=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ln=null,xc=!1}catch(r){throw Ln!==null&&(Ln=Ln.slice(n+1)),kw(Xp,qi),r}finally{ge=e,ud=!1}}return null}var ts=[],ns=0,Lu=null,Fu=0,Gt=[],Qt=0,fr=null,Fn=1,zn="";function er(n,e){ts[ns++]=Fu,ts[ns++]=Lu,Lu=n,Fu=e}function oE(n,e,t){Gt[Qt++]=Fn,Gt[Qt++]=zn,Gt[Qt++]=fr,fr=n;var i=Fn;n=zn;var r=32-cn(i)-1;i&=~(1<<r),t+=1;var s=32-cn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Fn=1<<32-cn(e)+r|t<<r|i,zn=s+n}else Fn=1<<s|t<<r|i,zn=n}function sm(n){n.return!==null&&(er(n,1),oE(n,1,0))}function om(n){for(;n===Lu;)Lu=ts[--ns],ts[ns]=null,Fu=ts[--ns],ts[ns]=null;for(;n===fr;)fr=Gt[--Qt],Gt[Qt]=null,zn=Gt[--Qt],Gt[Qt]=null,Fn=Gt[--Qt],Gt[Qt]=null}var Ut=null,$t=null,Re=!1,ln=null;function aE(n,e){var t=Yt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function O0(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ut=n,$t=Ci(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ut=n,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=fr!==null?{id:Fn,overflow:zn}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Yt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ut=n,$t=null,!0):!1;default:return!1}}function Mf(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Of(n){if(Re){var e=$t;if(e){var t=e;if(!O0(n,e)){if(Mf(n))throw Error($(418));e=Ci(t.nextSibling);var i=Ut;e&&O0(n,e)?aE(i,t):(n.flags=n.flags&-4097|2,Re=!1,Ut=n)}}else{if(Mf(n))throw Error($(418));n.flags=n.flags&-4097|2,Re=!1,Ut=n}}}function V0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ut=n}function Rl(n){if(n!==Ut)return!1;if(!Re)return V0(n),Re=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Pf(n.type,n.memoizedProps)),e&&(e=$t)){if(Mf(n))throw lE(),Error($(418));for(;e;)aE(n,e),e=Ci(e.nextSibling)}if(V0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){$t=Ci(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}$t=null}}else $t=Ut?Ci(n.stateNode.nextSibling):null;return!0}function lE(){for(var n=$t;n;)n=Ci(n.nextSibling)}function Ss(){$t=Ut=null,Re=!1}function am(n){ln===null?ln=[n]:ln.push(n)}var vP=ni.ReactCurrentBatchConfig;function vo(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($(309));var i=t.stateNode}if(!i)throw Error($(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error($(284));if(!t._owner)throw Error($(290,n))}return n}function Pl(n,e){throw n=Object.prototype.toString.call(e),Error($(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function D0(n){var e=n._init;return e(n._payload)}function uE(n){function e(v,w){if(n){var I=v.deletions;I===null?(v.deletions=[w],v.flags|=16):I.push(w)}}function t(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(v,w){return v=ki(v,w),v.index=0,v.sibling=null,v}function s(v,w,I){return v.index=I,n?(I=v.alternate,I!==null?(I=I.index,I<w?(v.flags|=2,w):I):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,w,I,A){return w===null||w.tag!==6?(w=gd(I,v.mode,A),w.return=v,w):(w=r(w,I),w.return=v,w)}function l(v,w,I,A){var V=I.type;return V===Qr?h(v,w,I.props.children,A,I.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===hi&&D0(V)===w.type)?(A=r(w,I.props),A.ref=vo(v,w,I),A.return=v,A):(A=hu(I.type,I.key,I.props,null,v.mode,A),A.ref=vo(v,w,I),A.return=v,A)}function c(v,w,I,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=vd(I,v.mode,A),w.return=v,w):(w=r(w,I.children||[]),w.return=v,w)}function h(v,w,I,A,V){return w===null||w.tag!==7?(w=ur(I,v.mode,A,V),w.return=v,w):(w=r(w,I),w.return=v,w)}function d(v,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=gd(""+w,v.mode,I),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vl:return I=hu(w.type,w.key,w.props,null,v.mode,I),I.ref=vo(v,null,w),I.return=v,I;case Gr:return w=vd(w,v.mode,I),w.return=v,w;case hi:var A=w._init;return d(v,A(w._payload),I)}if(Io(w)||ho(w))return w=ur(w,v.mode,I,null),w.return=v,w;Pl(v,w)}return null}function p(v,w,I,A){var V=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return V!==null?null:a(v,w,""+I,A);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case vl:return I.key===V?l(v,w,I,A):null;case Gr:return I.key===V?c(v,w,I,A):null;case hi:return V=I._init,p(v,w,V(I._payload),A)}if(Io(I)||ho(I))return V!==null?null:h(v,w,I,A,null);Pl(v,I)}return null}function g(v,w,I,A,V){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(I)||null,a(w,v,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case vl:return v=v.get(A.key===null?I:A.key)||null,l(w,v,A,V);case Gr:return v=v.get(A.key===null?I:A.key)||null,c(w,v,A,V);case hi:var N=A._init;return g(v,w,I,N(A._payload),V)}if(Io(A)||ho(A))return v=v.get(I)||null,h(w,v,A,V,null);Pl(w,A)}return null}function y(v,w,I,A){for(var V=null,N=null,T=w,E=w=0,C=null;T!==null&&E<I.length;E++){T.index>E?(C=T,T=null):C=T.sibling;var R=p(v,T,I[E],A);if(R===null){T===null&&(T=C);break}n&&T&&R.alternate===null&&e(v,T),w=s(R,w,E),N===null?V=R:N.sibling=R,N=R,T=C}if(E===I.length)return t(v,T),Re&&er(v,E),V;if(T===null){for(;E<I.length;E++)T=d(v,I[E],A),T!==null&&(w=s(T,w,E),N===null?V=T:N.sibling=T,N=T);return Re&&er(v,E),V}for(T=i(v,T);E<I.length;E++)C=g(T,v,E,I[E],A),C!==null&&(n&&C.alternate!==null&&T.delete(C.key===null?E:C.key),w=s(C,w,E),N===null?V=C:N.sibling=C,N=C);return n&&T.forEach(function(k){return e(v,k)}),Re&&er(v,E),V}function _(v,w,I,A){var V=ho(I);if(typeof V!="function")throw Error($(150));if(I=V.call(I),I==null)throw Error($(151));for(var N=V=null,T=w,E=w=0,C=null,R=I.next();T!==null&&!R.done;E++,R=I.next()){T.index>E?(C=T,T=null):C=T.sibling;var k=p(v,T,R.value,A);if(k===null){T===null&&(T=C);break}n&&T&&k.alternate===null&&e(v,T),w=s(k,w,E),N===null?V=k:N.sibling=k,N=k,T=C}if(R.done)return t(v,T),Re&&er(v,E),V;if(T===null){for(;!R.done;E++,R=I.next())R=d(v,R.value,A),R!==null&&(w=s(R,w,E),N===null?V=R:N.sibling=R,N=R);return Re&&er(v,E),V}for(T=i(v,T);!R.done;E++,R=I.next())R=g(T,v,E,R.value,A),R!==null&&(n&&R.alternate!==null&&T.delete(R.key===null?E:R.key),w=s(R,w,E),N===null?V=R:N.sibling=R,N=R);return n&&T.forEach(function(x){return e(v,x)}),Re&&er(v,E),V}function b(v,w,I,A){if(typeof I=="object"&&I!==null&&I.type===Qr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case vl:e:{for(var V=I.key,N=w;N!==null;){if(N.key===V){if(V=I.type,V===Qr){if(N.tag===7){t(v,N.sibling),w=r(N,I.props.children),w.return=v,v=w;break e}}else if(N.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===hi&&D0(V)===N.type){t(v,N.sibling),w=r(N,I.props),w.ref=vo(v,N,I),w.return=v,v=w;break e}t(v,N);break}else e(v,N);N=N.sibling}I.type===Qr?(w=ur(I.props.children,v.mode,A,I.key),w.return=v,v=w):(A=hu(I.type,I.key,I.props,null,v.mode,A),A.ref=vo(v,w,I),A.return=v,v=A)}return o(v);case Gr:e:{for(N=I.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){t(v,w.sibling),w=r(w,I.children||[]),w.return=v,v=w;break e}else{t(v,w);break}else e(v,w);w=w.sibling}w=vd(I,v.mode,A),w.return=v,v=w}return o(v);case hi:return N=I._init,b(v,w,N(I._payload),A)}if(Io(I))return y(v,w,I,A);if(ho(I))return _(v,w,I,A);Pl(v,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(t(v,w.sibling),w=r(w,I),w.return=v,v=w):(t(v,w),w=gd(I,v.mode,A),w.return=v,v=w),o(v)):t(v,w)}return b}var Ts=uE(!0),cE=uE(!1),zu=Hi(null),$u=null,is=null,lm=null;function um(){lm=is=$u=null}function cm(n){var e=zu.current;Ce(zu),n._currentValue=e}function Vf(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function ds(n,e){$u=n,lm=is=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(xt=!0),n.firstContext=null)}function en(n){var e=n._currentValue;if(lm!==n)if(n={context:n,memoizedValue:e,next:null},is===null){if($u===null)throw Error($(308));is=n,$u.dependencies={lanes:0,firstContext:n}}else is=is.next=n;return e}var rr=null;function hm(n){rr===null?rr=[n]:rr.push(n)}function hE(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,hm(e)):(t.next=r.next,r.next=t),e.interleaved=t,Xn(n,i)}function Xn(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var di=!1;function dm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Hn(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Xn(n,t)}return r=i.interleaved,r===null?(e.next=e,hm(i)):(e.next=r.next,r.next=e),i.interleaved=e,Xn(n,t)}function su(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Yp(n,t)}}function N0(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Uu(n,e,t,i){var r=n.updateQueue;di=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,_=a;switch(p=e,g=t,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=xe({},d,p);break e;case 2:di=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);mr|=o,n.lanes=o,n.memoizedState=d}}function L0(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error($(191,r));r.call(i)}}}var Na={},Rn=Hi(Na),aa=Hi(Na),la=Hi(Na);function sr(n){if(n===Na)throw Error($(174));return n}function fm(n,e){switch(Ee(la,e),Ee(aa,n),Ee(Rn,Na),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pf(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=pf(e,n)}Ce(Rn),Ee(Rn,e)}function bs(){Ce(Rn),Ce(aa),Ce(la)}function fE(n){sr(la.current);var e=sr(Rn.current),t=pf(e,n.type);e!==t&&(Ee(aa,n),Ee(Rn,t))}function pm(n){aa.current===n&&(Ce(Rn),Ce(aa))}var Ae=Hi(0);function Bu(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cd=[];function mm(){for(var n=0;n<cd.length;n++)cd[n]._workInProgressVersionPrimary=null;cd.length=0}var ou=ni.ReactCurrentDispatcher,hd=ni.ReactCurrentBatchConfig,pr=0,ke=null,Ke=null,Je=null,ju=!1,Lo=!1,ua=0,yP=0;function pt(){throw Error($(321))}function gm(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!pn(n[t],e[t]))return!1;return!0}function vm(n,e,t,i,r,s){if(pr=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ou.current=n===null||n.memoizedState===null?SP:TP,n=t(i,r),Lo){s=0;do{if(Lo=!1,ua=0,25<=s)throw Error($(301));s+=1,Je=Ke=null,e.updateQueue=null,ou.current=bP,n=t(i,r)}while(Lo)}if(ou.current=Wu,e=Ke!==null&&Ke.next!==null,pr=0,Je=Ke=ke=null,ju=!1,e)throw Error($(300));return n}function ym(){var n=ua!==0;return ua=0,n}function wn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?ke.memoizedState=Je=n:Je=Je.next=n,Je}function tn(){if(Ke===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=Ke.next;var e=Je===null?ke.memoizedState:Je.next;if(e!==null)Je=e,Ke=n;else{if(n===null)throw Error($(310));Ke=n,n={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Je===null?ke.memoizedState=Je=n:Je=Je.next=n}return Je}function ca(n,e){return typeof e=="function"?e(n):e}function dd(n){var e=tn(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var i=Ke,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((pr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,ke.lanes|=h,mr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,pn(i,e.memoizedState)||(xt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,ke.lanes|=s,mr|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function fd(n){var e=tn(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);pn(s,e.memoizedState)||(xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function pE(){}function mE(n,e){var t=ke,i=tn(),r=e(),s=!pn(i.memoizedState,r);if(s&&(i.memoizedState=r,xt=!0),i=i.queue,_m(yE.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(t.flags|=2048,ha(9,vE.bind(null,t,i,r,e),void 0,null),Ze===null)throw Error($(349));pr&30||gE(t,e,r)}return r}function gE(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function vE(n,e,t,i){e.value=t,e.getSnapshot=i,_E(e)&&wE(n)}function yE(n,e,t){return t(function(){_E(e)&&wE(n)})}function _E(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!pn(n,t)}catch{return!0}}function wE(n){var e=Xn(n,1);e!==null&&hn(e,n,1,-1)}function F0(n){var e=wn();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:n},e.queue=n,n=n.dispatch=EP.bind(null,ke,n),[e.memoizedState,n]}function ha(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function EE(){return tn().memoizedState}function au(n,e,t,i){var r=wn();ke.flags|=n,r.memoizedState=ha(1|e,t,void 0,i===void 0?null:i)}function Mc(n,e,t,i){var r=tn();i=i===void 0?null:i;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,i!==null&&gm(i,o.deps)){r.memoizedState=ha(e,t,s,i);return}}ke.flags|=n,r.memoizedState=ha(1|e,t,s,i)}function z0(n,e){return au(8390656,8,n,e)}function _m(n,e){return Mc(2048,8,n,e)}function SE(n,e){return Mc(4,2,n,e)}function TE(n,e){return Mc(4,4,n,e)}function bE(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function IE(n,e,t){return t=t!=null?t.concat([n]):null,Mc(4,4,bE.bind(null,e,n),t)}function wm(){}function CE(n,e){var t=tn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&gm(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function RE(n,e){var t=tn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&gm(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function PE(n,e,t){return pr&21?(pn(t,e)||(t=Ow(),ke.lanes|=t,mr|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,xt=!0),n.memoizedState=t)}function _P(n,e){var t=ge;ge=t!==0&&4>t?t:4,n(!0);var i=hd.transition;hd.transition={};try{n(!1),e()}finally{ge=t,hd.transition=i}}function AE(){return tn().memoizedState}function wP(n,e,t){var i=Ai(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},kE(n))xE(e,t);else if(t=hE(n,e,t,i),t!==null){var r=Ct();hn(t,n,i,r),ME(t,e,i)}}function EP(n,e,t){var i=Ai(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(kE(n))xE(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,pn(a,o)){var l=e.interleaved;l===null?(r.next=r,hm(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=hE(n,e,r,i),t!==null&&(r=Ct(),hn(t,n,i,r),ME(t,e,i))}}function kE(n){var e=n.alternate;return n===ke||e!==null&&e===ke}function xE(n,e){Lo=ju=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function ME(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Yp(n,t)}}var Wu={readContext:en,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},SP={readContext:en,useCallback:function(n,e){return wn().memoizedState=[n,e===void 0?null:e],n},useContext:en,useEffect:z0,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,au(4194308,4,bE.bind(null,e,n),t)},useLayoutEffect:function(n,e){return au(4194308,4,n,e)},useInsertionEffect:function(n,e){return au(4,2,n,e)},useMemo:function(n,e){var t=wn();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=wn();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=wP.bind(null,ke,n),[i.memoizedState,n]},useRef:function(n){var e=wn();return n={current:n},e.memoizedState=n},useState:F0,useDebugValue:wm,useDeferredValue:function(n){return wn().memoizedState=n},useTransition:function(){var n=F0(!1),e=n[0];return n=_P.bind(null,n[1]),wn().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=ke,r=wn();if(Re){if(t===void 0)throw Error($(407));t=t()}else{if(t=e(),Ze===null)throw Error($(349));pr&30||gE(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,z0(yE.bind(null,i,s,n),[n]),i.flags|=2048,ha(9,vE.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=wn(),e=Ze.identifierPrefix;if(Re){var t=zn,i=Fn;t=(i&~(1<<32-cn(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=ua++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=yP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},TP={readContext:en,useCallback:CE,useContext:en,useEffect:_m,useImperativeHandle:IE,useInsertionEffect:SE,useLayoutEffect:TE,useMemo:RE,useReducer:dd,useRef:EE,useState:function(){return dd(ca)},useDebugValue:wm,useDeferredValue:function(n){var e=tn();return PE(e,Ke.memoizedState,n)},useTransition:function(){var n=dd(ca)[0],e=tn().memoizedState;return[n,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:AE,unstable_isNewReconciler:!1},bP={readContext:en,useCallback:CE,useContext:en,useEffect:_m,useImperativeHandle:IE,useInsertionEffect:SE,useLayoutEffect:TE,useMemo:RE,useReducer:fd,useRef:EE,useState:function(){return fd(ca)},useDebugValue:wm,useDeferredValue:function(n){var e=tn();return Ke===null?e.memoizedState=n:PE(e,Ke.memoizedState,n)},useTransition:function(){var n=fd(ca)[0],e=tn().memoizedState;return[n,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:AE,unstable_isNewReconciler:!1};function on(n,e){if(n&&n.defaultProps){e=xe({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Df(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:xe({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Oc={isMounted:function(n){return(n=n._reactInternals)?Ar(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Ct(),r=Ai(n),s=Hn(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ri(n,s,r),e!==null&&(hn(e,n,r,i),su(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Ct(),r=Ai(n),s=Hn(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ri(n,s,r),e!==null&&(hn(e,n,r,i),su(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ct(),i=Ai(n),r=Hn(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ri(n,r,i),e!==null&&(hn(e,n,i,t),su(e,n,i))}};function $0(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ia(t,i)||!ia(r,s):!0}function OE(n,e,t){var i=!1,r=zi,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(r=Ot(e)?dr:Et.current,i=e.contextTypes,s=(i=i!=null)?Es(n,r):zi),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oc,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function U0(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Oc.enqueueReplaceState(e,e.state,null)}function Nf(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},dm(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=en(s):(s=Ot(e)?dr:Et.current,r.context=Es(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Df(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Oc.enqueueReplaceState(r,r.state,null),Uu(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Is(n,e){try{var t="",i=e;do t+=JC(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function pd(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Lf(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var IP=typeof WeakMap=="function"?WeakMap:Map;function VE(n,e,t){t=Hn(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){qu||(qu=!0,Kf=i),Lf(n,e)},t}function DE(n,e,t){t=Hn(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Lf(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Lf(n,e),typeof i!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function B0(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new IP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=zP.bind(null,n,e,t),e.then(n,n))}function j0(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function W0(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Hn(-1,1),e.tag=2,Ri(t,e,1))),t.lanes|=1),n)}var CP=ni.ReactCurrentOwner,xt=!1;function It(n,e,t,i){e.child=n===null?cE(e,null,t,i):Ts(e,n.child,t,i)}function H0(n,e,t,i,r){t=t.render;var s=e.ref;return ds(e,r),i=vm(n,e,t,i,s,r),t=ym(),n!==null&&!xt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Yn(n,e,r)):(Re&&t&&sm(e),e.flags|=1,It(n,e,i,r),e.child)}function q0(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Pm(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,NE(n,e,s,i,r)):(n=hu(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ia,t(o,i)&&n.ref===e.ref)return Yn(n,e,r)}return e.flags|=1,n=ki(s,i),n.ref=e.ref,n.return=e,e.child=n}function NE(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(ia(s,i)&&n.ref===e.ref)if(xt=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(xt=!0);else return e.lanes=n.lanes,Yn(n,e,r)}return Ff(n,e,t,i,r)}function LE(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(ss,zt),zt|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ee(ss,zt),zt|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Ee(ss,zt),zt|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Ee(ss,zt),zt|=i;return It(n,e,r,t),e.child}function FE(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ff(n,e,t,i,r){var s=Ot(t)?dr:Et.current;return s=Es(e,s),ds(e,r),t=vm(n,e,t,i,s,r),i=ym(),n!==null&&!xt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Yn(n,e,r)):(Re&&i&&sm(e),e.flags|=1,It(n,e,t,r),e.child)}function K0(n,e,t,i,r){if(Ot(t)){var s=!0;Nu(e)}else s=!1;if(ds(e,r),e.stateNode===null)lu(n,e),OE(e,t,i),Nf(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=en(c):(c=Ot(t)?dr:Et.current,c=Es(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&U0(e,o,i,c),di=!1;var p=e.memoizedState;o.state=p,Uu(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Mt.current||di?(typeof h=="function"&&(Df(e,t,h,i),l=e.memoizedState),(a=di||$0(e,t,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,dE(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:on(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=en(l):(l=Ot(t)?dr:Et.current,l=Es(e,l));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&U0(e,o,i,l),di=!1,p=e.memoizedState,o.state=p,Uu(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||Mt.current||di?(typeof g=="function"&&(Df(e,t,g,i),y=e.memoizedState),(c=di||$0(e,t,c,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return zf(n,e,t,i,s,r)}function zf(n,e,t,i,r,s){FE(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&M0(e,t,!1),Yn(n,e,s);i=e.stateNode,CP.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Ts(e,n.child,null,s),e.child=Ts(e,null,a,s)):It(n,e,a,s),e.memoizedState=i.state,r&&M0(e,t,!0),e.child}function zE(n){var e=n.stateNode;e.pendingContext?x0(n,e.pendingContext,e.pendingContext!==e.context):e.context&&x0(n,e.context,!1),fm(n,e.containerInfo)}function G0(n,e,t,i,r){return Ss(),am(r),e.flags|=256,It(n,e,t,i),e.child}var $f={dehydrated:null,treeContext:null,retryLane:0};function Uf(n){return{baseLanes:n,cachePool:null,transitions:null}}function $E(n,e,t){var i=e.pendingProps,r=Ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Ee(Ae,r&1),n===null)return Of(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nc(o,i,0,null),n=ur(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Uf(t),e.memoizedState=$f,n):Em(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return RP(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ki(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ki(a,s):(s=ur(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Uf(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=$f,i}return s=n.child,n=s.sibling,i=ki(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Em(n,e){return e=Nc({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Al(n,e,t,i){return i!==null&&am(i),Ts(e,n.child,null,t),n=Em(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function RP(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=pd(Error($(422))),Al(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Nc({mode:"visible",children:i.children},r,0,null),s=ur(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ts(e,n.child,null,o),e.child.memoizedState=Uf(o),e.memoizedState=$f,s);if(!(e.mode&1))return Al(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error($(419)),i=pd(s,i,void 0),Al(n,e,o,i)}if(a=(o&n.childLanes)!==0,xt||a){if(i=Ze,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Xn(n,r),hn(i,n,r,-1))}return Rm(),i=pd(Error($(421))),Al(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=$P.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,$t=Ci(r.nextSibling),Ut=e,Re=!0,ln=null,n!==null&&(Gt[Qt++]=Fn,Gt[Qt++]=zn,Gt[Qt++]=fr,Fn=n.id,zn=n.overflow,fr=e),e=Em(e,i.children),e.flags|=4096,e)}function Q0(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Vf(n.return,e,t)}function md(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function UE(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(It(n,e,i.children,t),i=Ae.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Q0(n,t,e);else if(n.tag===19)Q0(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Ee(Ae,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Bu(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),md(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Bu(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}md(e,!0,t,null,s);break;case"together":md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lu(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Yn(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),mr|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error($(153));if(e.child!==null){for(n=e.child,t=ki(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ki(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function PP(n,e,t){switch(e.tag){case 3:zE(e),Ss();break;case 5:fE(e);break;case 1:Ot(e.type)&&Nu(e);break;case 4:fm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ee(zu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ee(Ae,Ae.current&1),e.flags|=128,null):t&e.child.childLanes?$E(n,e,t):(Ee(Ae,Ae.current&1),n=Yn(n,e,t),n!==null?n.sibling:null);Ee(Ae,Ae.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return UE(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ee(Ae,Ae.current),i)break;return null;case 22:case 23:return e.lanes=0,LE(n,e,t)}return Yn(n,e,t)}var BE,Bf,jE,WE;BE=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Bf=function(){};jE=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,sr(Rn.current);var s=null;switch(t){case"input":r=cf(n,r),i=cf(n,i),s=[];break;case"select":r=xe({},r,{value:void 0}),i=xe({},i,{value:void 0}),s=[];break;case"textarea":r=ff(n,r),i=ff(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Vu)}mf(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xo.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Te("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};WE=function(n,e,t,i){t!==i&&(e.flags|=4)};function yo(n,e){if(!Re)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function mt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function AP(n,e,t){var i=e.pendingProps;switch(om(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Ot(e.type)&&Du(),mt(e),null;case 3:return i=e.stateNode,bs(),Ce(Mt),Ce(Et),mm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Rl(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(Xf(ln),ln=null))),Bf(n,e),mt(e),null;case 5:pm(e);var r=sr(la.current);if(t=e.type,n!==null&&e.stateNode!=null)jE(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return mt(e),null}if(n=sr(Rn.current),Rl(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Tn]=e,i[oa]=s,n=(e.mode&1)!==0,t){case"dialog":Te("cancel",i),Te("close",i);break;case"iframe":case"object":case"embed":Te("load",i);break;case"video":case"audio":for(r=0;r<Ro.length;r++)Te(Ro[r],i);break;case"source":Te("error",i);break;case"img":case"image":case"link":Te("error",i),Te("load",i);break;case"details":Te("toggle",i);break;case"input":r0(i,s),Te("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Te("invalid",i);break;case"textarea":o0(i,s),Te("invalid",i)}mf(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Cl(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Cl(i.textContent,a,n),r=["children",""+a]):Xo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",i)}switch(t){case"input":yl(i),s0(i,s,!0);break;case"textarea":yl(i),a0(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Vu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yw(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Tn]=e,n[oa]=i,BE(n,e,!1,!1),e.stateNode=n;e:{switch(o=gf(t,i),t){case"dialog":Te("cancel",n),Te("close",n),r=i;break;case"iframe":case"object":case"embed":Te("load",n),r=i;break;case"video":case"audio":for(r=0;r<Ro.length;r++)Te(Ro[r],n);r=i;break;case"source":Te("error",n),r=i;break;case"img":case"image":case"link":Te("error",n),Te("load",n),r=i;break;case"details":Te("toggle",n),r=i;break;case"input":r0(n,i),r=cf(n,i),Te("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=xe({},i,{value:void 0}),Te("invalid",n);break;case"textarea":o0(n,i),r=ff(n,i),Te("invalid",n);break;default:r=i}mf(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ew(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_w(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Yo(n,l):typeof l=="number"&&Yo(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xo.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Te("scroll",n):l!=null&&Hp(n,s,l,o))}switch(t){case"input":yl(n),s0(n,i,!1);break;case"textarea":yl(n),a0(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Fi(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?ls(n,!!i.multiple,s,!1):i.defaultValue!=null&&ls(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Vu)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(n&&e.stateNode!=null)WE(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(t=sr(la.current),sr(Rn.current),Rl(e)){if(i=e.stateNode,t=e.memoizedProps,i[Tn]=e,(s=i.nodeValue!==t)&&(n=Ut,n!==null))switch(n.tag){case 3:Cl(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cl(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Tn]=e,e.stateNode=i}return mt(e),null;case 13:if(Ce(Ae),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Re&&$t!==null&&e.mode&1&&!(e.flags&128))lE(),Ss(),e.flags|=98560,s=!1;else if(s=Rl(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Tn]=e}else Ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else ln!==null&&(Xf(ln),ln=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ae.current&1?Ge===0&&(Ge=3):Rm())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return bs(),Bf(n,e),n===null&&ra(e.stateNode.containerInfo),mt(e),null;case 10:return cm(e.type._context),mt(e),null;case 17:return Ot(e.type)&&Du(),mt(e),null;case 19:if(Ce(Ae),s=e.memoizedState,s===null)return mt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)yo(s,!1);else{if(Ge!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Bu(n),o!==null){for(e.flags|=128,yo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ee(Ae,Ae.current&1|2),e.child}n=n.sibling}s.tail!==null&&Fe()>Cs&&(e.flags|=128,i=!0,yo(s,!1),e.lanes=4194304)}else{if(!i)if(n=Bu(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),yo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return mt(e),null}else 2*Fe()-s.renderingStartTime>Cs&&t!==1073741824&&(e.flags|=128,i=!0,yo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,t=Ae.current,Ee(Ae,i?t&1|2:t&1),e):(mt(e),null);case 22:case 23:return Cm(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?zt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function kP(n,e){switch(om(e),e.tag){case 1:return Ot(e.type)&&Du(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return bs(),Ce(Mt),Ce(Et),mm(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return pm(e),null;case 13:if(Ce(Ae),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ss()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ce(Ae),null;case 4:return bs(),null;case 10:return cm(e.type._context),null;case 22:case 23:return Cm(),null;case 24:return null;default:return null}}var kl=!1,_t=!1,xP=typeof WeakSet=="function"?WeakSet:Set,j=null;function rs(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Ve(n,e,i)}else t.current=null}function jf(n,e,t){try{t()}catch(i){Ve(n,e,i)}}var X0=!1;function MP(n,e){if(Cf=xu,n=Qw(),rm(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=n,p=null;t:for(;;){for(var g;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Rf={focusedElem:n,selectionRange:t},xu=!1,j=e;j!==null;)if(e=j,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,j=n;else for(;j!==null;){e=j;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,b=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:on(e.type,_),b);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(A){Ve(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,j=n;break}j=e.return}return y=X0,X0=!1,y}function Fo(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&jf(e,t,s)}r=r.next}while(r!==i)}}function Vc(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Wf(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function HE(n){var e=n.alternate;e!==null&&(n.alternate=null,HE(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Tn],delete e[oa],delete e[kf],delete e[pP],delete e[mP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function qE(n){return n.tag===5||n.tag===3||n.tag===4}function Y0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||qE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hf(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Vu));else if(i!==4&&(n=n.child,n!==null))for(Hf(n,e,t),n=n.sibling;n!==null;)Hf(n,e,t),n=n.sibling}function qf(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(qf(n,e,t),n=n.sibling;n!==null;)qf(n,e,t),n=n.sibling}var nt=null,an=!1;function li(n,e,t){for(t=t.child;t!==null;)KE(n,e,t),t=t.sibling}function KE(n,e,t){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Cc,t)}catch{}switch(t.tag){case 5:_t||rs(t,e);case 6:var i=nt,r=an;nt=null,li(n,e,t),nt=i,an=r,nt!==null&&(an?(n=nt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):nt.removeChild(t.stateNode));break;case 18:nt!==null&&(an?(n=nt,t=t.stateNode,n.nodeType===8?ld(n.parentNode,t):n.nodeType===1&&ld(n,t),ta(n)):ld(nt,t.stateNode));break;case 4:i=nt,r=an,nt=t.stateNode.containerInfo,an=!0,li(n,e,t),nt=i,an=r;break;case 0:case 11:case 14:case 15:if(!_t&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jf(t,e,o),r=r.next}while(r!==i)}li(n,e,t);break;case 1:if(!_t&&(rs(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Ve(t,e,a)}li(n,e,t);break;case 21:li(n,e,t);break;case 22:t.mode&1?(_t=(i=_t)||t.memoizedState!==null,li(n,e,t),_t=i):li(n,e,t);break;default:li(n,e,t)}}function J0(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new xP),e.forEach(function(i){var r=UP.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function sn(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,an=!1;break e;case 3:nt=a.stateNode.containerInfo,an=!0;break e;case 4:nt=a.stateNode.containerInfo,an=!0;break e}a=a.return}if(nt===null)throw Error($(160));KE(s,o,r),nt=null,an=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ve(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GE(e,n),e=e.sibling}function GE(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(sn(e,n),yn(n),i&4){try{Fo(3,n,n.return),Vc(3,n)}catch(_){Ve(n,n.return,_)}try{Fo(5,n,n.return)}catch(_){Ve(n,n.return,_)}}break;case 1:sn(e,n),yn(n),i&512&&t!==null&&rs(t,t.return);break;case 5:if(sn(e,n),yn(n),i&512&&t!==null&&rs(t,t.return),n.flags&32){var r=n.stateNode;try{Yo(r,"")}catch(_){Ve(n,n.return,_)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gw(r,s),gf(a,o);var c=gf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Ew(r,d):h==="dangerouslySetInnerHTML"?_w(r,d):h==="children"?Yo(r,d):Hp(r,h,d,c)}switch(a){case"input":hf(r,s);break;case"textarea":vw(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ls(r,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?ls(r,!!s.multiple,s.defaultValue,!0):ls(r,!!s.multiple,s.multiple?[]:"",!1))}r[oa]=s}catch(_){Ve(n,n.return,_)}}break;case 6:if(sn(e,n),yn(n),i&4){if(n.stateNode===null)throw Error($(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(_){Ve(n,n.return,_)}}break;case 3:if(sn(e,n),yn(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{ta(e.containerInfo)}catch(_){Ve(n,n.return,_)}break;case 4:sn(e,n),yn(n);break;case 13:sn(e,n),yn(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(bm=Fe())),i&4&&J0(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(_t=(c=_t)||h,sn(e,n),_t=c):sn(e,n),yn(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(j=n,h=n.child;h!==null;){for(d=j=h;j!==null;){switch(p=j,g=p.child,p.tag){case 0:case 11:case 14:case 15:Fo(4,p,p.return);break;case 1:rs(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){Ve(i,t,_)}}break;case 5:rs(p,p.return);break;case 22:if(p.memoizedState!==null){ey(d);continue}}g!==null?(g.return=p,j=g):ey(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ww("display",o))}catch(_){Ve(n,n.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){Ve(n,n.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sn(e,n),yn(n),i&4&&J0(n);break;case 21:break;default:sn(e,n),yn(n)}}function yn(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(qE(t)){var i=t;break e}t=t.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Yo(r,""),i.flags&=-33);var s=Y0(n);qf(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Y0(n);Hf(n,a,o);break;default:throw Error($(161))}}catch(l){Ve(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function OP(n,e,t){j=n,QE(n)}function QE(n,e,t){for(var i=(n.mode&1)!==0;j!==null;){var r=j,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||kl;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||_t;a=kl;var c=_t;if(kl=o,(_t=l)&&!c)for(j=r;j!==null;)o=j,l=o.child,o.tag===22&&o.memoizedState!==null?ty(r):l!==null?(l.return=o,j=l):ty(r);for(;s!==null;)j=s,QE(s),s=s.sibling;j=r,kl=a,_t=c}Z0(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,j=s):Z0(n)}}function Z0(n){for(;j!==null;){var e=j;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||Vc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!_t)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:on(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L0(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}L0(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ta(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}_t||e.flags&512&&Wf(e)}catch(p){Ve(e,e.return,p)}}if(e===n){j=null;break}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}}function ey(n){for(;j!==null;){var e=j;if(e===n){j=null;break}var t=e.sibling;if(t!==null){t.return=e.return,j=t;break}j=e.return}}function ty(n){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Vc(4,e)}catch(l){Ve(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ve(e,r,l)}}var s=e.return;try{Wf(e)}catch(l){Ve(e,s,l)}break;case 5:var o=e.return;try{Wf(e)}catch(l){Ve(e,o,l)}}}catch(l){Ve(e,e.return,l)}if(e===n){j=null;break}var a=e.sibling;if(a!==null){a.return=e.return,j=a;break}j=e.return}}var VP=Math.ceil,Hu=ni.ReactCurrentDispatcher,Sm=ni.ReactCurrentOwner,Jt=ni.ReactCurrentBatchConfig,le=0,Ze=null,Be=null,at=0,zt=0,ss=Hi(0),Ge=0,da=null,mr=0,Dc=0,Tm=0,zo=null,kt=null,bm=0,Cs=1/0,Nn=null,qu=!1,Kf=null,Pi=null,xl=!1,wi=null,Ku=0,$o=0,Gf=null,uu=-1,cu=0;function Ct(){return le&6?Fe():uu!==-1?uu:uu=Fe()}function Ai(n){return n.mode&1?le&2&&at!==0?at&-at:vP.transition!==null?(cu===0&&(cu=Ow()),cu):(n=ge,n!==0||(n=window.event,n=n===void 0?16:$w(n.type)),n):1}function hn(n,e,t,i){if(50<$o)throw $o=0,Gf=null,Error($(185));Oa(n,t,i),(!(le&2)||n!==Ze)&&(n===Ze&&(!(le&2)&&(Dc|=t),Ge===4&&pi(n,at)),Vt(n,i),t===1&&le===0&&!(e.mode&1)&&(Cs=Fe()+500,xc&&qi()))}function Vt(n,e){var t=n.callbackNode;vR(n,e);var i=ku(n,n===Ze?at:0);if(i===0)t!==null&&c0(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&c0(t),e===1)n.tag===0?gP(ny.bind(null,n)):sE(ny.bind(null,n)),dP(function(){!(le&6)&&qi()}),t=null;else{switch(Vw(i)){case 1:t=Xp;break;case 4:t=xw;break;case 16:t=Au;break;case 536870912:t=Mw;break;default:t=Au}t=iS(t,XE.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function XE(n,e){if(uu=-1,cu=0,le&6)throw Error($(327));var t=n.callbackNode;if(fs()&&n.callbackNode!==t)return null;var i=ku(n,n===Ze?at:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Gu(n,i);else{e=i;var r=le;le|=2;var s=JE();(Ze!==n||at!==e)&&(Nn=null,Cs=Fe()+500,lr(n,e));do try{LP();break}catch(a){YE(n,a)}while(1);um(),Hu.current=s,le=r,Be!==null?e=0:(Ze=null,at=0,e=Ge)}if(e!==0){if(e===2&&(r=Ef(n),r!==0&&(i=r,e=Qf(n,r))),e===1)throw t=da,lr(n,0),pi(n,i),Vt(n,Fe()),t;if(e===6)pi(n,i);else{if(r=n.current.alternate,!(i&30)&&!DP(r)&&(e=Gu(n,i),e===2&&(s=Ef(n),s!==0&&(i=s,e=Qf(n,s))),e===1))throw t=da,lr(n,0),pi(n,i),Vt(n,Fe()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:tr(n,kt,Nn);break;case 3:if(pi(n,i),(i&130023424)===i&&(e=bm+500-Fe(),10<e)){if(ku(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Ct(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Af(tr.bind(null,n,kt,Nn),e);break}tr(n,kt,Nn);break;case 4:if(pi(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-cn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Fe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VP(i/1960))-i,10<i){n.timeoutHandle=Af(tr.bind(null,n,kt,Nn),i);break}tr(n,kt,Nn);break;case 5:tr(n,kt,Nn);break;default:throw Error($(329))}}}return Vt(n,Fe()),n.callbackNode===t?XE.bind(null,n):null}function Qf(n,e){var t=zo;return n.current.memoizedState.isDehydrated&&(lr(n,e).flags|=256),n=Gu(n,e),n!==2&&(e=kt,kt=t,e!==null&&Xf(e)),n}function Xf(n){kt===null?kt=n:kt.push.apply(kt,n)}function DP(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!pn(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pi(n,e){for(e&=~Tm,e&=~Dc,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-cn(e),i=1<<t;n[t]=-1,e&=~i}}function ny(n){if(le&6)throw Error($(327));fs();var e=ku(n,0);if(!(e&1))return Vt(n,Fe()),null;var t=Gu(n,e);if(n.tag!==0&&t===2){var i=Ef(n);i!==0&&(e=i,t=Qf(n,i))}if(t===1)throw t=da,lr(n,0),pi(n,e),Vt(n,Fe()),t;if(t===6)throw Error($(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,tr(n,kt,Nn),Vt(n,Fe()),null}function Im(n,e){var t=le;le|=1;try{return n(e)}finally{le=t,le===0&&(Cs=Fe()+500,xc&&qi())}}function gr(n){wi!==null&&wi.tag===0&&!(le&6)&&fs();var e=le;le|=1;var t=Jt.transition,i=ge;try{if(Jt.transition=null,ge=1,n)return n()}finally{ge=i,Jt.transition=t,le=e,!(le&6)&&qi()}}function Cm(){zt=ss.current,Ce(ss)}function lr(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,hP(t)),Be!==null)for(t=Be.return;t!==null;){var i=t;switch(om(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Du();break;case 3:bs(),Ce(Mt),Ce(Et),mm();break;case 5:pm(i);break;case 4:bs();break;case 13:Ce(Ae);break;case 19:Ce(Ae);break;case 10:cm(i.type._context);break;case 22:case 23:Cm()}t=t.return}if(Ze=n,Be=n=ki(n.current,null),at=zt=e,Ge=0,da=null,Tm=Dc=mr=0,kt=zo=null,rr!==null){for(e=0;e<rr.length;e++)if(t=rr[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}rr=null}return n}function YE(n,e){do{var t=Be;try{if(um(),ou.current=Wu,ju){for(var i=ke.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ju=!1}if(pr=0,Je=Ke=ke=null,Lo=!1,ua=0,Sm.current=null,t===null||t.return===null){Ge=1,da=e,Be=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=j0(o);if(g!==null){g.flags&=-257,W0(g,o,a,s,e),g.mode&1&&B0(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){B0(s,c,e),Rm();break e}l=Error($(426))}}else if(Re&&a.mode&1){var b=j0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),W0(b,o,a,s,e),am(Is(l,a));break e}}s=l=Is(l,a),Ge!==4&&(Ge=2),zo===null?zo=[s]:zo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=VE(s,l,e);N0(s,v);break e;case 1:a=l;var w=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Pi===null||!Pi.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=DE(s,a,e);N0(s,A);break e}}s=s.return}while(s!==null)}eS(t)}catch(V){e=V,Be===t&&t!==null&&(Be=t=t.return);continue}break}while(1)}function JE(){var n=Hu.current;return Hu.current=Wu,n===null?Wu:n}function Rm(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Ze===null||!(mr&268435455)&&!(Dc&268435455)||pi(Ze,at)}function Gu(n,e){var t=le;le|=2;var i=JE();(Ze!==n||at!==e)&&(Nn=null,lr(n,e));do try{NP();break}catch(r){YE(n,r)}while(1);if(um(),le=t,Hu.current=i,Be!==null)throw Error($(261));return Ze=null,at=0,Ge}function NP(){for(;Be!==null;)ZE(Be)}function LP(){for(;Be!==null&&!lR();)ZE(Be)}function ZE(n){var e=nS(n.alternate,n,zt);n.memoizedProps=n.pendingProps,e===null?eS(n):Be=e,Sm.current=null}function eS(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=kP(t,e),t!==null){t.flags&=32767,Be=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ge=6,Be=null;return}}else if(t=AP(t,e,zt),t!==null){Be=t;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=n}while(e!==null);Ge===0&&(Ge=5)}function tr(n,e,t){var i=ge,r=Jt.transition;try{Jt.transition=null,ge=1,FP(n,e,t,i)}finally{Jt.transition=r,ge=i}return null}function FP(n,e,t,i){do fs();while(wi!==null);if(le&6)throw Error($(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error($(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(yR(n,s),n===Ze&&(Be=Ze=null,at=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||xl||(xl=!0,iS(Au,function(){return fs(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Jt.transition,Jt.transition=null;var o=ge;ge=1;var a=le;le|=4,Sm.current=null,MP(n,t),GE(t,n),rP(Rf),xu=!!Cf,Rf=Cf=null,n.current=t,OP(t),uR(),le=a,ge=o,Jt.transition=s}else n.current=t;if(xl&&(xl=!1,wi=n,Ku=r),s=n.pendingLanes,s===0&&(Pi=null),dR(t.stateNode),Vt(n,Fe()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(qu)throw qu=!1,n=Kf,Kf=null,n;return Ku&1&&n.tag!==0&&fs(),s=n.pendingLanes,s&1?n===Gf?$o++:($o=0,Gf=n):$o=0,qi(),null}function fs(){if(wi!==null){var n=Vw(Ku),e=Jt.transition,t=ge;try{if(Jt.transition=null,ge=16>n?16:n,wi===null)var i=!1;else{if(n=wi,wi=null,Ku=0,le&6)throw Error($(331));var r=le;for(le|=4,j=n.current;j!==null;){var s=j,o=s.child;if(j.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(j=c;j!==null;){var h=j;switch(h.tag){case 0:case 11:case 15:Fo(8,h,s)}var d=h.child;if(d!==null)d.return=h,j=d;else for(;j!==null;){h=j;var p=h.sibling,g=h.return;if(HE(h),h===c){j=null;break}if(p!==null){p.return=g,j=p;break}j=g}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}j=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,j=o;else e:for(;j!==null;){if(s=j,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Fo(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,j=v;break e}j=s.return}}var w=n.current;for(j=w;j!==null;){o=j;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,j=I;else e:for(o=w;j!==null;){if(a=j,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vc(9,a)}}catch(V){Ve(a,a.return,V)}if(a===o){j=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,j=A;break e}j=a.return}}if(le=r,qi(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Cc,n)}catch{}i=!0}return i}finally{ge=t,Jt.transition=e}}return!1}function iy(n,e,t){e=Is(t,e),e=VE(n,e,1),n=Ri(n,e,1),e=Ct(),n!==null&&(Oa(n,1,e),Vt(n,e))}function Ve(n,e,t){if(n.tag===3)iy(n,n,t);else for(;e!==null;){if(e.tag===3){iy(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pi===null||!Pi.has(i))){n=Is(t,n),n=DE(e,n,1),e=Ri(e,n,1),n=Ct(),e!==null&&(Oa(e,1,n),Vt(e,n));break}}e=e.return}}function zP(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Ct(),n.pingedLanes|=n.suspendedLanes&t,Ze===n&&(at&t)===t&&(Ge===4||Ge===3&&(at&130023424)===at&&500>Fe()-bm?lr(n,0):Tm|=t),Vt(n,e)}function tS(n,e){e===0&&(n.mode&1?(e=El,El<<=1,!(El&130023424)&&(El=4194304)):e=1);var t=Ct();n=Xn(n,e),n!==null&&(Oa(n,e,t),Vt(n,t))}function $P(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),tS(n,t)}function UP(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),tS(n,t)}var nS;nS=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Mt.current)xt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return xt=!1,PP(n,e,t);xt=!!(n.flags&131072)}else xt=!1,Re&&e.flags&1048576&&oE(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;lu(n,e),n=e.pendingProps;var r=Es(e,Et.current);ds(e,t),r=vm(null,e,i,n,r,t);var s=ym();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(i)?(s=!0,Nu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,dm(e),r.updater=Oc,e.stateNode=r,r._reactInternals=e,Nf(e,i,n,t),e=zf(null,e,i,!0,s,t)):(e.tag=0,Re&&s&&sm(e),It(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(lu(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=jP(i),n=on(i,n),r){case 0:e=Ff(null,e,i,n,t);break e;case 1:e=K0(null,e,i,n,t);break e;case 11:e=H0(null,e,i,n,t);break e;case 14:e=q0(null,e,i,on(i.type,n),t);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),Ff(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),K0(n,e,i,r,t);case 3:e:{if(zE(e),n===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,dE(n,e),Uu(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Is(Error($(423)),e),e=G0(n,e,i,t,r);break e}else if(i!==r){r=Is(Error($(424)),e),e=G0(n,e,i,t,r);break e}else for($t=Ci(e.stateNode.containerInfo.firstChild),Ut=e,Re=!0,ln=null,t=cE(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ss(),i===r){e=Yn(n,e,t);break e}It(n,e,i,t)}e=e.child}return e;case 5:return fE(e),n===null&&Of(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,Pf(i,r)?o=null:s!==null&&Pf(i,s)&&(e.flags|=32),FE(n,e),It(n,e,o,t),e.child;case 6:return n===null&&Of(e),null;case 13:return $E(n,e,t);case 4:return fm(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Ts(e,null,i,t):It(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),H0(n,e,i,r,t);case 7:return It(n,e,e.pendingProps,t),e.child;case 8:return It(n,e,e.pendingProps.children,t),e.child;case 12:return It(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ee(zu,i._currentValue),i._currentValue=o,s!==null)if(pn(s.value,o)){if(s.children===r.children&&!Mt.current){e=Yn(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Hn(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Vf(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Vf(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ds(e,t),r=en(r),i=i(r),e.flags|=1,It(n,e,i,t),e.child;case 14:return i=e.type,r=on(i,e.pendingProps),r=on(i.type,r),q0(n,e,i,r,t);case 15:return NE(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:on(i,r),lu(n,e),e.tag=1,Ot(i)?(n=!0,Nu(e)):n=!1,ds(e,t),OE(e,i,r),Nf(e,i,r,t),zf(null,e,i,!0,n,t);case 19:return UE(n,e,t);case 22:return LE(n,e,t)}throw Error($(156,e.tag))};function iS(n,e){return kw(n,e)}function BP(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(n,e,t,i){return new BP(n,e,t,i)}function Pm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jP(n){if(typeof n=="function")return Pm(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Kp)return 11;if(n===Gp)return 14}return 2}function ki(n,e){var t=n.alternate;return t===null?(t=Yt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function hu(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")Pm(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Qr:return ur(t.children,r,s,e);case qp:o=8,r|=8;break;case of:return n=Yt(12,t,e,r|2),n.elementType=of,n.lanes=s,n;case af:return n=Yt(13,t,e,r),n.elementType=af,n.lanes=s,n;case lf:return n=Yt(19,t,e,r),n.elementType=lf,n.lanes=s,n;case fw:return Nc(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case hw:o=10;break e;case dw:o=9;break e;case Kp:o=11;break e;case Gp:o=14;break e;case hi:o=16,i=null;break e}throw Error($(130,n==null?n:typeof n,""))}return e=Yt(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ur(n,e,t,i){return n=Yt(7,n,i,e),n.lanes=t,n}function Nc(n,e,t,i){return n=Yt(22,n,i,e),n.elementType=fw,n.lanes=t,n.stateNode={isHidden:!1},n}function gd(n,e,t){return n=Yt(6,n,null,e),n.lanes=t,n}function vd(n,e,t){return e=Yt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function WP(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yh(0),this.expirationTimes=Yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Am(n,e,t,i,r,s,o,a,l){return n=new WP(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(s),n}function HP(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function rS(n){if(!n)return zi;n=n._reactInternals;e:{if(Ar(n)!==n||n.tag!==1)throw Error($(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(n.tag===1){var t=n.type;if(Ot(t))return rE(n,t,e)}return e}function sS(n,e,t,i,r,s,o,a,l){return n=Am(t,i,!0,n,r,s,o,a,l),n.context=rS(null),t=n.current,i=Ct(),r=Ai(t),s=Hn(i,r),s.callback=e??null,Ri(t,s,r),n.current.lanes=r,Oa(n,r,i),Vt(n,i),n}function Lc(n,e,t,i){var r=e.current,s=Ct(),o=Ai(r);return t=rS(t),e.context===null?e.context=t:e.pendingContext=t,e=Hn(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ri(r,e,o),n!==null&&(hn(n,r,o,s),su(n,r,o)),o}function Qu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ry(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function km(n,e){ry(n,e),(n=n.alternate)&&ry(n,e)}function qP(){return null}var oS=typeof reportError=="function"?reportError:function(n){console.error(n)};function xm(n){this._internalRoot=n}Fc.prototype.render=xm.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error($(409));Lc(n,e,null,null)};Fc.prototype.unmount=xm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;gr(function(){Lc(null,n,null,null)}),e[Qn]=null}};function Fc(n){this._internalRoot=n}Fc.prototype.unstable_scheduleHydration=function(n){if(n){var e=Lw();n={blockedOn:null,target:n,priority:e};for(var t=0;t<fi.length&&e!==0&&e<fi[t].priority;t++);fi.splice(t,0,n),t===0&&zw(n)}};function Mm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function sy(){}function KP(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Qu(o);s.call(c)}}var o=sS(e,i,n,0,null,!1,!1,"",sy);return n._reactRootContainer=o,n[Qn]=o.current,ra(n.nodeType===8?n.parentNode:n),gr(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Qu(l);a.call(c)}}var l=Am(n,0,!1,null,null,!1,!1,"",sy);return n._reactRootContainer=l,n[Qn]=l.current,ra(n.nodeType===8?n.parentNode:n),gr(function(){Lc(e,l,t,i)}),l}function $c(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Qu(o);a.call(l)}}Lc(e,o,n,r)}else o=KP(t,e,n,r,i);return Qu(o)}Dw=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Co(e.pendingLanes);t!==0&&(Yp(e,t|1),Vt(e,Fe()),!(le&6)&&(Cs=Fe()+500,qi()))}break;case 13:gr(function(){var i=Xn(n,1);if(i!==null){var r=Ct();hn(i,n,1,r)}}),km(n,1)}};Jp=function(n){if(n.tag===13){var e=Xn(n,134217728);if(e!==null){var t=Ct();hn(e,n,134217728,t)}km(n,134217728)}};Nw=function(n){if(n.tag===13){var e=Ai(n),t=Xn(n,e);if(t!==null){var i=Ct();hn(t,n,e,i)}km(n,e)}};Lw=function(){return ge};Fw=function(n,e){var t=ge;try{return ge=n,e()}finally{ge=t}};yf=function(n,e,t){switch(e){case"input":if(hf(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=kc(i);if(!r)throw Error($(90));mw(i),hf(i,r)}}}break;case"textarea":vw(n,t);break;case"select":e=t.value,e!=null&&ls(n,!!t.multiple,e,!1)}};bw=Im;Iw=gr;var GP={usingClientEntryPoint:!1,Events:[Da,Zr,kc,Sw,Tw,Im]},_o={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QP={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Pw(n),n===null?null:n.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||qP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{Cc=Ml.inject(QP),Cn=Ml}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GP;Wt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mm(e))throw Error($(200));return HP(n,e,null,t)};Wt.createRoot=function(n,e){if(!Mm(n))throw Error($(299));var t=!1,i="",r=oS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Am(n,1,!1,null,null,t,!1,i,r),n[Qn]=e.current,ra(n.nodeType===8?n.parentNode:n),new xm(e)};Wt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error($(188)):(n=Object.keys(n).join(","),Error($(268,n)));return n=Pw(e),n=n===null?null:n.stateNode,n};Wt.flushSync=function(n){return gr(n)};Wt.hydrate=function(n,e,t){if(!zc(e))throw Error($(200));return $c(null,n,e,!0,t)};Wt.hydrateRoot=function(n,e,t){if(!Mm(n))throw Error($(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=oS;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=sS(e,null,n,1,t??null,r,!1,s,o),n[Qn]=e.current,ra(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Fc(e)};Wt.render=function(n,e,t){if(!zc(e))throw Error($(200));return $c(null,n,e,!1,t)};Wt.unmountComponentAtNode=function(n){if(!zc(n))throw Error($(40));return n._reactRootContainer?(gr(function(){$c(null,null,n,!1,function(){n._reactRootContainer=null,n[Qn]=null})}),!0):!1};Wt.unstable_batchedUpdates=Im;Wt.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!zc(t))throw Error($(200));if(n==null||n._reactInternals===void 0)throw Error($(38));return $c(n,e,t,!1,i)};Wt.version="18.3.1-next-f1338f8080-20240426";function aS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aS)}catch(n){console.error(n)}}aS(),aw.exports=Wt;var lS=aw.exports,oy=lS;e0.createRoot=oy.createRoot,e0.hydrateRoot=oy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fa(){return fa=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},fa.apply(this,arguments)}var Ei;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ei||(Ei={}));const ay="popstate";function XP(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Yf("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Xu(r)}return JP(e,t,null,n)}function We(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YP(){return Math.random().toString(36).substr(2,8)}function ly(n,e){return{usr:n.state,key:n.key,idx:e}}function Yf(n,e,t,i){return t===void 0&&(t=null),fa({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Us(e):e,{state:t,key:e&&e.key||i||YP()})}function Xu(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Us(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function JP(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ei.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(fa({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Ei.Pop;let b=h(),v=b==null?null:b-c;c=b,l&&l({action:a,location:_.location,delta:v})}function p(b,v){a=Ei.Push;let w=Yf(_.location,b,v);t&&t(w,b),c=h()+1;let I=ly(w,c),A=_.createHref(w);try{o.pushState(I,"",A)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;r.location.assign(A)}s&&l&&l({action:a,location:_.location,delta:1})}function g(b,v){a=Ei.Replace;let w=Yf(_.location,b,v);t&&t(w,b),c=h();let I=ly(w,c),A=_.createHref(w);o.replaceState(I,"",A),s&&l&&l({action:a,location:_.location,delta:0})}function y(b){let v=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof b=="string"?b:Xu(b);return w=w.replace(/ $/,"%20"),We(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let _={get action(){return a},get location(){return n(r,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(ay,d),l=b,()=>{r.removeEventListener(ay,d),l=null}},createHref(b){return e(r,b)},createURL:y,encodeLocation(b){let v=y(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:g,go(b){return o.go(b)}};return _}var uy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(uy||(uy={}));function ZP(n,e,t){return t===void 0&&(t="/"),eA(n,e,t,!1)}function eA(n,e,t,i){let r=typeof e=="string"?Us(e):e,s=Om(r.pathname||"/",t);if(s==null)return null;let o=cS(n);tA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=dA(s);a=cA(o[l],c,i)}return a}function cS(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=xi([i,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cS(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:lA(c,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of hS(s.path))r(s,o,l)}),e}function hS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=hS(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function tA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:uA(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const nA=/^:[\w-]+$/,iA=3,rA=2,sA=1,oA=10,aA=-2,cy=n=>n==="*";function lA(n,e){let t=n.split("/"),i=t.length;return t.some(cy)&&(i+=aA),e&&(i+=rA),t.filter(r=>!cy(r)).reduce((r,s)=>r+(nA.test(s)?iA:s===""?sA:oA),i)}function uA(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function cA(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=hy({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&t&&!i[i.length-1].route.index&&(d=hy({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:xi([s,d.pathname]),pathnameBase:gA(xi([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=xi([s,d.pathnameBase]))}return o}function hy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=hA(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let _=a[d]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function hA(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),uS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function dA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Om(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function fA(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Us(n):n;return{pathname:t?t.startsWith("/")?t:pA(t,e):e,search:vA(i),hash:yA(r)}}function pA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function yd(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dS(n,e){let t=mA(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function fS(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Us(n):(r=fa({},n),We(!r.pathname||!r.pathname.includes("?"),yd("?","pathname","search",r)),We(!r.pathname||!r.pathname.includes("#"),yd("#","pathname","hash",r)),We(!r.search||!r.search.includes("#"),yd("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=fA(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const xi=n=>n.join("/").replace(/\/\/+/g,"/"),gA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,yA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _A(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const pS=["post","put","patch","delete"];new Set(pS);const wA=["get",...pS];new Set(wA);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pa.apply(this,arguments)}const Vm=O.createContext(null),EA=O.createContext(null),kr=O.createContext(null),Uc=O.createContext(null),Ki=O.createContext({outlet:null,matches:[],isDataRoute:!1}),mS=O.createContext(null);function SA(n,e){let{relative:t}=e===void 0?{}:e;La()||We(!1);let{basename:i,navigator:r}=O.useContext(kr),{hash:s,pathname:o,search:a}=yS(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:xi([i,o])),r.createHref({pathname:l,search:a,hash:s})}function La(){return O.useContext(Uc)!=null}function Fa(){return La()||We(!1),O.useContext(Uc).location}function gS(n){O.useContext(kr).static||O.useLayoutEffect(n)}function vS(){let{isDataRoute:n}=O.useContext(Ki);return n?DA():TA()}function TA(){La()||We(!1);let n=O.useContext(Vm),{basename:e,future:t,navigator:i}=O.useContext(kr),{matches:r}=O.useContext(Ki),{pathname:s}=Fa(),o=JSON.stringify(dS(r,t.v7_relativeSplatPath)),a=O.useRef(!1);return gS(()=>{a.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=fS(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:xi([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,n])}function l3(){let{matches:n}=O.useContext(Ki),e=n[n.length-1];return e?e.params:{}}function yS(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=O.useContext(kr),{matches:r}=O.useContext(Ki),{pathname:s}=Fa(),o=JSON.stringify(dS(r,i.v7_relativeSplatPath));return O.useMemo(()=>fS(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function bA(n,e){return IA(n,e)}function IA(n,e,t,i){La()||We(!1);let{navigator:r,static:s}=O.useContext(kr),{matches:o}=O.useContext(Ki),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=Fa(),d;if(e){var p;let v=typeof e=="string"?Us(e):e;c==="/"||(p=v.pathname)!=null&&p.startsWith(c)||We(!1),d=v}else d=h;let g=d.pathname||"/",y=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let _=!s&&t&&t.matches&&t.matches.length>0?t.matches:ZP(n,{pathname:y}),b=kA(_&&_.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:xi([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:xi([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,t,i);return e&&b?O.createElement(Uc.Provider,{value:{location:pa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ei.Pop}},b):b}function CA(){let n=VA(),e=_A(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:r},t):null,s)}const RA=O.createElement(CA,null);class PA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(Ki.Provider,{value:this.props.routeContext},O.createElement(mS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AA(n){let{routeContext:e,match:t,children:i}=n,r=O.useContext(Vm);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(Ki.Provider,{value:e},i)}function kA(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||We(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=t,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,_=null,b=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,_=d.route.errorElement||RA,l&&(c<0&&p===0?(NA("route-fallback",!1),y=!0,b=null):c===p&&(y=!0,b=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let I;return g?I=_:y?I=b:d.route.Component?I=O.createElement(d.route.Component,null):d.route.element?I=d.route.element:I=h,O.createElement(AA,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:I})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?O.createElement(PA,{location:t.location,revalidation:t.revalidation,component:_,error:g,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var _S=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(_S||{}),Yu=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Yu||{});function xA(n){let e=O.useContext(Vm);return e||We(!1),e}function MA(n){let e=O.useContext(EA);return e||We(!1),e}function OA(n){let e=O.useContext(Ki);return e||We(!1),e}function wS(n){let e=OA(),t=e.matches[e.matches.length-1];return t.route.id||We(!1),t.route.id}function VA(){var n;let e=O.useContext(mS),t=MA(Yu.UseRouteError),i=wS(Yu.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function DA(){let{router:n}=xA(_S.UseNavigateStable),e=wS(Yu.UseNavigateStable),t=O.useRef(!1);return gS(()=>{t.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,pa({fromRouteId:e},s)))},[n,e])}const dy={};function NA(n,e,t){!e&&!dy[n]&&(dy[n]=!0)}function LA(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function FA(n){We(!1)}function zA(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Ei.Pop,navigator:s,static:o=!1,future:a}=n;La()&&We(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:pa({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Us(i));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=i,_=O.useMemo(()=>{let b=Om(h,l);return b==null?null:{location:{pathname:b,search:d,hash:p,state:g,key:y},navigationType:r}},[l,h,d,p,g,y,r]);return _==null?null:O.createElement(kr.Provider,{value:c},O.createElement(Uc.Provider,{children:t,value:_}))}function u3(n){let{children:e,location:t}=n;return bA(Jf(e),t)}new Promise(()=>{});function Jf(n,e){e===void 0&&(e=[]);let t=[];return O.Children.forEach(n,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){t.push.apply(t,Jf(i.props.children,s));return}i.type!==FA&&We(!1),!i.props.index||!i.props.children||We(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Jf(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(){return Zf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zf.apply(this,arguments)}function $A(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function UA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BA(n,e){return n.button===0&&(!e||e==="_self")&&!UA(n)}function ep(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(r=>[t,r]):[[t,i]])},[]))}function jA(n,e){let t=ep(n);return e&&e.forEach((i,r)=>{t.has(r)||e.getAll(r).forEach(s=>{t.append(r,s)})}),t}const WA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HA="6";try{window.__reactRouterVersion=HA}catch{}const qA="startTransition",fy=rf[qA];function c3(n){let{basename:e,children:t,future:i,window:r}=n,s=O.useRef();s.current==null&&(s.current=XP({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=O.useCallback(d=>{c&&fy?fy(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>LA(i),[i]),O.createElement(zA,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const KA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h3=O.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=$A(e,WA),{basename:g}=O.useContext(kr),y,_=!1;if(typeof c=="string"&&GA.test(c)&&(y=c,KA))try{let I=new URL(window.location.href),A=c.startsWith("//")?new URL(I.protocol+c):new URL(c),V=Om(A.pathname,g);A.origin===I.origin&&V!=null?c=V+A.search+A.hash:_=!0}catch{}let b=SA(c,{relative:r}),v=QA(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function w(I){i&&i(I),I.defaultPrevented||v(I)}return O.createElement("a",Zf({},p,{href:y||b,onClick:_||s?i:w,ref:t,target:l}))});var py;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(py||(py={}));var my;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(my||(my={}));function QA(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=vS(),c=Fa(),h=yS(n,{relative:o});return O.useCallback(d=>{if(BA(d,t)){d.preventDefault();let p=i!==void 0?i:Xu(c)===Xu(h);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,t,n,s,o,a])}function d3(n){let e=O.useRef(ep(n)),t=O.useRef(!1),i=Fa(),r=O.useMemo(()=>jA(i.search,t.current?null:e.current),[i.search]),s=vS(),o=O.useCallback((a,l)=>{const c=ep(typeof a=="function"?a(r):a);t.current=!0,s("?"+c,l)},[s,r]);return[r,o]}function be(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function cr(n,e){return n.width===e.width&&n.height===e.height}var XA=function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){t._observers=t._observers.filter(function(r){return r!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function YA(n){return new XA(n)}var JA=function(){function n(e,t,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=be({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(s){return s},this._allowResizeObserver=(r=i==null?void 0:i.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return be({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=be(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;cr(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var i=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,i=be(this._transformBitmapSize(e,this._canvasElementClientSize)),r=cr(this.bitmapSize,i)?null:i;t===null&&r===null||t!==null&&r!==null&&cr(t,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(t,r))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}ek().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=gy(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=YA(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var i=gy(this._canvasElement);if(i!==null){var r=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:i.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?tk(s[0],r):be({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var i=t.find(function(o){return o.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var r=i.devicePixelContentBoxSize[0],s=be({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function ZA(n,e){if(e.type==="device-pixel-content-box")return new JA(n,e.transform,e.options);throw new Error("Unsupported binding target")}function gy(n){return n.ownerDocument.defaultView}function ek(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function tk(n,e){return be({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var nk=function(){function n(e,t,i){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function vr(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var r=n.canvasElement.getContext("2d",e);return r===null?null:new nk(r,t,i)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const ik={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},rk={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},sk={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},ok={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},ak={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},lk={color:"#26a69a",base:0},ES={color:"#2196f3"},SS={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var vy,yy;function yr(n,e){const t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function TS(n,e,t,i){n.beginPath();const r=n.lineWidth%2?.5:0;n.moveTo(t,e+r),n.lineTo(i,e+r),n.stroke()}function $i(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function Rt(n){if(n===void 0)throw new Error("Value is undefined");return n}function z(n){if(n===null)throw new Error("Value is null");return n}function os(n){return z(Rt(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(vy||(vy={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(yy||(yy={}));const _y={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Kt(n){return n<0?0:n>255?255:Math.round(n)||0}function bS(n){return n<=0||n>1?Math.min(Math.max(n,0),1):Math.round(1e4*n)/1e4}const uk=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,ck=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,hk=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,dk=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function ma(n){(n=n.toLowerCase())in _y&&(n=_y[n]);{const e=dk.exec(n)||hk.exec(n);if(e)return[Kt(parseInt(e[1],10)),Kt(parseInt(e[2],10)),Kt(parseInt(e[3],10)),bS(e.length<5?1:parseFloat(e[4]))]}{const e=ck.exec(n);if(e)return[Kt(parseInt(e[1],16)),Kt(parseInt(e[2],16)),Kt(parseInt(e[3],16)),1]}{const e=uk.exec(n);if(e)return[Kt(17*parseInt(e[1],16)),Kt(17*parseInt(e[2],16)),Kt(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${n}`)}function IS(n){return .199*n[0]+.687*n[1]+.114*n[2]}function Bc(n){const e=ma(n);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:IS(e)>160?"black":"white"}}let ze=class{constructor(){this.h=[]}l(e,t,i){const r={o:e,_:t,u:i===!0};this.h.push(r)}v(e){const t=this.h.findIndex(i=>e===i.o);t>-1&&this.h.splice(t,1)}p(e){this.h=this.h.filter(t=>t._!==e)}m(e,t,i){const r=[...this.h];this.h=this.h.filter(s=>!s.u),r.forEach(s=>s.o(e,t,i))}M(){return this.h.length>0}S(){this.h=[]}};function mn(n,...e){for(const t of e)for(const i in t)t[i]!==void 0&&Object.prototype.hasOwnProperty.call(t,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof t[i]!="object"||n[i]===void 0||Array.isArray(t[i])?n[i]=t[i]:mn(n[i],t[i]));return n}function bn(n){return typeof n=="number"&&isFinite(n)}function ga(n){return typeof n=="number"&&n%1==0}function za(n){return typeof n=="string"}function Ol(n){return typeof n=="boolean"}function $n(n){const e=n;if(!e||typeof e!="object")return e;let t,i,r;for(i in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(r=e[i],t[i]=r&&typeof r=="object"?$n(r):r);return t}function fk(n){return n!==null}function va(n){return n===null?void 0:n}const Dm="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Rs(n,e,t){return e===void 0&&(e=Dm),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}class pk{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,t=this.j(),i=this.H();return e.P===t&&e.D===i||(e.P=t,e.D=i,e.R=Rs(t,i),e.L=2.5/12*t,e.B=e.L,e.A=t/12*e.T,e.I=t/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}let Nm=class{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,t,i){this.Y.forEach(r=>{r.X(e,t,i)})}};class vn{X(e,t,i){e.useBitmapCoordinateSpace(r=>this.K(r,t,i))}}class mk extends vn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.G===null||this.G.tt===null)return;const r=this.G.tt,s=this.G,o=Math.max(1,Math.floor(t))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const h=s.it[c],d=Math.round(h.nt*t)+o,p=h.st*i,g=l*i+o;e.moveTo(d,p),e.arc(d,p,g,0,2*Math.PI)}e.fill()};s.et>0&&(e.fillStyle=s.rt,a(s.ht+s.et)),e.fillStyle=s.lt,a(s.ht)}}function gk(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const vk={from:0,to:1};class yk{constructor(e,t){this.ut=new Nm,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=t,this.ut.Z(this.ct)}bt(e){const t=this.F.wt();t.length!==this.ct.length&&(this.dt=t.map(gk),this.ct=this.dt.map(i=>{const r=new mk;return r.J(i),r}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,t=this.F.wt(),i=this.vt.xt(),r=this.F.St();t.forEach((s,o)=>{var a;const l=this.dt[o],c=s.kt(i);if(e||c===null||!s.yt())return void(l.tt=null);const h=z(s.Ct());l.lt=c.Tt,l.ht=c.ht,l.et=c.Pt,l.it[0]._t=c._t,l.it[0].st=s.Dt().Rt(c._t,h.Vt),l.rt=(a=c.Ot)!==null&&a!==void 0?a:this.F.Bt(l.it[0].st/s.Dt().At()),l.it[0].ot=i,l.it[0].nt=r.It(i),l.tt=vk})}}class _k extends vn{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.zt===null)return;const s=this.zt.Lt.yt,o=this.zt.Et.yt;if(!s&&!o)return;const a=Math.round(this.zt.nt*i),l=Math.round(this.zt.st*r);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*i),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,yr(e,this.zt.Lt.Nt),function(c,h,d,p){c.beginPath();const g=c.lineWidth%2?.5:0;c.moveTo(h+g,d),c.lineTo(h+g,p),c.stroke()}(e,a,0,t.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*r),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,yr(e,this.zt.Et.Nt),TS(e,l,0,t.width))}}class wk{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new _k(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),t=z(this.jt.Ht()),i=t.$t().W().crosshair,r=this.Ft;if(i.mode===2)return r.Et.yt=!1,void(r.Lt.yt=!1);r.Et.yt=e&&this.jt.Ut(t),r.Lt.yt=e&&this.jt.qt(),r.Et.et=i.horzLine.width,r.Et.Nt=i.horzLine.style,r.Et.V=i.horzLine.color,r.Lt.et=i.vertLine.width,r.Lt.Nt=i.vertLine.style,r.Lt.V=i.vertLine.color,r.nt=this.jt.Yt(),r.st=this.jt.Zt()}}function Ek(n,e,t,i,r,s){n.fillRect(e+s,t,i-2*s,s),n.fillRect(e+s,t+r-s,i-2*s,s),n.fillRect(e,t,s,r),n.fillRect(e+i-s,t,s,r)}function jc(n,e,t,i,r,s){n.save(),n.globalCompositeOperation="copy",n.fillStyle=s,n.fillRect(e,t,i,r),n.restore()}function wy(n,e,t,i,r,s){n.beginPath(),n.roundRect?n.roundRect(e,t,i,r,s):(n.lineTo(e+i-s[1],t),s[1]!==0&&n.arcTo(e+i,t,e+i,t+s[1],s[1]),n.lineTo(e+i,t+r-s[2]),s[2]!==0&&n.arcTo(e+i,t+r,e+i-s[2],t+r,s[2]),n.lineTo(e+s[3],t+r),s[3]!==0&&n.arcTo(e,t+r,e,t+r-s[3],s[3]),n.lineTo(e,t+s[0]),s[0]!==0&&n.arcTo(e,t,e+s[0],t,s[0]))}function Ey(n,e,t,i,r,s,o=0,a=[0,0,0,0],l=""){if(n.save(),!o||!l||l===s)return wy(n,e,t,i,r,a),n.fillStyle=s,n.fill(),void n.restore();const c=o/2;var h;wy(n,e+c,t+c,i-o,r-o,(h=-c,a.map(d=>d===0?d:d+h))),s!=="transparent"&&(n.fillStyle=s,n.fill()),l!=="transparent"&&(n.lineWidth=o,n.strokeStyle=l,n.closePath(),n.stroke()),n.restore()}function CS(n,e,t,i,r,s,o){n.save(),n.globalCompositeOperation="copy";const a=n.createLinearGradient(0,0,0,r);a.addColorStop(0,s),a.addColorStop(1,o),n.fillStyle=a,n.fillRect(e,t,i,r),n.restore()}class Sy{constructor(e,t){this.J(e,t)}J(e,t){this.zt=e,this.Xt=t}At(e,t){return this.zt.yt?e.P+e.L+e.B:0}X(e,t,i,r){if(!this.zt.yt||this.zt.Kt.length===0)return;const s=this.zt.V,o=this.Xt.t,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=t.R;const h=this.Gt(l,t,i,r),d=h.Jt;return h.Qt?Ey(c,d.ti,d.ii,d.ni,d.si,o,d.ei,[d.ht,0,0,d.ht],o):Ey(c,d.ri,d.ii,d.ni,d.si,o,d.ei,[0,d.ht,d.ht,0],o),this.zt.hi&&(c.fillStyle=s,c.fillRect(d.ri,d.li,d.ai-d.ri,d.oi)),this.zt._i&&(c.fillStyle=t.O,c.fillRect(h.Qt?d.ui-d.ei:0,d.ii,d.ei,d.ci-d.ii)),h});e.useMediaCoordinateSpace(({context:l})=>{const c=a.di;l.font=t.R,l.textAlign=a.Qt?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.zt.Kt,c.fi,(c.ii+c.ci)/2+c.pi)})}Gt(e,t,i,r){var s;const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:h}=e,d=this.zt.hi||!this.zt.mi?t.T:0,p=this.zt.bi?t.C:0,g=t.L+this.Xt.wi,y=t.B+this.Xt.gi,_=t.A,b=t.I,v=this.zt.Kt,w=t.P,I=i.Mi(o,v),A=Math.ceil(i.xi(o,v)),V=w+g+y,N=t.C+_+b+A+d,T=Math.max(1,Math.floor(h));let E=Math.round(V*h);E%2!=T%2&&(E+=1);const C=p>0?Math.max(1,Math.floor(p*c)):0,R=Math.round(N*c),k=Math.round(d*c),x=(s=this.Xt.Si)!==null&&s!==void 0?s:this.Xt.ki,P=Math.round(x*h)-Math.floor(.5*h),we=Math.floor(P+T/2-E/2),me=we+E,pe=r==="right",Pe=pe?l.width-p:p,U=pe?a.width-C:C;let q,G,ue;return pe?(q=U-R,G=U-k,ue=Pe-d-_-p):(q=U+R,G=U+k,ue=Pe+d+_),{Qt:pe,Jt:{ii:we,li:P,ci:me,ni:R,si:E,ht:2*c,ei:C,ti:q,ri:U,ai:G,oi:T,ui:a.width},di:{ii:we/h,ci:me/h,fi:ue,pi:I}}}}class Wc{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||Sy)(this.Ci,this.yi),this.Ri=new(e||Sy)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,t=!1){return Math.max(this.Pi.At(e,t),this.Ri.At(e,t))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class Sk extends Wc{constructor(e,t,i){super(),this.jt=e,this.Li=t,this.Ei=i}zi(e,t,i){if(e.yt=!1,this.jt.W().mode===2)return;const r=this.jt.W().horzLine;if(!r.labelVisible)return;const s=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||s===null)return;const o=Bc(r.labelBackgroundColor);i.t=o.t,e.V=o.i;const a=2/12*this.Li.P();i.wi=a,i.gi=a;const l=this.Ei(this.Li);i.ki=l.ki,e.Kt=this.Li.Fi(l._t,s),e.yt=!0}}const Tk=/[1-9]/g;class RS{constructor(){this.zt=null}J(e){this.zt=e}X(e,t){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const i=e.useMediaCoordinateSpace(({context:p})=>(p.font=t.R,Math.round(t.Wi.xi(p,z(this.zt).Kt,Tk))));if(i<=0)return;const r=t.ji,s=i+2*r,o=s/2,a=this.zt.Hi;let l=this.zt.ki,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);const h=c+s,d=Math.ceil(0+t.C+t.T+t.L+t.P+t.B);e.useBitmapCoordinateSpace(({context:p,horizontalPixelRatio:g,verticalPixelRatio:y})=>{const _=z(this.zt);p.fillStyle=_.t;const b=Math.round(c*g),v=Math.round(0*y),w=Math.round(h*g),I=Math.round(d*y),A=Math.round(2*g);if(p.beginPath(),p.moveTo(b,v),p.lineTo(b,I-A),p.arcTo(b,I,b+A,I,A),p.lineTo(w-A,I),p.arcTo(w,I,w,I-A,A),p.lineTo(w,v),p.fill(),_.hi){const V=Math.round(_.ki*g),N=v,T=Math.round((N+t.T)*y);p.fillStyle=_.V;const E=Math.max(1,Math.floor(g)),C=Math.floor(.5*g);p.fillRect(V-C,N,E,T-N)}}),e.useMediaCoordinateSpace(({context:p})=>{const g=z(this.zt),y=0+t.C+t.T+t.L+t.P/2;p.font=t.R,p.textAlign="left",p.textBaseline="middle",p.fillStyle=g.V;const _=t.Wi.Mi(p,"Apr0");p.translate(c+r,y+_),p.fillText(g.Kt,0,0)})}}class bk{constructor(e,t,i){this.ft=!0,this.Wt=new RS,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=t,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const t=this.vt.W().vertLine;if(!t.labelVisible)return;const i=this.$i.St();if(i.Ni())return;e.Hi=i.Hi();const r=this.Ei();if(r===null)return;e.ki=r.ki;const s=i.Ui(this.vt.xt());e.Kt=i.qi(z(s)),e.yt=!0;const o=Bc(t.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=i.W().ticksVisible}}class Lm{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Ty;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden"})(Ty||(Ty={}));class Ik extends Lm{constructor(e,t){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=t,this.dn=new yk(e,this),this.fn=((r,s)=>o=>{const a=s(),l=r();if(o===z(this.tn).vn())return{_t:l,ki:a};{const c=z(o.Ct());return{_t:o.pn(a,c),ki:a}}})(()=>this.nn,()=>this.an);const i=((r,s)=>()=>{const o=this.$i.St().mn(r()),a=s();return o&&Number.isFinite(a)?{ot:o,ki:a}:null})(()=>this.sn,()=>this.Yt());this.bn=new bk(this,e,i),this.wn=new wk(this)}W(){return this.cn}gn(e,t){this._n=e,this.un=t}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,t,i){this.hn||(this.hn=!0),this.en=!0,this.yn(e,t,i)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,t){this.en&&this.tn===e||this.rn.clear();const i=[];return this.tn===e&&i.push(this.Dn(this.rn,t,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,t,i){this.Bn(e,t,i)&&this.Vn()}Bn(e,t,i){const r=this.ln,s=this.an,o=this.nn,a=this.sn,l=this.tn,c=this.On(i);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=i;const h=c!==null?c.Ct():null;return c!==null&&h!==null?(this.nn=t,this.an=c.Rt(t,h)):(this.nn=NaN,this.an=NaN),r!==this.ln||s!==this.an||a!==this.sn||o!==this.nn||l!==this.tn}Tn(){const e=this.$i.wt().map(i=>i.In().An()).filter(fk),t=e.length===0?null:Math.max(...e);this.sn=t!==null?t:NaN}Dn(e,t,i){let r=e.get(t);return r===void 0&&(r=new Sk(this,t,i),e.set(t,r)),r}}function Hc(n){return n==="left"||n==="right"}class it{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,t){const i=function(r,s){return r===void 0?s:{Fn:Math.max(r.Fn,s.Fn),Wn:r.Wn||s.Wn}}(this.zn.get(e),t);this.zn.set(e,i)}jn(){return this.En}Hn(e){const t=this.zn.get(e);return t===void 0?{Fn:this.En}:{Fn:Math.max(this.En,t.Fn),Wn:t.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const t of e.Ln)this.ns(t);this.En=Math.max(this.En,e.En),e.zn.forEach((t,i)=>{this.Nn(i,t)})}static ss(){return new it(2)}static es(){return new it(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(t=>t.qn===5);e!==-1&&this.Ln.splice(e,1)}}const by=".";function Un(n,e){if(!bn(n))return"n/a";if(!ga(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}class qc{constructor(e,t){if(t||(t=1),bn(e)&&ga(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=t,this.hs()}format(e){const t=e<0?"−":"";return e=Math.abs(e),t+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const t=this.Li/this.rs;let i=Math.floor(e),r="";const s=this._s!==void 0?this._s:NaN;if(t>1){let o=+(Math.round(e*t)-i*t).toFixed(this._s);o>=t&&(o-=t,i+=1),r=by+Un(+o.toFixed(this._s)*this.rs,s)}else i=Math.round(i*t)/t,s>0&&(r=by+Un(0,s));return i.toFixed(0)+r}}class PS extends qc{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class Ck{constructor(e){this.us=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.cs(e):e<999995?t+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.cs(e/1e9)+"B")}cs(e){let t;const i=Math.pow(10,this.us);return t=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(r,s)=>s)}}function AS(n,e,t,i,r,s,o){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=n,h=e[i.from];let d=s(n,h),p=h;if(i.to-i.from<2){const g=r/2;a.beginPath();const y={nt:h.nt-g,st:h.st},_={nt:h.nt+g,st:h.st};a.moveTo(y.nt*l,y.st*c),a.lineTo(_.nt*l,_.st*c),o(n,d,y,_)}else{const g=(_,b)=>{o(n,d,p,b),a.beginPath(),d=_,p=b};let y=p;a.beginPath(),a.moveTo(h.nt*l,h.st*c);for(let _=i.from+1;_<i.to;++_){y=e[_];const b=s(n,y);switch(t){case 0:a.lineTo(y.nt*l,y.st*c);break;case 1:a.lineTo(y.nt*l,e[_-1].st*c),b!==d&&(g(b,y),a.lineTo(y.nt*l,e[_-1].st*c)),a.lineTo(y.nt*l,y.st*c);break;case 2:{const[v,w]=Rk(e,_-1,_);a.bezierCurveTo(v.nt*l,v.st*c,w.nt*l,w.st*c,y.nt*l,y.st*c);break}}t!==1&&b!==d&&(g(b,y),a.moveTo(y.nt*l,y.st*c))}(p!==y||p===y&&t===1)&&o(n,d,p,y)}}const Iy=6;function _d(n,e){return{nt:n.nt-e.nt,st:n.st-e.st}}function Cy(n,e){return{nt:n.nt/e,st:n.st/e}}function Rk(n,e,t){const i=Math.max(0,e-1),r=Math.min(n.length-1,t+1);var s,o;return[(s=n[e],o=Cy(_d(n[t],n[i]),Iy),{nt:s.nt+o.nt,st:s.st+o.st}),_d(n[t],Cy(_d(n[r],n[e]),Iy))]}function Pk(n,e,t,i,r){const{context:s,horizontalPixelRatio:o,verticalPixelRatio:a}=e;s.lineTo(r.nt*o,n*a),s.lineTo(i.nt*o,n*a),s.closePath(),s.fillStyle=t,s.fill()}class kS extends vn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var t;if(this.G===null)return;const{it:i,tt:r,ds:s,et:o,Nt:a,fs:l}=this.G,c=(t=this.G.vs)!==null&&t!==void 0?t:this.G.ps?0:e.mediaSize.height;if(r===null)return;const h=e.context;h.lineCap="butt",h.lineJoin="round",h.lineWidth=o,yr(h,a),h.lineWidth=1,AS(e,i,l,r,s,this.bs.bind(this),Pk.bind(null,c))}}function tp(n,e,t){return Math.min(Math.max(n,e),t)}function Vl(n,e,t){return e-n<=t}function xS(n){const e=Math.ceil(n);return e%2==0?e-1:e}class Fm{ws(e,t){const i=this.gs,{Ms:r,xs:s,Ss:o,ks:a,ys:l,vs:c}=t;if(this.Cs===void 0||i===void 0||i.Ms!==r||i.xs!==s||i.Ss!==o||i.ks!==a||i.vs!==c||i.ys!==l){const h=e.context.createLinearGradient(0,0,0,l);if(h.addColorStop(0,r),c!=null){const d=tp(c*e.verticalPixelRatio/l,0,1);h.addColorStop(d,s),h.addColorStop(d,o)}h.addColorStop(1,a),this.Cs=h,this.gs=t}return this.Cs}}class Ak extends kS{constructor(){super(...arguments),this.Ts=new Fm}bs(e,t){return this.Ts.ws(e,{Ms:t.Ps,xs:"",Ss:"",ks:t.Rs,ys:e.bitmapSize.height})}}function kk(n,e){const t=n.context;t.strokeStyle=e,t.stroke()}class MS extends vn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:t,tt:i,ds:r,fs:s,et:o,Nt:a,Ds:l}=this.G;if(i===null)return;const c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,yr(c,a),c.lineJoin="round";const h=this.Vs.bind(this);s!==void 0&&AS(e,t,s,i,r,h,kk),l&&function(d,p,g,y,_){const{horizontalPixelRatio:b,verticalPixelRatio:v,context:w}=d;let I=null;const A=Math.max(1,Math.floor(b))%2/2,V=g*v+A;for(let N=y.to-1;N>=y.from;--N){const T=p[N];if(T){const E=_(d,T);E!==I&&(w.beginPath(),I!==null&&w.fill(),w.fillStyle=E,I=E);const C=Math.round(T.nt*b)+A,R=T.st*v;w.moveTo(C,R),w.arc(C,R,V,0,2*Math.PI)}}w.fill()}(e,t,l,i,h)}}class OS extends MS{Vs(e,t){return t.lt}}function VS(n,e,t,i,r=0,s=e.length){let o=s-r;for(;0<o;){const a=o>>1,l=r+a;i(e[l],t)===n?(r=l+1,o-=a+1):o=a}return r}const $a=VS.bind(null,!0),DS=VS.bind(null,!1);function xk(n,e){return n.ot<e}function Mk(n,e){return e<n.ot}function NS(n,e,t){const i=e.Os(),r=e.ui(),s=$a(n,i,xk),o=DS(n,r,Mk);if(!t)return{from:s,to:o};let a=s,l=o;return s>0&&s<n.length&&n[s].ot>=i&&(a=s-1),o>0&&o<n.length&&n[o-1].ot<=r&&(l=o+1),{from:a,to:l}}class zm{constructor(e,t,i){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=t,this.Fs=i}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),t=this.Ns.St();if(this.qs(),t.Ni()||e.Ni())return;const i=t.Xs();if(i===null||this.Es.In().Ks()===0)return;const r=this.Es.Ct();r!==null&&(this.Ls=NS(this.zs,i,this.Fs),this.Gs(e,t,r.Vt),this.Js())}}class Kc extends zm{constructor(e,t){super(e,t,!0)}Gs(e,t,i){t.Qs(this.zs,va(this.Ls)),e.te(this.zs,i,va(this.Ls))}ie(e,t){return{ot:e,_t:t,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>{const i=t.Vt[3];return this.se(t.ee,i,e)})}}class Ok extends Kc{constructor(e,t){super(e,t),this.js=new Nm,this.re=new Ak,this.he=new OS,this.js.Z([this.re,this.he])}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class Vk extends vn{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(t),this.ae>=2&&Math.max(1,Math.floor(t))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(t)):this.ae;let r=null;const s=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*t);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const a=this.zt.In[o];r!==a.ce&&(e.fillStyle=a.ce,r=a.ce);const l=Math.floor(.5*this.oe),c=Math.round(a.nt*t),h=c-l,d=this.oe,p=h+d-1,g=Math.min(a.de,a.fe),y=Math.max(a.de,a.fe),_=Math.round(g*i)-l,b=Math.round(y*i)+l,v=Math.max(b-_,this.oe);e.fillRect(h,_,d,v);const w=Math.ceil(1.5*this.ae);if(s){if(this.zt.ve){const N=c-w;let T=Math.max(_,Math.round(a.pe*i)-l),E=T+d-1;E>_+v-1&&(E=_+v-1,T=E-d+1),e.fillRect(N,T,h-N,E-T+1)}const I=c+w;let A=Math.max(_,Math.round(a.me*i)-l),V=A+d-1;V>_+v-1&&(V=_+v-1,A=V-d+1),e.fillRect(p+1,A,I-p,V-A+1)}}}_e(e){const t=Math.floor(e);return Math.max(t,Math.floor(function(i,r){return Math.floor(.3*i*r)}(z(this.zt).le,e)))}}class LS extends zm{constructor(e,t){super(e,t,!1)}Gs(e,t,i){t.Qs(this.zs,va(this.Ls)),e.be(this.zs,i,va(this.Ls))}we(e,t,i){return{ot:e,ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>this.se(t.ee,t,e))}}class Dk extends LS{constructor(){super(...arguments),this.js=new Vk}se(e,t,i){return Object.assign(Object.assign({},this.we(e,t,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class Nk extends kS{constructor(){super(...arguments),this.Ts=new Fm}bs(e,t){const i=this.G;return this.Ts.ws(e,{Ms:t.ke,xs:t.ye,Ss:t.Ce,ks:t.Te,ys:e.bitmapSize.height,vs:i.vs})}}class Lk extends MS{constructor(){super(...arguments),this.Pe=new Fm}Vs(e,t){const i=this.G;return this.Pe.ws(e,{Ms:t.Re,xs:t.Re,Ss:t.De,ks:t.De,ys:e.bitmapSize.height,vs:i.vs})}}class Fk extends Kc{constructor(e,t){super(e,t),this.js=new Nm,this.Ve=new Nk,this.Oe=new Lk,this.js.Z([this.Ve,this.Oe])}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const t=this.Es.W(),i=this.Es.Dt().Rt(t.baseValue.price,e.Vt),r=this.Ns.St().le();this.Ve.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineType,vs:i,ps:!1,tt:this.Ls,ds:r}),this.Oe.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineVisible?t.lineType:void 0,Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,vs:i,tt:this.Ls,ds:r})}}class zk extends vn{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:t}=e;this.ae=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),l=Math.floor(s*a*o),c=Math.floor(s*o),h=Math.min(l,c);return Math.max(Math.floor(o),h)}(this.zt.le,t),this.ae>=2&&Math.floor(t)%2!=this.ae%2&&this.ae--;const i=this.zt.In;this.zt.Be&&this.Ae(e,i,this.zt.tt),this.zt._i&&this.Ie(e,i,this.zt.tt);const r=this.ze(t);(!this.zt._i||this.ae>2*r)&&this.Le(e,i,this.zt.tt)}Ae(e,t,i){if(this.zt===null)return;const{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="",l=Math.min(Math.floor(s),Math.floor(this.zt.le*s));l=Math.max(Math.floor(s),Math.min(l,this.ae));const c=Math.floor(.5*l);let h=null;for(let d=i.from;d<i.to;d++){const p=t[d];p.Ee!==a&&(r.fillStyle=p.Ee,a=p.Ee);const g=Math.round(Math.min(p.pe,p.me)*o),y=Math.round(Math.max(p.pe,p.me)*o),_=Math.round(p.de*o),b=Math.round(p.fe*o);let v=Math.round(s*p.nt)-c;const w=v+l-1;h!==null&&(v=Math.max(h+1,v),v=Math.min(v,w));const I=w-v+1;r.fillRect(v,_,I,g-_),r.fillRect(v,y+1,I,b-y),h=w}}ze(e){let t=Math.floor(1*e);this.ae<=2*t&&(t=Math.floor(.5*(this.ae-1)));const i=Math.max(Math.floor(e),t);return this.ae<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}Ie(e,t,i){if(this.zt===null)return;const{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="";const l=this.ze(s);let c=null;for(let h=i.from;h<i.to;h++){const d=t[h];d.Ne!==a&&(r.fillStyle=d.Ne,a=d.Ne);let p=Math.round(d.nt*s)-Math.floor(.5*this.ae);const g=p+this.ae-1,y=Math.round(Math.min(d.pe,d.me)*o),_=Math.round(Math.max(d.pe,d.me)*o);if(c!==null&&(p=Math.max(c+1,p),p=Math.min(p,g)),this.zt.le*s>2*l)Ek(r,p,y,g-p+1,_-y+1,l);else{const b=g-p+1;r.fillRect(p,y,b,_-y+1)}c=g}}Le(e,t,i){if(this.zt===null)return;const{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="";const l=this.ze(s);for(let c=i.from;c<i.to;c++){const h=t[c];let d=Math.round(Math.min(h.pe,h.me)*o),p=Math.round(Math.max(h.pe,h.me)*o),g=Math.round(h.nt*s)-Math.floor(.5*this.ae),y=g+this.ae-1;if(h.ce!==a){const _=h.ce;r.fillStyle=_,a=_}this.zt._i&&(g+=l,d+=l,y-=l,p-=l),d>p||r.fillRect(g,d,y-g+1,p-d+1)}}}class $k extends LS{constructor(){super(...arguments),this.js=new zk}se(e,t,i){return Object.assign(Object.assign({},this.we(e,t,i)),i.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class Uk{constructor(e,t){this.Fe=e,this.Li=t}X(e,t,i){this.Fe.draw(e,this.Li,t,i)}}class wd extends zm{constructor(e,t,i){super(e,t,!1),this.wn=i,this.js=new Uk(this.wn.renderer(),r=>{const s=e.Ct();return s===null?null:e.Dt().Rt(r,s.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>Object.assign(Object.assign({ot:t.ee,nt:NaN},e.$s(t.ee)),{He:t.$e}))}Gs(e,t){t.Qs(this.zs,va(this.Ls))}Js(){this.wn.update({bars:this.zs.map(Bk),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function Bk(n){return{x:n.nt,time:n.ot,originalData:n.He,barColor:n.ce}}class jk extends vn{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(t);const r=Math.max(1,Math.floor(i)),s=Math.round(this.zt.Ye*i)-Math.floor(r/2),o=s+r;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a],c=this.Ue[a-this.zt.tt.from],h=Math.round(l.st*i);let d,p;e.fillStyle=l.ce,h<=s?(d=h,p=o):(d=s,p=h-Math.floor(r/2)+r),e.fillRect(c.Os,d,c.ui-c.Os+1,p-d)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const t=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.zt.le*e)-t;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.zt.it[s],a=Math.round(o.nt*e);let l,c;if(i%2){const h=(i-1)/2;l=a-h,c=a+h}else{const h=i/2;l=a-h,c=a+h-1}this.Ue[s-this.zt.tt.from]={Os:l,ui:c,Ze:a,Xe:o.nt*e,ot:o.ot}}for(let s=this.zt.tt.from+1;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from],a=this.Ue[s-this.zt.tt.from-1];o.ot===a.ot+1&&o.Os-a.ui!==t+1&&(a.Ze>a.Xe?a.ui=o.Os-t-1:o.Os=a.ui+t+1)}let r=Math.ceil(this.zt.le*e);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const a=o.ui-o.Os+1;r=Math.min(a,r)}if(t>0&&r<4)for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui-o.Os+1>r&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class Wk extends Kc{constructor(){super(...arguments),this.js=new jk}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,z(this.Es.Ct()).Vt)};this.js.J(e)}}class Hk extends Kc{constructor(){super(...arguments),this.js=new OS}se(e,t,i){return Object.assign(Object.assign({},this.ie(e,t)),i.$s(e))}Js(){const e=this.Es.W(),t={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(t)}}const qk=/[2-9]/g;class ya{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,t,i){return this.sr(e,t,i).width}Mi(e,t,i){const r=this.sr(e,t,i);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}sr(e,t,i){const r=i||qk,s=String(t).replace(r,"0");if(this.tr.has(s))return Rt(this.tr.get(s)).er;if(this.Ke===this.ir){const a=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(a),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&t.length||(this.tr.set(s,{er:o,rr:this.Ge}),this.Qe[this.Ge]=s,this.Ke++,this.Ge++),o}}class Kk{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,t,i){this.hr=e,this.k=t,this.lr=i}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class FS{constructor(e,t,i){this.ur=e,this.ar=new ya(50),this.cr=t,this.F=i,this.j=-1,this.Wt=new Kk(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const t=e.vr(this.cr)?e.pr():this.cr.Dt();if(t===null)return null;const i=e.mr(t);if(i==="overlay")return null;const r=this.F.br();return r.P!==this.j&&(this.j=r.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),r,i),this.Wt}}class Gk extends vn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,t){var i;if(!(!((i=this.zt)===null||i===void 0)&&i.yt))return null;const{st:r,et:s,gr:o}=this.zt;return t>=r-s-7&&t<=r+s+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.zt===null||this.zt.yt===!1)return;const s=Math.round(this.zt.st*r);s<0||s>t.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*i),yr(e,this.zt.Nt),TS(e,s,0,t.width))}}class $m{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new Gk,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class Qk extends $m{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),t=e.Cr().Cr;if(t!==2&&t!==3)return;const i=this.Es.W();if(!i.baseLineVisible||!this.Es.yt())return;const r=this.Es.Ct();r!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(r.Vt,r.Vt),this.Sr.V=i.baseLineColor,this.Sr.et=i.baseLineWidth,this.Sr.Nt=i.baseLineStyle)}}class Xk extends vn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){const r=this.zt;if(r===null)return;const s=Math.max(1,Math.floor(t)),o=s%2/2,a=Math.round(r.Xe.x*t)+o,l=r.Xe.y*i;e.fillStyle=r.Tr,e.beginPath();const c=Math.max(2,1.5*r.Pr)*t;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.Rr,e.beginPath(),e.arc(a,l,r.ht*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=r.Dr,e.beginPath(),e.arc(a,l,r.ht*t+s/2,0,2*Math.PI,!1),e.stroke()}}const Yk=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Ry(n,e,t,i){return function(r,s){if(r==="transparent")return r;const o=ma(r),a=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${s*a})`}(n,t+(i-t)*e)}function Py(n,e){const t=n%2600/2600;let i;for(const l of Yk)if(t>=l.Vr&&t<=l.Or){i=l;break}$i(i!==void 0,"Last price animation internal logic error");const r=(t-i.Vr)/(i.Or-i.Vr);return{Rr:Ry(e,r,i.Ir,i.zr),Dr:Ry(e,r,i.Lr,i.Er),ht:(s=r,o=i.Br,a=i.Ar,o+(a-o)*s)};var s,o,a}class Jk{constructor(e){this.Wt=new Xk,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),t=this.Wr-e;if(t>0)return void(t<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),t=e.Xs(),i=this.jr.Ct();if(t===null||i===null)return;const r=this.jr.Zr(!0);if(r.Xr||!t.Kr(r.ee))return;const s={x:e.It(r.ee),y:this.jr.Dt().Rt(r._t,i.Vt)},o=r.V,a=this.jr.W().lineWidth,l=Py(this.Gr(),o);this.Wt.J({Tr:o,Pr:a,Rr:l.Rr,Dr:l.Dr,ht:l.ht,Xe:s})}Yr(){const e=this.Wt.$e();if(e!==null){const t=Py(this.Gr(),e.Tr);e.Rr=t.Rr,e.Dr=t.Dr,e.ht=t.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Uo(n,e){return xS(Math.min(Math.max(n,12),30)*e)}function _a(n,e){switch(n){case"arrowDown":case"arrowUp":return Uo(e,1);case"circle":return Uo(e,.8);case"square":return Uo(e,.7)}}function zS(n){return function(e){const t=Math.ceil(e);return t%2!=0?t-1:t}(Uo(n,1))}function Ay(n){return Math.max(Uo(n,.1),3)}function ky(n,e,t){return e?n:t?Math.ceil(n/2):0}function $S(n,e,t,i,r){const s=_a("square",t),o=(s-1)/2,a=n-o,l=e-o;return i>=a&&i<=a+s&&r>=l&&r<=l+s}function xy(n,e,t,i){const r=(_a("arrowUp",i)-1)/2*t.Jr,s=(xS(i/2)-1)/2*t.Jr;e.beginPath(),n?(e.moveTo(t.nt-r,t.st),e.lineTo(t.nt,t.st-r),e.lineTo(t.nt+r,t.st),e.lineTo(t.nt+s,t.st),e.lineTo(t.nt+s,t.st+r),e.lineTo(t.nt-s,t.st+r),e.lineTo(t.nt-s,t.st)):(e.moveTo(t.nt-r,t.st),e.lineTo(t.nt,t.st+r),e.lineTo(t.nt+r,t.st),e.lineTo(t.nt+s,t.st),e.lineTo(t.nt+s,t.st-r),e.lineTo(t.nt-s,t.st-r),e.lineTo(t.nt-s,t.st)),e.fill()}function Zk(n,e,t,i,r,s){return $S(e,t,i,r,s)}class ex extends vn{constructor(){super(...arguments),this.zt=null,this.ar=new ya,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,t){this.j===e&&this.H===t||(this.j=e,this.H=t,this.Qr=Rs(e,t),this.ar.nr())}wr(e,t){if(this.zt===null||this.zt.tt===null)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const r=this.zt.it[i];if(nx(r,e,t))return{Mr:r.th,gr:r.gr}}return null}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:i},r,s){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o];a.Kt!==void 0&&(a.Kt.Hi=this.ar.xi(e,a.Kt.ih),a.Kt.At=this.j,a.Kt.nt=a.nt-a.Kt.Hi/2),tx(a,e,t,i)}}}}function tx(n,e,t,i){e.fillStyle=n.V,n.Kt!==void 0&&function(r,s,o,a,l,c){r.save(),r.scale(l,c),r.fillText(s,o,a),r.restore()}(e,n.Kt.ih,n.Kt.nt,n.Kt.st,t,i),function(r,s,o){if(r.Ks!==0){switch(r.nh){case"arrowDown":return void xy(!1,s,o,r.Ks);case"arrowUp":return void xy(!0,s,o,r.Ks);case"circle":return void function(a,l,c){const h=(_a("circle",c)-1)/2;a.beginPath(),a.arc(l.nt,l.st,h*l.Jr,0,2*Math.PI,!1),a.fill()}(s,o,r.Ks);case"square":return void function(a,l,c){const h=_a("square",c),d=(h-1)*l.Jr/2,p=l.nt-d,g=l.st-d;a.fillRect(p,g,h*l.Jr,h*l.Jr)}(s,o,r.Ks)}r.nh}}(n,e,function(r,s,o){const a=Math.max(1,Math.floor(s))%2/2;return{nt:Math.round(r.nt*s)+a,st:r.st*o,Jr:s}}(n,t,i))}function nx(n,e,t){return!(n.Kt===void 0||!function(i,r,s,o,a,l){const c=o/2;return a>=i&&a<=i+s&&l>=r-c&&l<=r+c}(n.Kt.nt,n.Kt.st,n.Kt.Hi,n.Kt.At,e,t))||function(i,r,s){if(i.Ks===0)return!1;switch(i.nh){case"arrowDown":case"arrowUp":return Zk(0,i.nt,i.st,i.Ks,r,s);case"circle":return function(o,a,l,c,h){const d=2+_a("circle",l)/2,p=o-c,g=a-h;return Math.sqrt(p*p+g*g)<=d}(i.nt,i.st,i.Ks,r,s);case"square":return $S(i.nt,i.st,i.Ks,r,s)}}(n,e,t)}function ix(n,e,t,i,r,s,o,a,l){const c=bn(t)?t:t.Se,h=bn(t)?t:t.Me,d=bn(t)?t:t.xe,p=bn(e.size)?Math.max(e.size,0):1,g=zS(a.le())*p,y=g/2;switch(n.Ks=g,e.position){case"inBar":return n.st=o.Rt(c,l),void(n.Kt!==void 0&&(n.Kt.st=n.st+y+s+.6*r));case"aboveBar":return n.st=o.Rt(h,l)-y-i.sh,n.Kt!==void 0&&(n.Kt.st=n.st-y-.6*r,i.sh+=1.2*r),void(i.sh+=g+s);case"belowBar":return n.st=o.Rt(d,l)+y+i.eh,n.Kt!==void 0&&(n.Kt.st=n.st+y+s+.6*r,i.eh+=1.2*r),void(i.eh+=g+s)}e.position}class rx{constructor(e,t){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new ex,this.jr=e,this.$i=t,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const t=this.$i.W().layout;return this.Wt._r(t.fontSize,t.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),t=Ay(e),i=1.5*zS(e)+2*t,r=this.fh();this.ah={above:ky(i,r.aboveBar,r.inBar),below:ky(i,r.belowBar,r.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,t)=>(e[t.position]||(e[t.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),t=this.$i.St(),i=this.jr.dh();this.rh&&(this.zt.it=i.map(h=>({ot:h.time,nt:0,st:0,Ks:0,nh:h.shape,V:h.color,th:h.th,gr:h.id,Kt:void 0})),this.rh=!1);const r=this.$i.W().layout;this.zt.tt=null;const s=t.Xs();if(s===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let a=NaN;const l=Ay(t.le()),c={sh:l,eh:l};this.zt.tt=NS(this.zt.it,s,!0);for(let h=this.zt.tt.from;h<this.zt.tt.to;h++){const d=i[h];d.time!==a&&(c.sh=l,c.eh=l,a=d.time);const p=this.zt.it[h];p.nt=t.It(d.time),d.text!==void 0&&d.text.length>0&&(p.Kt={ih:d.text,nt:0,st:0,Hi:0,At:0});const g=this.jr.ph(d.time);g!==null&&ix(p,d,g,c,r.fontSize,l,e,t,o.Vt)}this.ft=!1}}class sx extends $m{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const t=this.Es.W();if(!t.priceLineVisible||!this.Es.yt())return;const i=this.Es.Zr(t.priceLineSource===0);i.Xr||(e.yt=!0,e.st=i.ki,e.V=this.Es.mh(i.V),e.et=t.priceLineWidth,e.Nt=t.priceLineStyle)}}class ox extends Wc{constructor(e){super(),this.jt=e}zi(e,t,i){e.yt=!1,t.yt=!1;const r=this.jt;if(!r.yt())return;const s=r.W(),o=s.lastValueVisible,a=r.bh()!=="",l=s.seriesLastValueMode===0,c=r.Zr(!1);if(c.Xr)return;o&&(e.Kt=this.wh(c,o,l),e.yt=e.Kt.length!==0),(a||l)&&(t.Kt=this.gh(c,o,a,l),t.yt=t.Kt.length>0);const h=r.mh(c.V),d=Bc(h);i.t=d.t,i.ki=c.ki,t.Ot=r.$t().Bt(c.ki/r.Dt().At()),e.Ot=h,e.V=d.i,t.V=d.i}gh(e,t,i,r){let s="";const o=this.jt.bh();return i&&o.length!==0&&(s+=`${o} `),t&&r&&(s+=this.jt.Dt().Mh()?e.xh:e.Sh),s.trim()}wh(e,t,i){return t?i?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function My(n,e,t,i){const r=Number.isFinite(e),s=Number.isFinite(t);return r&&s?n(e,t):r||s?r?e:t:i}class Dt{constructor(e,t){this.kh=e,this.yh=t}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Dt(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Dt(My(Math.min,this.Ph(),e.Ph(),-1/0),My(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!bn(e)||this.yh-this.kh===0)return;const t=.5*(this.yh+this.kh);let i=this.yh-t,r=this.kh-t;i*=e,r*=e,this.yh=t+i,this.kh=t+r}Oh(e){bn(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Dt(e.minValue,e.maxValue)}}class Ju{constructor(e,t){this.Ih=e,this.zh=t||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Ju(Dt.Ah(e.priceRange),e.margins)}}class ax extends $m{constructor(e,t){super(e),this.Nh=t}yr(){const e=this.Sr;e.yt=!1;const t=this.Nh.W();if(!this.Es.yt()||!t.lineVisible)return;const i=this.Nh.Fh();i!==null&&(e.yt=!0,e.st=i,e.V=t.color,e.et=t.lineWidth,e.Nt=t.lineStyle,e.gr=this.Nh.W().id)}}class lx extends Wc{constructor(e,t){super(),this.jr=e,this.Nh=t}zi(e,t,i){e.yt=!1,t.yt=!1;const r=this.Nh.W(),s=r.axisLabelVisible,o=r.title!=="",a=this.jr;if(!s||!a.yt())return;const l=this.Nh.Fh();if(l===null)return;o&&(t.Kt=r.title,t.yt=!0),t.Ot=a.$t().Bt(l/a.Dt().At()),e.Kt=this.Wh(r.price),e.yt=!0;const c=Bc(r.axisLabelColor||r.color);i.t=c.t;const h=r.axisLabelTextColor||c.i;e.V=h,t.V=h,i.ki=l}Wh(e){const t=this.jr.Ct();return t===null?"":this.jr.Dt().Fi(e,t.Vt)}}class ux{constructor(e,t){this.jr=e,this.cn=t,this.jh=new ax(e,this),this.ur=new lx(e,this),this.Hh=new FS(this.ur,e,e.$t())}$h(e){mn(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,t=e.Dt();if(e.$t().St().Ni()||t.Ni())return null;const i=e.Ct();return i===null?null:t.Rt(this.cn.price,i.Vt)}}class cx extends Lm{constructor(e){super(),this.$i=e}$t(){return this.$i}}const hx={Bar:(n,e,t,i)=>{var r;const s=e.upColor,o=e.downColor,a=z(n(t,i)),l=os(a.Vt[0])<=os(a.Vt[3]);return{ce:(r=a.V)!==null&&r!==void 0?r:l?s:o}},Candlestick:(n,e,t,i)=>{var r,s,o;const a=e.upColor,l=e.downColor,c=e.borderUpColor,h=e.borderDownColor,d=e.wickUpColor,p=e.wickDownColor,g=z(n(t,i)),y=os(g.Vt[0])<=os(g.Vt[3]);return{ce:(r=g.V)!==null&&r!==void 0?r:y?a:l,Ne:(s=g.Ot)!==null&&s!==void 0?s:y?c:h,Ee:(o=g.Xh)!==null&&o!==void 0?o:y?d:p}},Custom:(n,e,t,i)=>{var r;return{ce:(r=z(n(t,i)).V)!==null&&r!==void 0?r:e.color}},Area:(n,e,t,i)=>{var r,s,o,a;const l=z(n(t,i));return{ce:(r=l.lt)!==null&&r!==void 0?r:e.lineColor,lt:(s=l.lt)!==null&&s!==void 0?s:e.lineColor,Ps:(o=l.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(a=l.Rs)!==null&&a!==void 0?a:e.bottomColor}},Baseline:(n,e,t,i)=>{var r,s,o,a,l,c;const h=z(n(t,i));return{ce:h.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(r=h.Re)!==null&&r!==void 0?r:e.topLineColor,De:(s=h.De)!==null&&s!==void 0?s:e.bottomLineColor,ke:(o=h.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(a=h.ye)!==null&&a!==void 0?a:e.topFillColor2,Ce:(l=h.Ce)!==null&&l!==void 0?l:e.bottomFillColor1,Te:(c=h.Te)!==null&&c!==void 0?c:e.bottomFillColor2}},Line:(n,e,t,i)=>{var r,s;const o=z(n(t,i));return{ce:(r=o.V)!==null&&r!==void 0?r:e.color,lt:(s=o.V)!==null&&s!==void 0?s:e.color}},Histogram:(n,e,t,i)=>{var r;return{ce:(r=z(n(t,i)).V)!==null&&r!==void 0?r:e.color}}};class dx{constructor(e){this.Kh=(t,i)=>i!==void 0?i.Vt:this.jr.In().Gh(t),this.jr=e,this.Jh=hx[e.Qh()]}$s(e,t){return this.Jh(this.Kh,this.jr.W(),e,t)}}var Oy;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(Oy||(Oy={}));const ui=30;class fx{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,t=0){const i=this.hl(e,t);return i===null?null:Object.assign(Object.assign({},this.al(i)),{ee:this.rl(i)})}ne(){return this.tl}ol(e,t,i){if(this.Ni())return null;let r=null;for(const s of i)r=Dl(r,this._l(e,t,s));return r}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,t){const i=this.ul(e);if(i===null&&t!==0)switch(t){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return i}cl(e){let t=this.fl(e);return t>0&&(t-=1),t!==this.tl.length&&this.rl(t)<e?t:null}dl(e){const t=this.vl(e);return t!==this.tl.length&&e<this.rl(t)?t:null}ul(e){const t=this.fl(e);return t===this.tl.length||e<this.tl[t].ee?null:t}fl(e){return $a(this.tl,e,(t,i)=>t.ee<i)}vl(e){return DS(this.tl,e,(t,i)=>t.ee>i)}pl(e,t,i){let r=null;for(let s=e;s<t;s++){const o=this.tl[s].Vt[i];Number.isNaN(o)||(r===null?r={ml:o,bl:o}:(o<r.ml&&(r.ml=o),o>r.bl&&(r.bl=o)))}return r}_l(e,t,i){if(this.Ni())return null;let r=null;const s=z(this.el()),o=z(this.An()),a=Math.max(e,s),l=Math.min(t,o),c=Math.ceil(a/ui)*ui,h=Math.max(c,Math.floor(l/ui)*ui);{const p=this.fl(a),g=this.vl(Math.min(l,c,t));r=Dl(r,this.pl(p,g,i))}let d=this.il.get(i);d===void 0&&(d=new Map,this.il.set(i,d));for(let p=Math.max(c+1,a);p<h;p+=ui){const g=Math.floor(p/ui);let y=d.get(g);if(y===void 0){const _=this.fl(g*ui),b=this.vl((g+1)*ui-1);y=this.pl(_,b,i),d.set(g,y)}r=Dl(r,y)}{const p=this.fl(h),g=this.vl(l);r=Dl(r,this.pl(p,g,i))}return r}}function Dl(n,e){return n===null?e:e===null?n:{ml:Math.min(n.ml,e.ml),bl:Math.max(n.bl,e.bl)}}class px{constructor(e){this.wl=e}X(e,t,i){this.wl.draw(e)}gl(e,t,i){var r,s;(s=(r=this.wl).drawBackground)===null||s===void 0||s.call(r,e)}}class Ed{constructor(e){this.tr=null,this.wn=e}gt(){var e;const t=this.wn.renderer();if(t===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===t)return this.tr.xl;const i=new px(t);return this.tr={Ml:t,xl:i},i}Sl(){var e,t,i;return(i=(t=(e=this.wn).zOrder)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:"normal"}}function US(n){var e,t,i,r,s;return{Kt:n.text(),ki:n.coordinate(),Si:(e=n.fixedCoordinate)===null||e===void 0?void 0:e.call(n),V:n.textColor(),t:n.backColor(),yt:(i=(t=n.visible)===null||t===void 0?void 0:t.call(n))===null||i===void 0||i,hi:(s=(r=n.tickVisible)===null||r===void 0?void 0:r.call(n))===null||s===void 0||s}}class mx{constructor(e,t){this.Wt=new RS,this.kl=e,this.yl=t}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},US(this.kl))),this.Wt}}class gx extends Wc{constructor(e,t){super(),this.kl=e,this.Li=t}zi(e,t,i){const r=US(this.kl);i.t=r.t,e.V=r.V;const s=2/12*this.Li.P();i.wi=s,i.gi=s,i.ki=r.ki,i.Si=r.Si,e.Kt=r.Kt,e.yt=r.yt,e.hi=r.hi}}class vx{constructor(e,t){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=t}Ol(){return this.Vl}Vn(){var e,t;(t=(e=this.Vl).updateAllViews)===null||t===void 0||t.call(e)}Pn(){var e,t,i,r;const s=(i=(t=(e=this.Vl).paneViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((r=this.Cl)===null||r===void 0?void 0:r.Ml)===s)return this.Cl.xl;const o=s.map(a=>new Ed(a));return this.Cl={Ml:s,xl:o},o}Qi(){var e,t,i,r;const s=(i=(t=(e=this.Vl).timeAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((r=this.Tl)===null||r===void 0?void 0:r.Ml)===s)return this.Tl.xl;const o=this.jr.$t().St(),a=s.map(l=>new mx(l,o));return this.Tl={Ml:s,xl:a},a}Rn(){var e,t,i,r;const s=(i=(t=(e=this.Vl).priceAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((r=this.Pl)===null||r===void 0?void 0:r.Ml)===s)return this.Pl.xl;const o=this.jr.Dt(),a=s.map(l=>new gx(l,o));return this.Pl={Ml:s,xl:a},a}Bl(){var e,t,i,r;const s=(i=(t=(e=this.Vl).priceAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((r=this.Rl)===null||r===void 0?void 0:r.Ml)===s)return this.Rl.xl;const o=s.map(a=>new Ed(a));return this.Rl={Ml:s,xl:o},o}Al(){var e,t,i,r;const s=(i=(t=(e=this.Vl).timeAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:[];if(((r=this.Dl)===null||r===void 0?void 0:r.Ml)===s)return this.Dl.xl;const o=s.map(a=>new Ed(a));return this.Dl={Ml:s,xl:o},o}Il(e,t){var i,r,s;return(s=(r=(i=this.Vl).autoscaleInfo)===null||r===void 0?void 0:r.call(i,e,t))!==null&&s!==void 0?s:null}wr(e,t){var i,r,s;return(s=(r=(i=this.Vl).hitTest)===null||r===void 0?void 0:r.call(i,e,t))!==null&&s!==void 0?s:null}}function Sd(n,e,t,i){n.forEach(r=>{e(r).forEach(s=>{s.Sl()===t&&i.push(s)})})}function Td(n){return n.Pn()}function yx(n){return n.Bl()}function _x(n){return n.Al()}class Um extends cx{constructor(e,t,i,r,s){super(e),this.zt=new fx,this.jh=new sx(this),this.zl=[],this.Ll=new Qk(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=t,this.$l=i;const o=new ox(this);this.rn=[o],this.Hh=new FS(o,this,e),i!=="Area"&&i!=="Line"&&i!=="Baseline"||(this.El=new Jk(this)),this.Ul(),this.ql(s)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const t={Xr:!0},i=this.Dt();if(this.$t().St().Ni()||i.Ni()||this.zt.Ni())return t;const r=this.$t().St().Xs(),s=this.Ct();if(r===null||s===null)return t;let o,a;if(e){const d=this.zt.sl();if(d===null)return t;o=d,a=d.ee}else{const d=this.zt.ll(r.ui(),-1);if(d===null||(o=this.zt.Gh(d.ee),o===null))return t;a=d.ee}const l=o.Vt[3],c=this.Us().$s(a,{Vt:o}),h=i.Rt(l,s.Vt);return{Xr:!1,_t:l,Kt:i.Fi(l,s.Vt),xh:i.Yl(l),Sh:i.Zl(l,s.Vt),V:c.ce,ki:h,ee:a}}Us(){return this.Nl!==null||(this.Nl=new dx(this)),this.Nl}W(){return this.cn}$h(e){const t=e.priceScaleId;t!==void 0&&t!==this.cn.priceScaleId&&this.$t().Xl(this,t),mn(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,t){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(t&&t.ta?this.El.$r():e.length===0&&this.El.Hr());const i=this.$t().dr(this);this.$t().ia(i),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const t=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(t),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const t=new ux(this,e);return this.zl.push(t),this.$t().Gl(this),t}ra(e){const t=this.zl.indexOf(e);t!==-1&&this.zl.splice(t,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const t=e.Os();return this.zt.ll(t,1)}In(){return this.zt}ph(e){const t=this.zt.Gh(e);return t===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3]}:t.Vt[3]}aa(e){const t=[];Sd(this.Hl,Td,"top",t);const i=this.El;return i!==null&&i.yt()&&(this.jl===null&&i.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),i.Ur(),t.unshift(i)),t}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const t=this.zl.map(i=>i.qh());return e.push(...t),Sd(this.Hl,Td,"normal",e),e}ua(){return this.ca(Td,"bottom")}da(e){return this.ca(yx,e)}fa(e){return this.ca(_x,e)}va(e,t){return this.Hl.map(i=>i.wr(e,t)).filter(i=>i!==null)}Ji(e){return[this.Hh,...this.zl.map(t=>t.Yh())]}Rn(e,t){if(t!==this.Yi&&!this._a())return[];const i=[...this.rn];for(const r of this.zl)i.push(r.Zh());return this.Hl.forEach(r=>{i.push(...r.Rn())}),i}Qi(){const e=[];return this.Hl.forEach(t=>{e.push(...t.Qi())}),e}Il(e,t){if(this.cn.autoscaleInfoProvider!==void 0){const i=this.cn.autoscaleInfoProvider(()=>{const r=this.pa(e,t);return r===null?null:r.Bh()});return Ju.Ah(i)}return this.pa(e,t)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const t of this.rn)t.bt();for(const t of this.zl)t.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(t=>t.Vn())}Dt(){return z(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const t=this.zt.Gh(e);return t===null?null:{_t:t.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new vx(e,this))}ya(e){this.Hl=this.Hl.filter(t=>t.Ol()!==e)}Ca(){if(this.wn instanceof wd)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof wd)return e=>this.wn.je(e)}_a(){return!Hc(this.Dt().Pa())}pa(e,t){if(!ga(e)||!ga(t)||this.zt.Ni())return null;const i=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],r=this.zt.ol(e,t,i);let s=r!==null?new Dt(r.ml,r.bl):null;if(this.Qh()==="Histogram"){const a=this.cn.base,l=new Dt(a,a);s=s!==null?s.ts(l):l}let o=this.dn.uh();return this.Hl.forEach(a=>{const l=a.Il(e,t);if(l!=null&&l.priceRange){const g=new Dt(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.ts(g):g}var c,h,d,p;l!=null&&l.margins&&(c=o,h=l.margins,o={above:Math.max((d=c==null?void 0:c.above)!==null&&d!==void 0?d:0,h.above),below:Math.max((p=c==null?void 0:c.below)!==null&&p!==void 0?p:0,h.below)})}),new Ju(s,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new Ck(this.cn.priceFormat.precision);break;case"percent":this.wa=new PS(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new qc(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const t=z(this.zt.el());this.Wl=this.Fl.map((i,r)=>{const s=z(e.Va(i.time,!0)),o=s<t?1:-1;return{time:z(this.zt.ll(s,o)).ee,position:i.position,shape:i.shape,color:i.color,id:i.id,th:r,text:i.text,size:i.size,originalTime:i.originalTime}})}ql(e){switch(this.dn=new rx(this,this.$t()),this.$l){case"Bar":this.wn=new Dk(this,this.$t());break;case"Candlestick":this.wn=new $k(this,this.$t());break;case"Line":this.wn=new Hk(this,this.$t());break;case"Custom":this.wn=new wd(this,this.$t(),Rt(e));break;case"Area":this.wn=new Ok(this,this.$t());break;case"Baseline":this.wn=new Fk(this,this.$t());break;case"Histogram":this.wn=new Wk(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,t){const i=[];return Sd(this.Hl,e,t,i),i}}class wx{constructor(e){this.cn=e}Oa(e,t,i){let r=e;if(this.cn.mode===0)return r;const s=i.vn(),o=s.Ct();if(o===null)return r;const a=s.Rt(e,o),l=i.Ba().filter(h=>h instanceof Um).reduce((h,d)=>{if(i.vr(d)||!d.yt())return h;const p=d.Dt(),g=d.In();if(p.Ni()||!g.Kr(t))return h;const y=g.Gh(t);if(y===null)return h;const _=os(d.Ct());return h.concat([p.Rt(y.Vt[3],_.Vt)])},[]);if(l.length===0)return r;l.sort((h,d)=>Math.abs(h-a)-Math.abs(d-a));const c=l[0];return r=s.pn(c,o),r}}class Ex extends vn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.zt===null)return;const s=Math.max(1,Math.floor(i));e.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=z(this.zt);if(o.Aa){e.strokeStyle=o.Ia,yr(e,o.za),e.beginPath();for(const a of o.La){const l=Math.round(a.Ea*i);e.moveTo(l,-s),e.lineTo(l,t.height+s)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,yr(e,o.Wa),e.beginPath();for(const a of o.ja){const l=Math.round(a.Ea*r);e.moveTo(-s,l),e.lineTo(t.width+s,l)}e.stroke()}})}}class Sx{constructor(e){this.Wt=new Ex,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,t={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(i=>({Ea:i.coord}))};this.Wt.J(t),this.ft=!1}return this.Wt}}class Tx{constructor(e){this.wn=new Sx(e)}qh(){return this.wn}}const bd={$a:4,Ua:1e-4};function as(n,e){const t=100*(n-e)/e;return e<0?-t:t}function bx(n,e){const t=as(n.Ph(),e),i=as(n.Rh(),e);return new Dt(t,i)}function Bo(n,e){const t=100*(n-e)/e+100;return e<0?-t:t}function Ix(n,e){const t=Bo(n.Ph(),e),i=Bo(n.Rh(),e);return new Dt(t,i)}function Zu(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.log10(t+e.Ua)+e.$a;return n<0?-i:i}function jo(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.pow(10,t-e.$a)-e.Ua;return n<0?-i:i}function wo(n,e){if(n===null)return null;const t=Zu(n.Ph(),e),i=Zu(n.Rh(),e);return new Dt(t,i)}function Nl(n,e){if(n===null)return null;const t=jo(n.Ph(),e),i=jo(n.Rh(),e);return new Dt(t,i)}function Id(n){if(n===null)return bd;const e=Math.abs(n.Rh()-n.Ph());if(e>=1||e<1e-15)return bd;const t=Math.ceil(Math.abs(Math.log10(e))),i=bd.$a+t;return{$a:i,Ua:1/Math.pow(10,i)}}class Cd{constructor(e,t){if(this.qa=e,this.Ya=t,function(i){if(i<0)return!1;for(let r=i;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let i=this.qa;i!==1;){if(i%2==0)this.Za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),i/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,t,i){const r=this.qa===0?0:1/this.qa;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Ya[0];for(;;){const d=Vl(s,r,1e-14)&&s>r+1e-14,p=Vl(s,i*a,1e-14),g=Vl(s,1,1e-14);if(!(d&&p&&g))break;s/=a,a=this.Ya[++o%this.Ya.length]}if(s<=r+1e-14&&(s=r),s=Math.max(1,s),this.Za.length>0&&(l=s,c=1,h=1e-14,Math.abs(l-c)<h))for(o=0,a=this.Za[0];Vl(s,i*a,1e-14)&&s>r+1e-14;)s/=a,a=this.Za[++o%this.Za.length];var l,c,h;return s}}class Vy{constructor(e,t,i,r){this.Ka=[],this.Li=e,this.qa=t,this.Ga=i,this.Ja=r}Xa(e,t){if(e<t)throw new Error("high < low");const i=this.Li.At(),r=(e-t)*this.Qa()/i,s=new Cd(this.qa,[2,2.5,2]),o=new Cd(this.qa,[2,2,2.5]),a=new Cd(this.qa,[2.5,2,2]),l=[];return l.push(s.Xa(e,t,r),o.Xa(e,t,r),a.Xa(e,t,r)),function(c){if(c.length<1)throw Error("array is empty");let h=c[0];for(let d=1;d<c.length;++d)c[d]<h&&(h=c[d]);return h}(l)}io(){const e=this.Li,t=e.Ct();if(t===null)return void(this.Ka=[]);const i=e.At(),r=this.Ga(i-1,t),s=this.Ga(0,t),o=this.Li.W().entireTextOnly?this.no()/2:0,a=o,l=i-1-o,c=Math.max(r,s),h=Math.min(r,s);if(c===h)return void(this.Ka=[]);let d=this.Xa(c,h),p=c%d;p+=p<0?d:0;const g=c>=h?1:-1;let y=null,_=0;for(let b=c-p;b>h;b-=d){const v=this.Ja(b,t,!0);y!==null&&Math.abs(v-y)<this.Qa()||v<a||v>l||(_<this.Ka.length?(this.Ka[_].Ea=v,this.Ka[_].so=e.eo(b)):this.Ka.push({Ea:v,so:e.eo(b)}),_++,y=v,e.ro()&&(d=this.Xa(b*g,h)))}this.Ka.length=_}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function BS(n){return n.slice().sort((e,t)=>z(e.Xi())-z(t.Xi()))}var Dy;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(Dy||(Dy={}));const Ny=new PS,Ly=new qc(100,1);class Cx{constructor(e,t,i,r){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new ze,this.vo=new ze,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=Ly,this.xo=Id(null),this.So=e,this.cn=t,this.ko=i,this.yo=r,this.Co=new Vy(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(mn(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const t=Rt(e.scaleMargins.top),i=Rt(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(t+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+i}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const t=this.Cr();let i=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),t.Cr===1&&e.Cr!==t.Cr&&(function(s,o){if(s===null)return!1;const a=jo(s.Ph(),o),l=jo(s.Rh(),o);return isFinite(a)&&isFinite(l)}(this.Ih,this.xo)?(i=Nl(this.Ih,this.xo),i!==null&&this.Ao(i)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==t.Cr&&(i=wo(this.Ih,this.xo),i!==null&&this.Ao(i));const r=t.Cr!==this.cn.mode;r&&(t.Cr===2||this.Mh())&&this.Ra(),r&&(t.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&t.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(t,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,t){const i=this.Ih;(t||i===null&&e!==null||i!==null&&!i.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,t){return this.Mh()?e=as(e,t):this.Oo()&&(e=Bo(e,t)),this.Po(e,t)}te(e,t,i){this.Wo();const r=this.Fo(),s=z(this.Lh()),o=s.Ph(),a=s.Rh(),l=this.Eo()-1,c=this.Bo(),h=l/(a-o),d=i===void 0?0:i.from,p=i===void 0?e.length:i.to,g=this.Ho();for(let y=d;y<p;y++){const _=e[y],b=_._t;if(isNaN(b))continue;let v=b;g!==null&&(v=g(_._t,t));const w=r+h*(v-o),I=c?w:this.ho-1-w;_.st=I}}be(e,t,i){this.Wo();const r=this.Fo(),s=z(this.Lh()),o=s.Ph(),a=s.Rh(),l=this.Eo()-1,c=this.Bo(),h=l/(a-o),d=i===void 0?0:i.from,p=i===void 0?e.length:i.to,g=this.Ho();for(let y=d;y<p;y++){const _=e[y];let b=_.ge,v=_.Me,w=_.xe,I=_.Se;g!==null&&(b=g(_.ge,t),v=g(_.Me,t),w=g(_.xe,t),I=g(_.Se,t));let A=r+h*(b-o),V=c?A:this.ho-1-A;_.pe=V,A=r+h*(v-o),V=c?A:this.ho-1-A,_.de=V,A=r+h*(w-o),V=c?A:this.ho-1-A,_.fe=V,A=r+h*(I-o),V=c?A:this.ho-1-A,_.me=V}}pn(e,t){const i=this.To(e,t);return this.$o(i,t)}$o(e,t){let i=e;return this.Mh()?i=function(r,s){return s<0&&(r=-r),r/100*s+s}(i,t):this.Oo()&&(i=function(r,s){return r-=100,s<0&&(r=-r),r/100*s+s}(i,t)),i}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let t=0;t<this.po.length;t++){const i=this.po[t];i.Xi()===null&&i.Ki(t+1),e.push(i)}return e=BS(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const t=this.po.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.po.splice(t,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const t of this.po){const i=t.Ct();i!==null&&(e===null||i.la<e.la)&&(e=i)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const t=this.Co.Ha();return this.bo={Ha:t,Xo:e},this.fo.m(),t}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=z(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let t=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const i=z(this.ao).Th();t=Math.max(t,.1),i.Vh(t),this.Ao(i)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=z(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const t=z(this.Lh()).Dh()/(this.Eo()-1);let i=e-this.Mo;this.Bo()&&(i*=-1);const r=i*t,s=z(this.ao).Th();s.Oh(r),this.Ao(s,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,t){switch(this.cn.mode){case 2:return this.s_(as(e,t));case 3:return this.ba().format(Bo(e,t));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,z(this.e_()).ba())}Zl(e,t){return e=as(e,t),this.s_(e,Ny)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let t=100;e!==null&&(t=Math.round(1/e.ma())),this.wa=Ly,this.Mh()?(this.wa=Ny,t=100):this.Oo()?(this.wa=new qc(100,1),t=100):e!==null&&(this.wa=e.ba()),this.Co=new Vy(this,t,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,t){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Zu(e,this.xo):e;const i=z(this.Lh()),r=this.Fo()+(this.Eo()-1)*(e-i.Ph())/i.Dh();return this.jo(r)}To(e,t){if(this.Wo(),this.Ni())return 0;const i=this.jo(e),r=z(this.Lh()),s=r.Ph()+r.Dh()*((i-this.Fo())/(this.Eo()-1));return this.ro()?jo(s,this.xo):s}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let t=null;const i=this.r_();let r=0,s=0;for(const l of i){if(!l.yt())continue;const c=l.Ct();if(c===null)continue;const h=l.Il(e.Os(),e.ui());let d=h&&h.Lh();if(d!==null){switch(this.cn.mode){case 1:d=wo(d,this.xo);break;case 2:d=bx(d,c.Vt);break;case 3:d=Ix(d,c.Vt)}if(t=t===null?d:t.ts(z(d)),h!==null){const p=h.Eh();p!==null&&(r=Math.max(r,p.above),s=Math.max(s,p.below))}}}if(r===this.co&&s===this.do||(this.co=r,this.do=s,this.bo=null,this.Do()),t!==null){if(t.Ph()===t.Rh()){const l=this.e_(),c=5*(l===null||this.Mh()||this.Oo()?1:l.ma());this.ro()&&(t=Nl(t,this.xo)),t=new Dt(t.Ph()-c,t.Rh()+c),this.ro()&&(t=wo(t,this.xo))}if(this.ro()){const l=Nl(t,this.xo),c=Id(l);if(o=c,a=this.xo,o.$a!==a.$a||o.Ua!==a.Ua){const h=this.ao!==null?Nl(this.ao,this.xo):null;this.xo=c,t=wo(l,c),h!==null&&(this.ao=wo(h,c))}}this.Ao(t)}else this.Ih===null&&(this.Ao(new Dt(-.5,.5)),this.xo=Id(null));var o,a;this.oo._o=!0}Ho(){return this.Mh()?as:this.Oo()?Bo:this.ro()?e=>Zu(e,this.xo):null}a_(e,t,i){return t===void 0?(i===void 0&&(i=this.ba()),i.format(e)):t(e)}Wh(e,t){return this.a_(e,this.yo.priceFormatter,t)}s_(e,t){return this.a_(e,this.yo.percentageFormatter,t)}}class Rx{constructor(e,t){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new ze,this.yl=e,this.$i=t,this.d_=new Tx(this);const i=t.W();this.f_=this.v_("left",i.leftPriceScale),this.p_=this.v_("right",i.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(i)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const t=Array.from(this.o_.values());for(const i of t){const r=z(i[0].Dt());r.$h(e.overlayPriceScales),e.localization&&r.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Rt(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(t=>{if(this.vr(t)){const i=t.Dt();i!==null&&i.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const t=e.Dt();return t===null||this.f_!==t&&this.p_!==t}qo(e,t,i){const r=i!==void 0?i:this.C_().y_+1;this.T_(e,t,r)}Zo(e){const t=this.po.indexOf(e);$i(t!==-1,"removeDataSource: invalid data source"),this.po.splice(t,1);const i=z(e.Dt()).Pa();if(this.o_.has(i)){const s=Rt(this.o_.get(i)),o=s.indexOf(e);o!==-1&&(s.splice(o,1),s.length===0&&this.o_.delete(i))}const r=e.Dt();r&&r.Ba().indexOf(e)>=0&&r.Zo(e),r!==null&&(r.Yo(),this.P_(r)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,t){e.Go(t)}O_(e,t){e.Jo(t),this.k_()}B_(e){e.Qo()}A_(e,t){e.t_(t)}I_(e,t){e.i_(t),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const t=this.yl.Xs();e.Ro({Wn:!0}),t!==null&&e.h_(t),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=BS(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const t=e.r_();if(t&&t.length>0&&!this.yl.Ni()){const i=this.yl.Xs();i!==null&&e.h_(i)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let t=0,i=0;for(let r=0;r<e.length;r++){const s=e[r].Xi();s!==null&&(s<t&&(t=s),s>i&&(i=s))}return{H_:t,y_:i}}T_(e,t,i){let r=this.w_(t);if(r===null&&(r=this.v_(t,this.$i.W().overlayPriceScales)),this.po.push(e),!Hc(t)){const s=this.o_.get(t)||[];s.push(e),this.o_.set(t,s)}r.qo(e),e.Gi(r),e.Ki(i),this.P_(r),this.mo=null}m_(e,t,i){t.Cr!==i.Cr&&this.L_(e)}v_(e,t){const i=Object.assign({visible:!0,autoScale:!0},$n(t)),r=new Cx(e,i,this.$i.W().layout,this.$i.W().localization);return r.Lo(this.At()),r}}class Px{constructor(e,t,i=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=t,this.ir=i}Y_(e){const t=e.time,i=this.q_.cacheKey(t),r=this.tr.get(i);if(r!==void 0)return r.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Rt(o)),this.Je++,this.Ke--}const s=this.U_(e);return this.tr.set(i,{Z_:s,rr:this.Ge}),this.Qe.set(this.Ge,i),this.Ke++,this.Ge++,s}}class Wo{constructor(e,t){$i(e<=t,"right should be >= left"),this.X_=e,this.K_=t}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function Fy(n,e){return n===null||e===null?n===e:n.Ch(e)}class Ax{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,t){this.nu(t),this.tr=null;for(let i=t;i<e.length;++i){const r=e[i];let s=this.J_.get(r.timeWeight);s===void 0&&(s=[],this.J_.set(r.timeWeight,s)),s.push({index:i,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}su(e,t){const i=Math.ceil(t/e);return this.tr!==null&&this.tr.eu===i||(this.tr={Ha:this.ru(i),eu:i}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const t=[];this.J_.forEach((i,r)=>{e<=i[0].index?t.push(r):i.splice($a(i,e,s=>s.index<e),1/0)});for(const i of t)this.J_.delete(i)}ru(e){let t=[];for(const i of Array.from(this.J_.keys()).sort((r,s)=>s-r)){if(!this.J_.get(i))continue;const r=t;t=[];const s=r.length;let o=0;const a=Rt(this.J_.get(i)),l=a.length;let c=1/0,h=-1/0;for(let d=0;d<l;d++){const p=a[d],g=p.index;for(;o<s;){const y=r[o],_=y.index;if(!(_<g)){c=_;break}o++,t.push(y),h=_,c=1/0}if(c-g>=e&&g-h>=e)t.push(p),h=g;else if(this.Q_)return r}for(;o<s;o++)t.push(r[o])}return t}}class ps{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Wo(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new ps(null)}}function kx(n,e){return n.weight>e.weight?n:e}class xx{constructor(e,t,i,r){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new Ax,this.du=new Map,this.fu=ps.ou(),this.vu=!0,this.pu=new ze,this.mu=new ze,this.bu=new ze,this.wu=null,this.gu=null,this.Mu=[],this.cn=t,this.yo=i,this.xu=t.rightOffset,this.Su=t.barSpacing,this.$i=e,this.q_=r,this.ku(),this.cu.tu(t.uniformDistribution)}W(){return this.cn}yu(e){mn(this.yo,e),this.Cu(),this.ku()}$h(e,t){var i;mn(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((i=e.barSpacing)!==null&&i!==void 0?i:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var t,i;return(i=(t=this.uu[e])===null||t===void 0?void 0:t.time)!==null&&i!==void 0?i:null}Ui(e){var t;return(t=this.uu[e])!==null&&t!==void 0?t:null}Va(e,t){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return t?this.uu.length-1:null;const i=$a(this.uu,this.q_.key(e),(r,s)=>this.q_.key(r.time)<s);return this.q_.key(e)<this.q_.key(this.uu[i].time)?t?i:null:i}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const t={from:e.Os(),to:e.ui()};return this.Ou(t)}Ou(e){const t=Math.round(e.from),i=Math.round(e.to),r=z(this.Bu()),s=z(this.Au());return{from:z(this.Ui(Math.max(r,t))),to:z(this.Ui(Math.min(s,i)))}}Iu(e){return{from:z(this.Va(e.from,!0)),to:z(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const t=this.Du(),i=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&i!==0){const r=this.Su*e/i;this.Su=r}if(this.cn.fixLeftEdge&&t!==null&&t.Os()<=0){const r=i-e;this.xu-=Math.round(r/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!ga(e))return 0;const t=this.Eu()+this.xu-e;return this.__-(t+.5)*this.Su-1}Qs(e,t){const i=this.Eu(),r=t===void 0?0:t.from,s=t===void 0?e.length:t.to;for(let o=r;o<s;o++){const a=e[o].ot,l=i+this.xu-a,c=this.__-(l+.5)*this.Su-1;e[o].nt=c}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,t=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(t/e),r=z(this.Xs()),s=Math.max(r.Os(),r.Os()-i),o=Math.max(r.ui(),r.ui()-i),a=this.cu.su(e,t),l=this.Bu()+i,c=this.Au()-i,h=this.$u(),d=this.cn.fixLeftEdge||h,p=this.cn.fixRightEdge||h;let g=0;for(const y of a){if(!(s<=y.index&&y.index<=o))continue;let _;g<this.Mu.length?(_=this.Mu[g],_.coord=this.It(y.index),_.label=this.Uu(y),_.weight=y.weight):(_={needAlignCoordinate:!1,coord:this.It(y.index),label:this.Uu(y),weight:y.weight},this.Mu.push(_)),this.Su>t/2&&!h?_.needAlignCoordinate=!1:_.needAlignCoordinate=d&&y.index<=l||p&&y.index>=c,g++}return this.Mu.length=g,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,t){const i=this.Fu(e),r=this.le(),s=r+t*(r/10);this.Gn(s),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(i-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const t=tp(this.__-e,0,this.__),i=tp(this.__-z(this.wo),0,this.__);t!==0&&i!==0&&this.Gn(this.wu.le*t/i)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const t=(this.Mo-e)/this.le();this.xu=z(this.wu).Hu+t,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.xu,r=performance.now();this.$i.Zn({Qu:s=>(s-r)/t>=1,tc:s=>{const o=(s-r)/t;return o>=1?e:i+(e-i)*o}})}bt(e,t){this.vu=!0,this.uu=e,this.cu.iu(e,t),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const t=e.G_();this.ju(this.__/t),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),t=this.Au();e!==null&&t!==null&&this.rc(new Wo(e,t+this.cn.rightOffset))}lc(e){const t=new Wo(e.from,e.to);this.rc(t)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:t}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const t=this.ac(e),i=this.Eu()+this.xu-t;return Math.round(1e6*i)/1e6}ju(e){const t=this.Su;this.Su=e,this.zu(),t!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(ps.ou());const e=this.Eu(),t=this.__/this.Su,i=this.xu+e,r=new Wo(i-t+1,i);this._c(new ps(r))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const t=.5*this.__;this.Su>t&&(this.Su=t,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const t=this.dc();this.xu>t&&(this.xu=t,this.vu=!0)}cc(){const e=this.Bu(),t=this._u;return e===null||t===null?null:e-t-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let t=this.du.get(e.weight);return t===void 0&&(t=new Px(i=>this.fc(i),this.q_),this.du.set(e.weight,t)),t.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const t=this.fu;this.fu=e,Fy(t.lu(),this.fu.lu())||this.pu.m(),Fy(t.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const t=this.Xs();if(t===null)return;const i=t.Os()-e;if(i<0){const r=this.xu-i-1;this.Jn(r)}this.zu()}Pu(){this.Lu(),this.zu()}}class Mx{X(e,t,i){e.useMediaCoordinateSpace(r=>this.K(r,t,i))}gl(e,t,i){e.useMediaCoordinateSpace(r=>this.vc(r,t,i))}vc(e,t,i){}}class Ox extends Mx{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:t,mediaSize:i}=e;let r=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;t.font=o.R;const a=this.wc(t,o.Kt);a>i.width?o.Zu=i.width/a:o.Zu=1,r+=o.gc*o.Zu}let s=0;switch(this.zt.Mc){case"top":s=0;break;case"center":s=Math.max((i.height-r)/2,0);break;case"bottom":s=Math.max(i.height-r,0)}t.fillStyle=this.zt.V;for(const o of this.zt.bc){t.save();let a=0;switch(this.zt.xc){case"left":t.textAlign="left",a=o.gc/2;break;case"center":t.textAlign="center",a=i.width/2;break;case"right":t.textAlign="right",a=i.width-1-o.gc/2}t.translate(a,s),t.textBaseline="top",t.font=o.R,t.scale(o.Zu,o.Zu),t.fillText(o.Kt,0,o.Sc),t.restore(),s+=o.gc*o.Zu}}wc(e,t){const i=this.kc(e.font);let r=i.get(t);return r===void 0&&(r=e.measureText(t).width,i.set(t,r)),r}kc(e){let t=this.mc.get(e);return t===void 0&&(t=new Map,this.mc.set(e,t)),t}}class Vx{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new Ox(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),t=this.Ft;t.yt=e.visible,t.yt&&(t.V=e.color,t.xc=e.horzAlign,t.Mc=e.vertAlign,t.bc=[{Kt:e.text,R:Rs(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class Dx extends Lm{constructor(e,t){super(),this.cn=t,this.wn=new Vx(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var zy,$y,Uy,By,jy;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(zy||(zy={}));class Nx{constructor(e,t,i){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new ze,this.Rc=new ze,this.Dc=null,this.Vc=e,this.cn=t,this.q_=i,this.Oc=new pk(this),this.yl=new xx(this,t.timeScale,this.cn.localization,i),this.vt=new Ik(this,t.crosshair),this.Bc=new wx(t.crosshair),this.Ac=new Dx(this,t.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(it.es())}Uh(){this.Nc(it.ss())}oa(){this.Nc(new it(1))}Gl(e){const t=this.Fc(e);this.Nc(t)}Wc(){return this.Tc}jc(e){const t=this.Tc;this.Tc=e,t!==null&&this.Gl(t.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){mn(this.cn,e),this.yc.forEach(t=>t.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,t){if(e==="left")return void this.$h({leftPriceScale:t});if(e==="right")return void this.$h({rightPriceScale:t});const i=this.Uc(e);i!==null&&(i.Dt.$h(t),this.Pc.m())}Uc(e){for(const t of this.yc){const i=t.w_(e);if(i!==null)return{Ht:t,Dt:i}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,t){e.Lo(t),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(t=>t.S_(e)),this.Wu()}Ic(e){const t=new Rx(this.yl,this);e!==void 0?this.yc.splice(e,0,t):this.yc.push(t);const i=e===void 0?this.yc.length-1:e,r=it.es();return r.Nn(i,{Fn:0,Wn:!0}),this.Nc(r),t}V_(e,t,i){e.V_(t,i)}O_(e,t,i){e.O_(t,i),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,t){e.B_(t),this.Nc(this.Gc(e,2))}A_(e,t,i){t.Vo()||e.A_(t,i)}I_(e,t,i){t.Vo()||(e.I_(t,i),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,t){t.Vo()||(e.z_(t),this.Nc(this.Gc(e,2)))}E_(e,t){e.E_(t),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,t){const i=this.St();if(i.Ni()||t===0)return;const r=i.Hi();e=Math.max(1,Math.min(e,r)),i.Zu(e,t),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,t,i,r,s){this.vt.gn(e,t);let o=NaN,a=this.yl.Nu(e);const l=this.yl.Xs();l!==null&&(a=Math.min(Math.max(l.Os(),a),l.ui()));const c=r.vn(),h=c.Ct();h!==null&&(o=c.pn(t,h)),o=this.Bc.Oa(o,a,r),this.vt.kn(a,o,r),this.oa(),s||this.Rc.m(this.vt.xt(),{x:e,y:t},i)}ad(e,t,i){const r=i.vn(),s=r.Ct(),o=r.Rt(e,z(s)),a=this.yl.Va(t,!0),l=this.yl.It(z(a));this.ld(l,o,null,i,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const t=this.vt.xn(),i=this.vt.Sn();this.ld(t,i,null,e)}this.vt.Vn()}_d(e,t,i){const r=this.yl.mn(0);t!==void 0&&i!==void 0&&this.yl.bt(t,i);const s=this.yl.mn(0),o=this.yl.Eu(),a=this.yl.Xs();if(a!==null&&r!==null&&s!==null){const l=a.Kr(o),c=this.q_.key(r)>this.q_.key(s),h=e!==null&&e>o&&!c,d=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,p=l&&(i!==void 0||d)&&this.yl.W().shiftVisibleRangeOnNewBar;if(h&&!p){const g=e-o;this.yl.Jn(this.yl.Hu()-g)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const t=this.yc.find(i=>i.Uo().includes(e));return t===void 0?null:t}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,t,i){const r=this.yc[0],s=this.fd(t,e,r,i);return this.Cc.push(s),this.Cc.length===1?this.Kl():this.Uh(),s}vd(e){const t=this.dr(e),i=this.Cc.indexOf(e);$i(i!==-1,"Series not found"),this.Cc.splice(i,1),z(t).Zo(e),e.S&&e.S()}Xl(e,t){const i=z(this.dr(e));i.Zo(e);const r=this.Uc(t);if(r===null){const s=e.Xi();i.qo(e,t,s)}else{const s=r.Ht===i?e.Xi():void 0;r.Ht.qo(e,t,s)}}hc(){const e=it.ss();e.$n(),this.Nc(e)}pd(e){const t=it.ss();t.Yn(e),this.Nc(t)}Kn(){const e=it.ss();e.Kn(),this.Nc(e)}Gn(e){const t=it.ss();t.Gn(e),this.Nc(t)}Jn(e){const t=it.ss();t.Jn(e),this.Nc(t)}Zn(e){const t=it.ss();t.Zn(e),this.Nc(t)}Un(){const e=it.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const t=this.Ec,i=this.zc;if(t===i)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==i||this.Dc.Rs!==t)this.Dc={Ps:i,Rs:t,wd:new Map};else{const s=this.Dc.wd.get(e);if(s!==void 0)return s}const r=function(s,o,a){const[l,c,h,d]=ma(s),[p,g,y,_]=ma(o),b=[Kt(l+a*(p-l)),Kt(c+a*(g-c)),Kt(h+a*(y-h)),bS(d+a*(_-d))];return`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${b[3]})`}(i,t,e/100);return this.Dc.wd.set(e,r),r}Gc(e,t){const i=new it(t);if(e!==null){const r=this.yc.indexOf(e);i.Nn(r,{Fn:t})}return i}Fc(e,t){return t===void 0&&(t=2),this.Gc(this.dr(e),t)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(t=>t.j_().qh().bt())}fd(e,t,i,r){const s=new Um(this,e,t,i,r),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return i.qo(s,o),Hc(o)||s.$h(e),s}Lc(e){const t=this.cn.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}}function np(n){return!bn(n)&&!za(n)}function jS(n){return bn(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})($y||($y={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(Uy||(Uy={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(By||(By={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(jy||(jy={}));const Wy=n=>n.getUTCFullYear();function Lx(n,e,t){return e.replace(/yyyy/g,(i=>Un(Wy(i),4))(n)).replace(/yy/g,(i=>Un(Wy(i)%100,2))(n)).replace(/MMMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(n,t)).replace(/MMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(n,t)).replace(/MM/g,(i=>Un((r=>r.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>Un((r=>r.getUTCDate())(i),2))(n))}class WS{constructor(e="yyyy-MM-dd",t="default"){this.gd=e,this.Md=t}Y_(e){return Lx(e,this.gd,this.Md)}}class Fx{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Un(e.getUTCHours(),2)).replace("%m",Un(e.getUTCMinutes(),2)).replace("%s",Un(e.getUTCSeconds(),2))}}const zx={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class $x{constructor(e={}){const t=Object.assign(Object.assign({},zx),e);this.Td=new WS(t.Sd,t.Cd),this.Pd=new Fx(t.kd),this.Rd=t.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function Ll(n){return 60*n*60*1e3}function Rd(n){return 60*n*1e3}const Fl=[{Dd:(Hy=1,1e3*Hy),Vd:10},{Dd:Rd(1),Vd:20},{Dd:Rd(5),Vd:21},{Dd:Rd(30),Vd:22},{Dd:Ll(1),Vd:30},{Dd:Ll(3),Vd:31},{Dd:Ll(6),Vd:32},{Dd:Ll(12),Vd:33}];var Hy;function qy(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=Fl.length-1;t>=0;--t)if(Math.floor(e.getTime()/Fl[t].Dd)!==Math.floor(n.getTime()/Fl[t].Dd))return Fl[t].Vd;return 0}function Pd(n){let e=n;if(za(n)&&(e=Bm(n)),!np(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(t.getTime()/1e3),Bd:e}}function Ky(n){if(!jS(n))throw new Error("time must be of type isUTCTimestamp");return{Od:n}}function Bm(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Gy(n){za(n.time)&&(n.time=Bm(n.time))}class Qy{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(Gy)}(e):Gy(e)}createConverterToInternalObj(e){return z(function(t){return t.length===0?null:np(t[0].time)||za(t[0].time)?Pd:Ky}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.Bd===void 0?new Date(1e3*t.Od).getTime():new Date(Date.UTC(t.Bd.year,t.Bd.month-1,t.Bd.day)).getTime()}convertHorzItemToInternal(e){return jS(t=e)?Ky(t):np(t)?Pd(t):Pd(Bm(t));var t}updateFormatter(e){if(!this.cn)return;const t=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new $x({Sd:t,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new WS(t,e.locale)}formatHorzItem(e){const t=e;return this.Ad.Y_(new Date(1e3*t.Od))}formatTickmark(e,t){const i=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),r=this.cn.timeScale;if(r.tickMarkFormatter!==void 0){const s=r.tickMarkFormatter(e.originalTime,i,t.locale);if(s!==null)return s}return function(s,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=s.Bd===void 0?new Date(1e3*s.Od):new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,i,t.locale)}maxTickMarkWeight(e){let t=e.reduce(kx,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(i,r=0){if(i.length===0)return;let s=r===0?null:i[r-1].time.Od,o=s!==null?new Date(1e3*s):null,a=0;for(let l=r;l<i.length;++l){const c=i[l],h=new Date(1e3*c.time.Od);o!==null&&(c.timeWeight=qy(h,o)),a+=c.time.Od-(s||c.time.Od),s=c.time.Od,o=h}if(r===0&&i.length>1){const l=Math.ceil(a/(i.length-1)),c=new Date(1e3*(i[0].time.Od-l));i[0].timeWeight=qy(new Date(1e3*i[0].time.Od),c)}})(e,t)}static Id(e){return mn({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Ps=typeof window<"u";function Xy(){return!!Ps&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Ad(){return!!Ps&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ip(n){return n+n%2}function kd(n,e){return n.zd-e.zd}function xd(n,e,t){const i=(n.zd-e.zd)/(n.ot-e.ot);return Math.sign(i)*Math.min(Math.abs(i),t)}class Ux{constructor(e,t,i,r){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=t,this.qd=i,this.rs=r}Yd(e,t){if(this.Ld!==null){if(this.Ld.ot===t)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:t,zd:e}}Vr(e,t){if(this.Ld===null||this.Ed===null||t-this.Ld.ot>50)return;let i=0;const r=xd(this.Ld,this.Ed,this.Ud),s=kd(this.Ld,this.Ed),o=[r],a=[s];if(i+=s,this.Nd!==null){const c=xd(this.Ed,this.Nd,this.Ud);if(Math.sign(c)===Math.sign(r)){const h=kd(this.Ed,this.Nd);if(o.push(c),a.push(h),i+=h,this.Fd!==null){const d=xd(this.Nd,this.Fd,this.Ud);if(Math.sign(d)===Math.sign(r)){const p=kd(this.Nd,this.Fd);o.push(d),a.push(p),i+=p}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/i*o[c];Math.abs(l)<this.$d||(this.Wd={zd:e,ot:t},this.Hd=l,this.jd=function(c,h){const d=Math.log(h);return Math.log(1*d/-c)/d}(Math.abs(l),this.qd))}tc(e){const t=z(this.Wd),i=e-t.ot;return t.zd+this.Hd*(Math.pow(this.qd,i)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const t=e-z(this.Wd).ot;return Math.min(t,this.jd)}}class Bx{constructor(e,t){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=t,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return IS(ma(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function _r(n,e){const t=z(n.ownerDocument).createElement("canvas");n.appendChild(t);const i=ZA(t,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(r,s)=>({width:Math.max(r.width,s.width),height:Math.max(r.height,s.height)})});return i.resizeCanvasElement(e),i}function wr(n){var e;n.width=1,n.height=1,(e=n.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function rp(n,e,t,i){n.gl&&n.gl(e,t,i)}function du(n,e,t,i){n.X(e,t,i)}function sp(n,e,t,i){const r=n(t,i);for(const s of r){const o=s.gt();o!==null&&e(o)}}function jx(n){Ps&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class jm{constructor(e,t,i){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!Ad(),this.Af=r=>{this.If(r)},this.zf=r=>{if(this.Lf(r)){const s=this.Ef(r);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(_n(r),this.cf);o<30&&!this.wf&&this.Wf(s,this.Hf.jf),this.$f()}}else{const s=this.Ef(r);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(_n(r),this.af);o<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=t,this.cn=i,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const t=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",t)},this.Zf.addEventListener("mousemove",t),this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const t=this.Ef(e);this.Uf(t,this.Hf.tv),this.Bf=!0}iv(e){const t=Md(e.changedTouches,z(this.Of));if(t===null||(this.Vf=zl(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const i=this.Ff(_n(t),z(this.pf)),{nv:r,sv:s,Nf:o}=i;if(this.mf||!(o<5)){if(!this.mf){const a=.5*r,l=s>=a&&!this.cn.ev(),c=a>s&&!this.cn.rv();l||c||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const a=this.Ef(e,t);this.Wf(a,this.Hf.hv),jr(e)}}}lv(e){if(e.button!==0)return;const t=this.Ff(_n(e),z(this.vf)),{Nf:i}=t;if(i>=5&&(this.bf=!0,this.Yf()),this.bf){const r=this.Ef(e);this.Uf(r,this.Hf.av)}}Ff(e,t){const i=Math.abs(t.nt-e.nt),r=Math.abs(t.st-e.st);return{nv:i,sv:r,Nf:i+r}}ov(e){let t=Md(e.changedTouches,z(this.Of));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Of=null,this.Vf=zl(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const i=this.Ef(e,t);if(this.Wf(i,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:r}=this.Ff(_n(t),this.cf);r<30&&!this.wf&&this.Wf(i,this.Hf.jf),this.$f()}else this.wf||(this.Wf(i,this.Hf.uv),this.Hf.uv&&jr(e));this._f===0&&jr(e),e.touches.length===0&&this.ff&&(this.ff=!1,jr(e))}If(e){if(e.button!==0)return;const t=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),Xy()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(t,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:i}=this.Ff(_n(e),this.af);i<5&&!this.bf&&this.Uf(t,this.Hf.qf),this.Yf()}else this.bf||this.Uf(t,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const t=e.changedTouches[0];this.Of=t.identifier,this.Vf=zl(e);const i=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=_n(t),this.yf&&(this.yf(),this.yf=null);{const s=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",s,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const r=this.Ef(e,t);this.Wf(r,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=_n(t))}mv(e){if(e.button!==0)return;const t=this.Zf.ownerDocument.documentElement;Xy()&&t.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=_n(e),this.kf&&(this.kf(),this.kf=null);{const r=this.lv.bind(this),s=this.If.bind(this);this.kf=()=>{t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",r),t.addEventListener("mouseup",s)}if(this.Df=!0,this.Lf(e))return;const i=this.Ef(e);this.Uf(i,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=_n(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,t=i=>{this.Hf.wv&&(i.composed&&this.Zf.contains(i.composedPath()[0])||i.target&&this.Zf.contains(i.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",t)},this.gf=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}Ad()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),jx(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const t=Yy(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,t),jr(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const t=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,st:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Tf=Yy(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const t=this.Ef(e);this.Uf(t,this.Hf.Pv),this.Bf=!Ad()}vv(e){const t=Md(e.touches,z(this.Of));if(t===null)return;const i=this.Ef(e,t);this.Wf(i,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:zl(e)<this.Vf+500}Wf(e,t){t&&t.call(this.Hf,e)}Uf(e,t){t&&t.call(this.Hf,e)}Ef(e,t){const i=t||e,r=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-r.left,localY:i.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:i.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&jr(e)}}}}function Yy(n,e){const t=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(t*t+i*i)}function jr(n){n.cancelable&&n.preventDefault()}function _n(n){return{nt:n.pageX,st:n.pageY}}function zl(n){return n.timeStamp||performance.now()}function Md(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}function $l(n){return{Hc:n.Hc,Iv:{gr:n.zv.externalId},Lv:n.zv.cursorStyle}}function Wx(n,e,t){for(const i of n){const r=i.gt();if(r!==null&&r.wr){const s=r.wr(e,t);if(s!==null)return{Bv:i,Iv:s}}}return null}function Od(n,e){return t=>{var i,r,s,o;return((r=(i=t.Dt())===null||i===void 0?void 0:i.Pa())!==null&&r!==void 0?r:"")!==e?[]:(o=(s=t.da)===null||s===void 0?void 0:s.call(t,n))!==null&&o!==void 0?o:[]}}function Jy(n,e,t,i){if(!n.length)return;let r=0;const s=t/2,o=n[0].At(i,!0);let a=e===1?s-(n[0].Vi()-o/2):n[0].Vi()-o/2-s;a=Math.max(0,a);for(let l=1;l<n.length;l++){const c=n[l],h=n[l-1],d=h.At(i,!1),p=c.Vi(),g=h.Vi();if(e===1?p>g-d:p<g+d){const y=g-d*e;c.Oi(y);const _=y-e*d/2;if((e===1?_<0:_>t)&&a>0){const b=e===1?-1-_:_-t,v=Math.min(b,a);for(let w=r;w<n.length;w++)n[w].Oi(n[w].Vi()+e*v);a-=v}}else r=l,a=e===1?g-d-p:p-(g+d)}}class Zy{constructor(e,t,i,r){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new ya(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=t,this.ko=t.layout,this.Oc=i,this.qv=r==="left",this.Yv=Od("normal",r),this.Zv=Od("top",r),this.Xv=Od("bottom",r),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=_r(this.Kv,be({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=_r(this.Kv,be({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new jm(this.Jv.canvasElement,a,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),wr(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),wr(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const t=this.ap(),i=z(this.Gv.canvasElement.getContext("2d"));i.save();const r=this.Li.Ha();i.font=this._p(),r.length>0&&(e=Math.max(this.Fv.xi(i,r[0].so),this.Fv.xi(i,r[r.length-1].so)));const s=this.up();for(let c=s.length;c--;){const h=this.Fv.xi(i,s[c].Kt());h>e&&(e=h)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(a=this.cn.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Li.pn(1,o),h=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(i,this.Li.Fi(Math.floor(Math.min(c,h))+.11111111111111,o)),this.Fv.xi(i,this.Li.Fi(Math.ceil(Math.max(c,h))-.11111111111111,o)))}var a;i.restore();const l=e||34;return ip(Math.ceil(t.C+t.T+t.A+t.I+5+l))}cp(e){this.Ev!==null&&cr(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return z(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,z(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const i=vr(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)}),this.tn.bp(i,this.Xv),this.wp(i),this.tn.bp(i,this.Yv),this.gp(i))}this.Jv.applySuggestedBitmapSize();const t=vr(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:i,bitmapSize:r})=>{i.clearRect(0,0,r.width,r.height)}),this.Mp(t),this.tn.bp(t,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!0,t.V_(i,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),i=this.tn.fp(),r=this.Li;t.O_(i,r,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),t=this.tn.fp(),i=this.Li;this.Nv&&(this.Nv=!1,e.B_(t,i))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),i=this.tn.fp();this.Nv=!1,t.B_(i,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],t=this.Li===null?void 0:this.Li;return(i=>{for(let r=0;r<i.length;++r){const s=i[r].Rn(this.tn.fp(),t);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:t}){const{width:i,height:r}=t,s=this.tn.fp().$t(),o=s.q(),a=s.bd();o===a?jc(e,0,0,i,r,o):CS(e,0,0,i,r,o,a)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:i}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const r=Math.max(1,Math.floor(this.ap().C*i));let s;s=this.qv?t.width-r:0,e.fillRect(s,0,r,t.height)}wp(e){if(this.Ev===null||this.Li===null)return;const t=this.Li.Ha(),i=this.Li.W(),r=this.ap(),s=this.qv?this.Ev.width-r.T:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=i.borderColor;const c=Math.max(1,Math.floor(l)),h=Math.floor(.5*l),d=Math.round(r.T*a);o.beginPath();for(const p of t)o.rect(Math.floor(s*a),Math.round(p.Ea*l)-h,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var a;o.font=this._p(),o.fillStyle=(a=i.textColor)!==null&&a!==void 0?a:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const l=this.qv?Math.round(s-r.A):Math.round(s+r.T+r.A),c=t.map(h=>this.Fv.Mi(o,h.so));for(let h=t.length;h--;){const d=t[h];o.fillText(d.so,l,d.Ea+c[h])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],t=this.Li.Uo().slice(),i=this.tn.fp(),r=this.ap();this.Li===i.pr()&&this.tn.fp().Uo().forEach(o=>{i.vr(o)&&t.push(o)});const s=this.Li;t.forEach(o=>{o.Rn(i,s).forEach(a=>{a.Oi(null),a.Bi()&&e.push(a)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,r)}yp(e,t){if(this.Ev===null)return;const i=this.Ev.height/2,r=e.filter(o=>o.ki()<=i),s=e.filter(o=>o.ki()>i);r.sort((o,a)=>a.ki()-o.ki()),s.sort((o,a)=>o.ki()-a.ki());for(const o of e){const a=Math.floor(o.At(t)/2),l=o.ki();l>-a&&l<a&&o.Oi(a),l>this.Ev.height-a&&l<this.Ev.height+a&&o.Oi(this.Ev.height-a)}Jy(r,1,this.Ev.height,t),Jy(s,-1,this.Ev.height,t)}gp(e){if(this.Ev===null)return;const t=this.up(),i=this.ap(),r=this.qv?"right":"left";t.forEach(s=>{s.Ai()&&s.gt(z(this.Li)).X(e,i,this.Fv,r)})}Mp(e){if(this.Ev===null||this.Li===null)return;const t=this.tn.$v().$t(),i=[],r=this.tn.fp(),s=t.Zc().Rn(r,this.Li);s.length&&i.push(s);const o=this.ap(),a=this.qv?"right":"left";i.forEach(l=>{l.forEach(c=>{c.gt(z(this.Li)).X(e,o,this.Fv,a)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return Rs(this.ko.fontSize,this.ko.fontFamily)}}function Hx(n,e){var t,i;return(i=(t=n.ua)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}function Ul(n,e){var t,i;return(i=(t=n.Pn)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}function qx(n,e){var t,i;return(i=(t=n.Ji)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}function Kx(n,e){var t,i;return(i=(t=n.aa)===null||t===void 0?void 0:t.call(n,e))!==null&&i!==void 0?i:[]}class Wm{constructor(e,t){this.Ev=be({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new ze,this.Op=new ze,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=t,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(i),this.Gv=_r(i,be({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=_r(i,be({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new jm(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),wr(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),wr(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return z(this.Np)}qp(e){var t,i;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(Wm.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(t=this.Pp)!==null&&t!==void 0?t:new Bx(this.Wp,this.Qd),this.Pp.bt()):((i=this.Pp)===null||i===void 0||i.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(z(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(z(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const t=e.localX,i=e.localY;this.Gp(t,i,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var t;if(!this.Np)return;this.Kp();const i=e.localX,r=e.localY;this.Gp(i,r,e);const s=this.wr(i,r);this.Qd.Qp((t=s==null?void 0:s.Lv)!==null&&t!==void 0?t:null),this.$i().jc(s&&{Hc:s.Hc,Iv:s.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const t={x:e.localX,y:e.localY};this.rm(t,t,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,t){if(!this.Qd.W().handleScale.pinch)return;const i=5*(t-this.Bp);this.Bp=t,this.$i().Qc(e.nt,i)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const t=this.$i().Zc();this.Ip!==null&&t.yt()&&(this.Lp={x:t.Yt(),y:t.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const t=e.localX,i=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const r=z(this.Lp),s=r.x+(t-this.Ip.x),o=r.y+(i-this.Ip.y);this.Gp(s,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,t){const i=this.Np;return i===null?null:function(r,s,o){const a=r.Uo(),l=function(c,h,d){var p,g;let y,_;for(const w of c){const I=(g=(p=w.va)===null||p===void 0?void 0:p.call(w,h,d))!==null&&g!==void 0?g:[];for(const A of I)b=A.zOrder,(!(v=y==null?void 0:y.zOrder)||b==="top"&&v!=="top"||b==="normal"&&v==="bottom")&&(y=A,_=w)}var b,v;return y&&_?{zv:y,Hc:_}:null}(a,s,o);if((l==null?void 0:l.zv.zOrder)==="top")return $l(l);for(const c of a){if(l&&l.Hc===c&&l.zv.zOrder!=="bottom"&&!l.zv.isBackground)return $l(l);const h=Wx(c.Pn(r),s,o);if(h!==null)return{Hc:c,Bv:h.Bv,Iv:h.Iv};if(l&&l.Hc===c&&l.zv.zOrder!=="bottom"&&l.zv.isBackground)return $l(l)}return l!=null&&l.zv?$l(l):null}(i,e,t)}_m(e,t){z(t==="left"?this.Cp:this.Tp).cp(be({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){cr(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=z(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const t of e.Ba())if(e.vr(t)){const i=t.Dt();i!==null&&e.P_(i),t.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const i=vr(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(r=>{this.mp(r)}),this.Np&&(this.fm(i,Hx),this.vm(i),this.pm(i),this.fm(i,Ul),this.fm(i,qx)))}this.Jv.applySuggestedBitmapSize();const t=vr(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:i,bitmapSize:r})=>{i.clearRect(0,0,r.width,r.height)}),this.bm(t),this.fm(t,Kx))}wm(){return this.Cp}gm(){return this.Tp}bp(e,t){this.fm(e,t)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,t){const i=t.localX,r=t.localY;e.M()&&e.m(this.$i().St().Nu(i),{x:i,y:r},t)}mp({context:e,bitmapSize:t}){const{width:i,height:r}=t,s=this.$i(),o=s.q(),a=s.bd();o===a?jc(e,0,0,i,r,a):CS(e,0,0,i,r,o,a)}vm(e){const t=z(this.Np).j_().qh().gt();t!==null&&t.X(e,!1)}pm(e){const t=this.$i().Yc();this.Mm(e,Ul,rp,t),this.Mm(e,Ul,du,t)}bm(e){this.Mm(e,Ul,du,this.$i().Zc())}fm(e,t){const i=z(this.Np).Uo();for(const r of i)this.Mm(e,t,rp,r);for(const r of i)this.Mm(e,t,du,r)}Mm(e,t,i,r){const s=z(this.Np),o=s.$t().Wc(),a=o!==null&&o.Hc===r,l=o!==null&&a&&o.Iv!==void 0?o.Iv.Mr:void 0;sp(t,c=>i(c,e,a,l),r,s)}Zp(){if(this.Np===null)return;const e=this.Qd,t=this.Np.R_().W().visible,i=this.Np.D_().W().visible;t||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),i||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const r=e.$t().ud();t&&this.Cp===null&&(this.Cp=new Zy(this,e.W(),r,"left"),this.jp.appendChild(this.Cp.lp())),i&&this.Tp===null&&(this.Tp=new Zy(this,e.W(),r,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,t,i){this.$i().ld(this.Sm(e),this.km(t),i,z(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,t,i){this.Ip=e,this.zp=!1,this.Gp(t.x,t.y,i);const r=this.$i().Zc();this.Lp={x:r.Yt(),y:r.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const t=this.$i(),i=this.fp();if(t.z_(i,i.vn()),this.Rp=null,this.Dp=!1,t.ed(),this.Ep!==null){const r=performance.now(),s=t.St();this.Ep.Vr(s.Hu(),r),this.Ep.Qu(r)||t.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)z(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const t=this.$i(),i=t.St();if(i.Ni())return;const r=this.Qd.W(),s=r.handleScroll,o=r.kineticScroll;if((!s.pressedMouseMove||e.Dv)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Dv))return;const a=this.Np.vn(),l=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:l,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const c=i.le();this.Ep=new Ux(.2/c,7/c,.997,15/c),this.Ep.Yd(i.Hu(),this.Rp.Od)}else this.Ep=null;a.Ni()||t.A_(this.Np,a,e.localY),t.nd(e.localX),this.Dp=!0}this.Dp&&(a.Ni()||t.I_(this.Np,a,e.localY),t.sd(e.localX),this.Ep!==null&&this.Ep.Yd(i.Hu(),l))}}class e_{constructor(e,t,i,r,s){this.ft=!0,this.Ev=be({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=i.ud,this.cn=t,this.Tm=r,this.Pm=s,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=_r(this.Kv,be({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),wr(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){cr(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const t=vr(this.Gv);t!==null&&t.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)})}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const s=Math.floor(this.Oc.W().C*i),o=Math.floor(this.Oc.W().C*r),a=this.qv?t.width-s:0;e.fillRect(a,0,s,o)}mp({context:e,bitmapSize:t}){jc(e,0,0,t.width,t.height,this.Pm())}}function Hm(n){return e=>{var t,i;return(i=(t=e.fa)===null||t===void 0?void 0:t.call(e,n))!==null&&i!==void 0?i:[]}}const Gx=Hm("normal"),Qx=Hm("top"),Xx=Hm("bottom");class Yx{constructor(e,t){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=be({width:0,height:0}),this.Om=new ze,this.Fv=new ya(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=t,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=_r(this.Im,be({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=_r(this.Im,be({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const r=this.Jv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new jm(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),wr(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),wr(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,t,i){cr(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(be({width:t,height:e.height})),this.Dm!==null&&this.Dm.cp(be({width:i,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,t,i){const r=this.xp();r.width>0&&r.height>0&&e.drawImage(this.Gv.canvasElement,t,i)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const i=vr(this.Gv);i!==null&&(i.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r),this.$m(i,Xx)}),this.wp(i),this.$m(i,Gx)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const t=vr(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:i,bitmapSize:r})=>{i.clearRect(0,0,r.width,r.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],t),this.$m(t,Qx))}$m(e,t){const i=this.Qd.$t().wt();for(const r of i)sp(t,s=>rp(s,e,!1,void 0),r,void 0);for(const r of i)sp(t,s=>du(s,e,!1,void 0),r,void 0)}mp({context:e,bitmapSize:t}){jc(e,0,0,t.width,t.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:t,verticalPixelRatio:i}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const r=Math.max(1,Math.floor(this.jm().C*i));e.fillRect(0,0,t.width,r)}}wp(e){const t=this.Qd.$t().St(),i=t.Ha();if(!i||i.length===0)return;const r=this.q_.maxTickMarkWeight(i),s=this.jm(),o=t.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.qm(),a.fillStyle=this.qm();const h=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const p=Math.round(s.T*c);for(let g=i.length;g--;){const y=Math.round(i[g].coord*l);a.rect(y-d,0,h,p)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=s.C+s.T+s.L+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this._p();for(const c of i)if(c.weight<r){const h=c.needAlignCoordinate?this.Ym(a,c.coord,c.label):c.coord;a.fillText(c.label,h,l)}this.Qd.W().timeScale.allowBoldLabels&&(a.font=this.Zm());for(const c of i)if(c.weight>=r){const h=c.needAlignCoordinate?this.Ym(a,c.coord,c.label):c.coord;a.fillText(c.label,h,l)}})}Ym(e,t,i){const r=this.Fv.xi(e,i),s=r/2,o=Math.floor(t-s)+.5;return o<0?t+=Math.abs(0-o):o+r>this.Ev.width&&(t-=Math.abs(this.Ev.width-(o+r))),t}Um(e,t){const i=this.jm();for(const r of e)for(const s of r.Qi())s.gt().X(t,i)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return Rs(this.j(),this.cn.fontFamily)}Zm(){return Rs(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new ya,Hm:0});const e=this.k,t=this._p();if(e.R!==t){const i=this.j();e.P=i,e.R=t,e.L=3*i/12,e.B=3*i/12,e.ji=9*i/12,e.N=0,e.Hm=4*i/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),t=e.W();t.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),t.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const i={ud:this.Qd.$t().ud()},r=()=>t.leftPriceScale.borderVisible&&e.St().W().borderVisible,s=()=>e.bd();t.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new e_("left",t,i,r,s),this.Bm.appendChild(this.Rm.lp())),t.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new e_("right",t,i,r,s),this.Am.appendChild(this.Dm.lp()))}}const Jx=!!Ps&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Ps&&(!((Vd=navigator==null?void 0:navigator.userAgentData)===null||Vd===void 0)&&Vd.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Vd;class Zx{constructor(e,t,i){var r;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new ze,this.Op=new ze,this.Rc=new ze,this.ib=null,this.nb=null,this.Jd=e,this.cn=t,this.q_=i,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(r=this.Xd).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),Dd(this.cn)&&this.hb(!0),this.$i=new Nx(this.Vc.bind(this),this.cn,i),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new Yx(this,this.q_),this.sb.appendChild(this.ab.lp());const s=t.autoSize&&this.ob();let o=this.cn.width,a=this.cn.height;if(s||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this._b(o,a),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],z(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,t,i=!1){if(this.ho===t&&this.__===e)return;const r=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return be({width:l-l%2,height:c-c%2})}(be({width:e,height:t}));this.ho=r.height,this.__=r.width;const s=this.ho+"px",o=this.__+"px";z(this.Xd).style.height=s,z(this.Xd).style.width=o,this.sb.style.height=s,this.sb.style.width=o,i?this.mb(it.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=it.es());for(let t=0;t<this.Xm.length;t++)this.Xm[t].vp(e.Hn(t).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const t=Dd(this.cn);this.$i.$h(e);const i=Dd(this.cn);i!==t&&this.hb(i),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const i=z(t.getContext("2d"));return this.gb(i),t}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:z(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Rt(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let t=0,i=0;const r=this.Xm[0],s=(a,l)=>{let c=0;for(let h=0;h<this.Xm.length;h++){const d=this.Xm[h],p=z(a==="left"?d.wm():d.gm()),g=p.xp();e!==null&&p.Sp(e,l,c),c+=g.height}};this.xb()&&(s("left",0),t+=z(r.wm()).xp().width);for(let a=0;a<this.Xm.length;a++){const l=this.Xm[a],c=l.xp();e!==null&&l.Sp(e,t,i),i+=c.height}t+=r.xp().width,this.Sb()&&(s("right",t),t+=z(r.gm()).xp().width);const o=(a,l,c)=>{z(a==="left"?this.ab.Lm():this.ab.Em()).Sp(z(e),l,c)};if(this.cn.timeScale.visible){const a=this.ab.xp();if(e!==null){let l=0;this.xb()&&(o("left",l,i),l=z(r.wm()).xp().width),this.ab.Sp(e,l,i),l+=a.width,this.Sb()&&o("right",l,i)}i+=a.height}return be({width:t,height:i})}Pb(){let e=0,t=0,i=0;for(const y of this.Xm)this.xb()&&(t=Math.max(t,z(y.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(i=Math.max(i,z(y.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=y.M_();t=ip(t),i=ip(i);const r=this.__,s=this.ho,o=Math.max(r-t-i,0),a=this.cn.timeScale.visible;let l=a?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const h=0+l,d=s<h?0:s-h,p=d/e;let g=0;for(let y=0;y<this.Xm.length;++y){const _=this.Xm[y];_.qp(this.$i.qc()[y]);let b=0,v=0;v=y===this.Xm.length-1?d-g:Math.round(_.M_()*p),b=Math.max(v,2),g+=b,_.cp(be({width:o,height:b})),this.xb()&&_._m(t,"left"),this.Sb()&&_._m(i,"right"),_.fp()&&this.$i.Kc(_.fp(),b)}this.ab.Fm(be({width:a?o:0,height:l}),a?t:0,a?i:0),this.$i.S_(o),this.Gm!==t&&(this.Gm=t),this.Jm!==i&&(this.Jm=i)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return Jx?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const t=this.Rb(e),i=t*e.deltaX/100,r=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.cn.handleScale.mouseWheel){const s=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,s)}i!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*i)}mb(e,t){var i;const r=e.jn();r===3&&this.Db(),r!==3&&r!==2||(this.Vb(e),this.Ob(e,t),this.ab.bt(),this.Xm.forEach(s=>{s.Xp()}),((i=this.Qm)===null||i===void 0?void 0:i.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,t),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,t){for(const i of e.Qn())this.ns(i,t)}Vb(e){const t=this.$i.qc();for(let i=0;i<t.length;i++)e.Hn(i).Wn&&t[i].N_()}ns(e,t){const i=this.$i.St();switch(e.qn){case 0:i.hc();break;case 1:i.lc(e.Vt);break;case 2:i.Gn(e.Vt);break;case 3:i.Jn(e.Vt);break;case 4:i.qu();break;case 5:e.Vt.Qu(t)||i.Jn(e.Vt.tc(t))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(t=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const i=this.Qm;this.Qm=null,this.mb(i,t);for(const r of i.Qn())if(r.qn===5&&!r.Vt.Qu(t)){this.$t().Zn(r.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),t=e.length,i=this.Xm.length;for(let r=t;r<i;r++){const s=Rt(this.Xm.pop());this.sb.removeChild(s.lp()),s.lm().p(this),s.am().p(this),s.S()}for(let r=i;r<t;r++){const s=new Wm(this,e[r]);s.lm().l(this.Bb.bind(this),this),s.am().l(this.Ab.bind(this),this),this.Xm.push(s),this.sb.insertBefore(s.lp(),this.ab.lp())}for(let r=0;r<t;r++){const s=e[r],o=this.Xm[r];o.fp()!==s?o.qp(s):o.Up()}this.cb(),this.Pb()}Ib(e,t,i){var r;const s=new Map;e!==null&&this.$i.wt().forEach(h=>{const d=h.In().ll(e);d!==null&&s.set(h,d)});let o;if(e!==null){const h=(r=this.$i.St().Ui(e))===null||r===void 0?void 0:r.originalTime;h!==void 0&&(o=h)}const a=this.$t().Wc(),l=a!==null&&a.Hc instanceof Um?a.Hc:void 0,c=a!==null&&a.Iv!==void 0?a.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:t??void 0,Eb:l,Nb:s,Fb:c,Wb:i??void 0}}Bb(e,t,i){this.Vp.m(()=>this.Ib(e,t,i))}Ab(e,t,i){this.Op.m(()=>this.Ib(e,t,i))}lb(e,t,i){this.Rc.m(()=>this.Ib(e,t,i))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const t=e.find(i=>i.target===this.Jd);t&&this._b(t.contentRect.width,t.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function Dd(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function e2(n){return function(e){return e.open!==void 0}(n)||function(e){return e.value!==void 0}(n)}function HS(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function t_(n,e,t,i){const r=t.value,s={ee:e,ot:n,Vt:[r,r,r,r],zb:i};return t.color!==void 0&&(s.V=t.color),s}function t2(n,e,t,i){const r=t.value,s={ee:e,ot:n,Vt:[r,r,r,r],zb:i};return t.lineColor!==void 0&&(s.lt=t.lineColor),t.topColor!==void 0&&(s.Ps=t.topColor),t.bottomColor!==void 0&&(s.Rs=t.bottomColor),s}function n2(n,e,t,i){const r=t.value,s={ee:e,ot:n,Vt:[r,r,r,r],zb:i};return t.topLineColor!==void 0&&(s.Re=t.topLineColor),t.bottomLineColor!==void 0&&(s.De=t.bottomLineColor),t.topFillColor1!==void 0&&(s.ke=t.topFillColor1),t.topFillColor2!==void 0&&(s.ye=t.topFillColor2),t.bottomFillColor1!==void 0&&(s.Ce=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(s.Te=t.bottomFillColor2),s}function i2(n,e,t,i){const r={ee:e,ot:n,Vt:[t.open,t.high,t.low,t.close],zb:i};return t.color!==void 0&&(r.V=t.color),r}function r2(n,e,t,i){const r={ee:e,ot:n,Vt:[t.open,t.high,t.low,t.close],zb:i};return t.color!==void 0&&(r.V=t.color),t.borderColor!==void 0&&(r.Ot=t.borderColor),t.wickColor!==void 0&&(r.Xh=t.wickColor),r}function s2(n,e,t,i,r){const s=Rt(r)(t),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],h=t,{time:d,color:p}=h;return{ee:e,ot:n,Vt:c,zb:i,$e:HS(h,["time","color"]),V:p}}function Bl(n){return n.Vt!==void 0}function n_(n,e){return e.customValues!==void 0&&(n.jb=e.customValues),n}function Zi(n){return(e,t,i,r,s,o)=>function(a,l){return l?l(a):(c=a).open===void 0&&c.value===void 0;var c}(i,o)?n_({ot:e,ee:t,zb:r},i):n_(n(e,t,i,r,s),i)}function i_(n){return{Candlestick:Zi(r2),Bar:Zi(i2),Area:Zi(t2),Baseline:Zi(n2),Histogram:Zi(t_),Line:Zi(t_),Custom:Zi(s2)}[n]}function r_(n){return{ee:0,Hb:new Map,la:n}}function s_(n,e){if(n!==void 0&&n.length!==0)return{$b:e.key(n[0].ot),Ub:e.key(n[n.length-1].ot)}}function o_(n){let e;return n.forEach(t=>{e===void 0&&(e=t.zb)}),Rt(e)}class o2{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,t){let i=this.qb.size!==0,r=!1;const s=this.Yb.get(e);if(s!==void 0)if(this.Yb.size===1)i=!1,r=!0,this.qb.clear();else for(const l of this.Xb)l.pointData.Hb.delete(e)&&(r=!0);let o=[];if(t.length!==0){const l=t.map(g=>g.time),c=this.q_.createConverterToInternalObj(t),h=i_(e.Qh()),d=e.Ca(),p=e.Ta();o=t.map((g,y)=>{const _=c(g.time),b=this.q_.key(_);let v=this.qb.get(b);v===void 0&&(v=r_(_),this.qb.set(b,v),r=!0);const w=h(_,v.ee,g,l[y],d,p);return v.Hb.set(e,w),w})}i&&this.Gb(),this.Jb(e,o);let a=-1;if(r){const l=[];this.qb.forEach(c=>{l.push({timeWeight:0,time:c.la,pointData:c,originalTime:o_(c.Hb)})}),l.sort((c,h)=>this.q_.key(c.time)-this.q_.key(h.time)),a=this.Qb(l)}return this.tw(e,a,function(l,c,h){const d=s_(l,h),p=s_(c,h);if(d!==void 0&&p!==void 0)return{ta:d.Ub>=p.Ub&&d.$b>=p.$b}}(this.Yb.get(e),s,this.q_))}vd(e){return this.Kb(e,[])}iw(e,t){const i=t;(function(_){_.zb===void 0&&(_.zb=_.time)})(i),this.q_.preprocessData(t);const r=this.q_.createConverterToInternalObj([t])(t.time),s=this.Zb.get(e);if(s!==void 0&&this.q_.key(r)<this.q_.key(s))throw new Error(`Cannot update oldest data, last time=${s}, new time=${r}`);let o=this.qb.get(this.q_.key(r));const a=o===void 0;o===void 0&&(o=r_(r),this.qb.set(this.q_.key(r),o));const l=i_(e.Qh()),c=e.Ca(),h=e.Ta(),d=l(r,o.ee,t,i.zb,c,h);o.Hb.set(e,d),this.nw(e,d);const p={ta:Bl(d)};if(!a)return this.tw(e,-1,p);const g={timeWeight:0,time:o.la,pointData:o,originalTime:o_(o.Hb)},y=$a(this.Xb,this.q_.key(g.time),(_,b)=>this.q_.key(_.time)<b);this.Xb.splice(y,0,g);for(let _=y;_<this.Xb.length;++_)Nd(this.Xb[_].pointData,_);return this.q_.fillWeightsForPoints(this.Xb,y),this.tw(e,y,p)}nw(e,t){let i=this.Yb.get(e);i===void 0&&(i=[],this.Yb.set(e,i));const r=i.length!==0?i[i.length-1]:null;r===null||this.q_.key(t.ot)>this.q_.key(r.ot)?Bl(t)&&i.push(t):Bl(t)?i[i.length-1]=t:i.splice(-1,1),this.Zb.set(e,t.ot)}Jb(e,t){t.length!==0?(this.Yb.set(e,t.filter(Bl)),this.Zb.set(e,t[t.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let t=-1;for(let i=0;i<this.Xb.length&&i<e.length;++i){const r=this.Xb[i],s=e[i];if(this.q_.key(r.time)!==this.q_.key(s.time)){t=i;break}s.timeWeight=r.timeWeight,Nd(s.pointData,i)}if(t===-1&&this.Xb.length!==e.length&&(t=Math.min(this.Xb.length,e.length)),t===-1)return-1;for(let i=t;i<e.length;++i)Nd(e[i].pointData,i);return this.q_.fillWeightsForPoints(e,t),this.Xb=e,t}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].ee))}),e}tw(e,t,i){const r={ew:new Map,St:{Eu:this.sw()}};if(t!==-1)this.Yb.forEach((s,o)=>{r.ew.set(o,{$e:s,rw:o===e?i:void 0})}),this.Yb.has(e)||r.ew.set(e,{$e:[],rw:i}),r.St.hw=this.Xb,r.St.lw=t;else{const s=this.Yb.get(e);r.ew.set(e,{$e:s||[],rw:i})}return r}}function Nd(n,e){n.ee=e,n.Hb.forEach(t=>{t.ee=e})}function qm(n){const e={value:n.Vt[3],time:n.zb};return n.jb!==void 0&&(e.customValues=n.jb),e}function a_(n){const e=qm(n);return n.V!==void 0&&(e.color=n.V),e}function a2(n){const e=qm(n);return n.lt!==void 0&&(e.lineColor=n.lt),n.Ps!==void 0&&(e.topColor=n.Ps),n.Rs!==void 0&&(e.bottomColor=n.Rs),e}function l2(n){const e=qm(n);return n.Re!==void 0&&(e.topLineColor=n.Re),n.De!==void 0&&(e.bottomLineColor=n.De),n.ke!==void 0&&(e.topFillColor1=n.ke),n.ye!==void 0&&(e.topFillColor2=n.ye),n.Ce!==void 0&&(e.bottomFillColor1=n.Ce),n.Te!==void 0&&(e.bottomFillColor2=n.Te),e}function qS(n){const e={open:n.Vt[0],high:n.Vt[1],low:n.Vt[2],close:n.Vt[3],time:n.zb};return n.jb!==void 0&&(e.customValues=n.jb),e}function u2(n){const e=qS(n);return n.V!==void 0&&(e.color=n.V),e}function c2(n){const e=qS(n),{V:t,Ot:i,Xh:r}=n;return t!==void 0&&(e.color=t),i!==void 0&&(e.borderColor=i),r!==void 0&&(e.wickColor=r),e}function op(n){return{Area:a2,Line:a_,Baseline:l2,Histogram:a_,Bar:u2,Candlestick:c2,Custom:h2}[n]}function h2(n){const e=n.zb;return Object.assign(Object.assign({},n.$e),{time:e})}const d2={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},f2={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},p2={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Dm,attributionLogo:!0},Ld={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},m2={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},g2={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Dm,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function l_(){return{width:0,height:0,autoSize:!1,layout:p2,crosshair:d2,grid:f2,overlayPriceScales:Object.assign({},Ld),leftPriceScale:Object.assign(Object.assign({},Ld),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},Ld),{visible:!0}),timeScale:m2,watermark:g2,localization:{locale:Ps?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class v2{constructor(e,t){this.aw=e,this.ow=t}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Hc(this.ow)?this.aw.Mb(this.ow):0}Li(){return z(this.aw.$t().Uc(this.ow)).Dt}}function u_(n,e,t){const i=HS(n,["time","originalTime"]),r=Object.assign({time:e},i);return t!==void 0&&(r.originalTime=t),r}const y2={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class _2{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}let w2=class{constructor(e,t,i,r,s){this.uw=new ze,this.Es=e,this.cw=t,this.dw=i,this.q_=s,this.fw=r}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().Rt(e,t.Vt)}coordinateToPrice(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().pn(e,t.Vt)}barsInLogicalRange(e){if(e===null)return null;const t=new ps(new Wo(e.from,e.to)).lu(),i=this.Es.In();if(i.Ni())return null;const r=i.ll(t.Os(),1),s=i.ll(t.ui(),-1),o=z(i.el()),a=z(i.An());if(r!==null&&s!==null&&r.ee>s.ee)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:r===null||r.ee===o?e.from-o:r.ee-o,barsAfter:s===null||s.ee===a?a-e.to:a-s.ee};return r!==null&&s!==null&&(l.from=r.zb,l.to=s.zb),l}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,t){const i=this.Es.In().ll(e,t);return i===null?null:op(this.seriesType())(i)}data(){const e=op(this.seriesType());return this.Es.In().ne().map(t=>e(t))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const t=e.map(i=>u_(i,this.q_.convertHorzItemToInternal(i.time),i.time));this.Es.na(t)}markers(){return this.Es.sa().map(e=>u_(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return $n(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const t=mn($n(y2),e),i=this.Es.ea(t);return new _2(i)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}};class E2{constructor(e,t,i){this.ww=new ze,this.mu=new ze,this.Om=new ze,this.$i=e,this.yl=e.St(),this.ab=t,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=i}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,t){t?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},i=this.yl.Iu(t);this.$i.pd(i)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){$i(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const t=this.$i.St();return t.Ni()?null:t.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const t=this.q_.convertHorzItemToInternal(e),i=this.yl.Va(t,!1);return i===null?null:this.yl.It(i)}coordinateToTime(e){const t=this.$i.St(),i=t.Nu(e),r=t.Ui(i);return r===null?null:r.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},$n(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function S2(n){if(n===void 0||n.type==="custom")return;const e=n;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(t){if(t>=1)return 0;let i=0;for(;i<8;i++){const r=Math.round(t);if(Math.abs(r-t)<1e-8)return i;t*=10}return i}(e.minMove))}function c_(n){return function(e){if(Ol(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:r}=e.handleScale;Ol(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Ol(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const t=e.handleScroll;Ol(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(n),n}class T2{constructor(e,t,i){this.Sw=new Map,this.kw=new Map,this.yw=new ze,this.Cw=new ze,this.Tw=new ze,this.Pw=new o2(t);const r=i===void 0?$n(l_()):mn($n(l_()),c_(i));this.q_=t,this.aw=new Zx(e,r,t),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const s=this.aw.$t();this.Dw=new E2(s,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,t,i){this.autoSizeActive()||this.aw._b(e,t,i)}addCustomSeries(e,t){const i=os(e),r=Object.assign(Object.assign({},ES),i.defaultOptions());return this.Vw("Custom",r,t,i)}addAreaSeries(e){return this.Vw("Area",ok,e)}addBaselineSeries(e){return this.Vw("Baseline",ak,e)}addBarSeries(e){return this.Vw("Bar",rk,e)}addCandlestickSeries(e={}){return function(t){t.borderColor!==void 0&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),t.wickColor!==void 0&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(e),this.Vw("Candlestick",ik,e)}addHistogramSeries(e){return this.Vw("Histogram",lk,e)}addLineSeries(e){return this.Vw("Line",sk,e)}removeSeries(e){const t=Rt(this.Sw.get(e)),i=this.Pw.vd(t);this.aw.$t().vd(t),this.Ow(i),this.Sw.delete(e),this.kw.delete(t)}pw(e,t){this.Ow(this.Pw.Kb(e,t))}bw(e,t){this.Ow(this.Pw.iw(e,t))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new v2(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(c_(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,t,i){const r=this.Sw.get(i);if(r===void 0)return;const s=this.aw.$t().dr(r);s!==null&&this.aw.$t().ad(e,t,s)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,t,i={},r){S2(i.priceFormat);const s=mn($n(SS),$n(t),i),o=this.aw.$t().dd(e,s,r),a=new w2(o,this,this,this,this.q_);return this.Sw.set(a,o),this.kw.set(o,a),a}Ow(e){const t=this.aw.$t();t._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((i,r)=>r.J(i.$e,i.rw)),t.Wu()}Bw(e){return Rt(this.kw.get(e))}Rw(e){const t=new Map;e.Nb.forEach((r,s)=>{const o=s.Qh(),a=op(o)(r);if(o!=="Custom")$i(e2(a));else{const l=s.Ta();$i(!l||l(a)===!1)}t.set(this.Bw(s),a)});const i=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:i,hoveredObjectId:e.Fb,seriesData:t,sourceEvent:e.Wb}}}function b2(n,e,t){let i;if(za(n)){const s=document.getElementById(n);$i(s!==null,`Cannot find element in DOM with id=${n}`),i=s}else i=n;const r=new T2(i,e,t);return e.setOptions(r.options()),r}function g3(n,e){return b2(n,new Qy,Qy.Id(e))}Object.assign(Object.assign({},SS),ES);function Er(n){"@babel/helpers - typeof";return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(n)}function I2(n,e){if(Er(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Er(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KS(n){var e=I2(n,"string");return Er(e)=="symbol"?e:e+""}function Po(n,e,t){return(e=KS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function X(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h_(Object(t),!0).forEach(function(i){Po(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function C2(n){if(Array.isArray(n))return n}function R2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(h){c=!0,r=h}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function ap(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function GS(n,e){if(n){if(typeof n=="string")return ap(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ap(n,e):void 0}}function P2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qn(n,e){return C2(n)||R2(n,e)||GS(n,e)||P2()}function A2(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function ii(n,e){if(n==null)return{};var t,i,r=A2(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var k2=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function x2(n){var e=n.defaultInputValue,t=e===void 0?"":e,i=n.defaultMenuIsOpen,r=i===void 0?!1:i,s=n.defaultValue,o=s===void 0?null:s,a=n.inputValue,l=n.menuIsOpen,c=n.onChange,h=n.onInputChange,d=n.onMenuClose,p=n.onMenuOpen,g=n.value,y=ii(n,k2),_=O.useState(a!==void 0?a:t),b=qn(_,2),v=b[0],w=b[1],I=O.useState(l!==void 0?l:r),A=qn(I,2),V=A[0],N=A[1],T=O.useState(g!==void 0?g:o),E=qn(T,2),C=E[0],R=E[1],k=O.useCallback(function(U,q){typeof c=="function"&&c(U,q),R(U)},[c]),x=O.useCallback(function(U,q){var G;typeof h=="function"&&(G=h(U,q)),w(G!==void 0?G:U)},[h]),P=O.useCallback(function(){typeof p=="function"&&p(),N(!0)},[p]),we=O.useCallback(function(){typeof d=="function"&&d(),N(!1)},[d]),me=a!==void 0?a:v,pe=l!==void 0?l:V,Pe=g!==void 0?g:C;return X(X({},y),{},{inputValue:me,menuIsOpen:pe,onChange:k,onInputChange:x,onMenuClose:we,onMenuOpen:P,value:Pe})}function Y(){return Y=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Y.apply(null,arguments)}function M2(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function d_(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,KS(i.key),i)}}function O2(n,e,t){return e&&d_(n.prototype,e),t&&d_(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function lp(n,e){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},lp(n,e)}function V2(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&lp(n,e)}function ec(n){return ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ec(n)}function QS(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QS=function(){return!!n})()}function D2(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function N2(n,e){if(e&&(Er(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D2(n)}function L2(n){var e=QS();return function(){var t,i=ec(n);if(e){var r=ec(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return N2(this,t)}}function F2(n){if(Array.isArray(n))return ap(n)}function z2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Km(n){return F2(n)||z2(n)||GS(n)||$2()}var U2=!1;function B2(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function j2(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var W2=function(){function n(t){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=t.speedy===void 0?!U2:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(j2(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=B2(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},n}(),vt="-ms-",tc="-moz-",de="-webkit-",XS="comm",Gm="rule",Qm="decl",H2="@import",YS="@keyframes",q2="@layer",K2=Math.abs,Gc=String.fromCharCode,G2=Object.assign;function Q2(n,e){return st(n,0)^45?(((e<<2^st(n,0))<<2^st(n,1))<<2^st(n,2))<<2^st(n,3):0}function JS(n){return n.trim()}function X2(n,e){return(n=e.exec(n))?n[0]:n}function fe(n,e,t){return n.replace(e,t)}function up(n,e){return n.indexOf(e)}function st(n,e){return n.charCodeAt(e)|0}function wa(n,e,t){return n.slice(e,t)}function En(n){return n.length}function Xm(n){return n.length}function jl(n,e){return e.push(n),n}function Y2(n,e){return n.map(e).join("")}var Qc=1,As=1,ZS=0,Nt=0,Ue=0,Bs="";function Xc(n,e,t,i,r,s,o){return{value:n,root:e,parent:t,type:i,props:r,children:s,line:Qc,column:As,length:o,return:""}}function Eo(n,e){return G2(Xc("",null,null,"",null,null,0),n,{length:-n.length},e)}function J2(){return Ue}function Z2(){return Ue=Nt>0?st(Bs,--Nt):0,As--,Ue===10&&(As=1,Qc--),Ue}function Bt(){return Ue=Nt<ZS?st(Bs,Nt++):0,As++,Ue===10&&(As=1,Qc++),Ue}function Pn(){return st(Bs,Nt)}function fu(){return Nt}function Ua(n,e){return wa(Bs,n,e)}function Ea(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eT(n){return Qc=As=1,ZS=En(Bs=n),Nt=0,[]}function tT(n){return Bs="",n}function pu(n){return JS(Ua(Nt-1,cp(n===91?n+2:n===40?n+1:n)))}function eM(n){for(;(Ue=Pn())&&Ue<33;)Bt();return Ea(n)>2||Ea(Ue)>3?"":" "}function tM(n,e){for(;--e&&Bt()&&!(Ue<48||Ue>102||Ue>57&&Ue<65||Ue>70&&Ue<97););return Ua(n,fu()+(e<6&&Pn()==32&&Bt()==32))}function cp(n){for(;Bt();)switch(Ue){case n:return Nt;case 34:case 39:n!==34&&n!==39&&cp(Ue);break;case 40:n===41&&cp(n);break;case 92:Bt();break}return Nt}function nM(n,e){for(;Bt()&&n+Ue!==47+10;)if(n+Ue===42+42&&Pn()===47)break;return"/*"+Ua(e,Nt-1)+"*"+Gc(n===47?n:Bt())}function iM(n){for(;!Ea(Pn());)Bt();return Ua(n,Nt)}function rM(n){return tT(mu("",null,null,null,[""],n=eT(n),0,[0],n))}function mu(n,e,t,i,r,s,o,a,l){for(var c=0,h=0,d=o,p=0,g=0,y=0,_=1,b=1,v=1,w=0,I="",A=r,V=s,N=i,T=I;b;)switch(y=w,w=Bt()){case 40:if(y!=108&&st(T,d-1)==58){up(T+=fe(pu(w),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:T+=pu(w);break;case 9:case 10:case 13:case 32:T+=eM(y);break;case 92:T+=tM(fu()-1,7);continue;case 47:switch(Pn()){case 42:case 47:jl(sM(nM(Bt(),fu()),e,t),l);break;default:T+="/"}break;case 123*_:a[c++]=En(T)*v;case 125*_:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+h:v==-1&&(T=fe(T,/\f/g,"")),g>0&&En(T)-d&&jl(g>32?p_(T+";",i,t,d-1):p_(fe(T," ","")+";",i,t,d-2),l);break;case 59:T+=";";default:if(jl(N=f_(T,e,t,c,h,r,a,I,A=[],V=[],d),s),w===123)if(h===0)mu(T,e,N,N,A,s,d,a,V);else switch(p===99&&st(T,3)===110?100:p){case 100:case 108:case 109:case 115:mu(n,N,N,i&&jl(f_(n,N,N,0,0,r,a,I,r,A=[],d),V),r,V,d,a,i?A:V);break;default:mu(T,N,N,N,[""],V,0,a,V)}}c=h=g=0,_=v=1,I=T="",d=o;break;case 58:d=1+En(T),g=y;default:if(_<1){if(w==123)--_;else if(w==125&&_++==0&&Z2()==125)continue}switch(T+=Gc(w),w*_){case 38:v=h>0?1:(T+="\f",-1);break;case 44:a[c++]=(En(T)-1)*v,v=1;break;case 64:Pn()===45&&(T+=pu(Bt())),p=Pn(),h=d=En(I=T+=iM(fu())),w++;break;case 45:y===45&&En(T)==2&&(_=0)}}return s}function f_(n,e,t,i,r,s,o,a,l,c,h){for(var d=r-1,p=r===0?s:[""],g=Xm(p),y=0,_=0,b=0;y<i;++y)for(var v=0,w=wa(n,d+1,d=K2(_=o[y])),I=n;v<g;++v)(I=JS(_>0?p[v]+" "+w:fe(w,/&\f/g,p[v])))&&(l[b++]=I);return Xc(n,e,t,r===0?Gm:a,l,c,h)}function sM(n,e,t){return Xc(n,e,t,XS,Gc(J2()),wa(n,2,-2),0)}function p_(n,e,t,i){return Xc(n,e,t,Qm,wa(n,0,i),wa(n,i+1,-1),i)}function ms(n,e){for(var t="",i=Xm(n),r=0;r<i;r++)t+=e(n[r],r,n,e)||"";return t}function oM(n,e,t,i){switch(n.type){case q2:if(n.children.length)break;case H2:case Qm:return n.return=n.return||n.value;case XS:return"";case YS:return n.return=n.value+"{"+ms(n.children,i)+"}";case Gm:n.value=n.props.join(",")}return En(t=ms(n.children,i))?n.return=n.value+"{"+t+"}":""}function aM(n){var e=Xm(n);return function(t,i,r,s){for(var o="",a=0;a<e;a++)o+=n[a](t,i,r,s)||"";return o}}function lM(n){return function(e){e.root||(e=e.return)&&n(e)}}function uM(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var cM=function(e,t,i){for(var r=0,s=0;r=s,s=Pn(),r===38&&s===12&&(t[i]=1),!Ea(s);)Bt();return Ua(e,Nt)},hM=function(e,t){var i=-1,r=44;do switch(Ea(r)){case 0:r===38&&Pn()===12&&(t[i]=1),e[i]+=cM(Nt-1,t,i);break;case 2:e[i]+=pu(r);break;case 4:if(r===44){e[++i]=Pn()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=Gc(r)}while(r=Bt());return e},dM=function(e,t){return tT(hM(eT(e),t))},m_=new WeakMap,fM=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!m_.get(i))&&!r){m_.set(e,!0);for(var s=[],o=dM(t,s),a=i.props,l=0,c=0;l<o.length;l++)for(var h=0;h<a.length;h++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[h]):a[h]+" "+o[l]}}},pM=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function nT(n,e){switch(Q2(n,e)){case 5103:return de+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return de+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return de+n+tc+n+vt+n+n;case 6828:case 4268:return de+n+vt+n+n;case 6165:return de+n+vt+"flex-"+n+n;case 5187:return de+n+fe(n,/(\w+).+(:[^]+)/,de+"box-$1$2"+vt+"flex-$1$2")+n;case 5443:return de+n+vt+"flex-item-"+fe(n,/flex-|-self/,"")+n;case 4675:return de+n+vt+"flex-line-pack"+fe(n,/align-content|flex-|-self/,"")+n;case 5548:return de+n+vt+fe(n,"shrink","negative")+n;case 5292:return de+n+vt+fe(n,"basis","preferred-size")+n;case 6060:return de+"box-"+fe(n,"-grow","")+de+n+vt+fe(n,"grow","positive")+n;case 4554:return de+fe(n,/([^-])(transform)/g,"$1"+de+"$2")+n;case 6187:return fe(fe(fe(n,/(zoom-|grab)/,de+"$1"),/(image-set)/,de+"$1"),n,"")+n;case 5495:case 3959:return fe(n,/(image-set\([^]*)/,de+"$1$`$1");case 4968:return fe(fe(n,/(.+:)(flex-)?(.*)/,de+"box-pack:$3"+vt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+de+n+n;case 4095:case 3583:case 4068:case 2532:return fe(n,/(.+)-inline(.+)/,de+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(En(n)-1-e>6)switch(st(n,e+1)){case 109:if(st(n,e+4)!==45)break;case 102:return fe(n,/(.+:)(.+)-([^]+)/,"$1"+de+"$2-$3$1"+tc+(st(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~up(n,"stretch")?nT(fe(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(st(n,e+1)!==115)break;case 6444:switch(st(n,En(n)-3-(~up(n,"!important")&&10))){case 107:return fe(n,":",":"+de)+n;case 101:return fe(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+de+(st(n,14)===45?"inline-":"")+"box$3$1"+de+"$2$3$1"+vt+"$2box$3")+n}break;case 5936:switch(st(n,e+11)){case 114:return de+n+vt+fe(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return de+n+vt+fe(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return de+n+vt+fe(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return de+n+vt+n+n}return n}var mM=function(e,t,i,r){if(e.length>-1&&!e.return)switch(e.type){case Qm:e.return=nT(e.value,e.length);break;case YS:return ms([Eo(e,{value:fe(e.value,"@","@"+de)})],r);case Gm:if(e.length)return Y2(e.props,function(s){switch(X2(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ms([Eo(e,{props:[fe(s,/:(read-\w+)/,":"+tc+"$1")]})],r);case"::placeholder":return ms([Eo(e,{props:[fe(s,/:(plac\w+)/,":"+de+"input-$1")]}),Eo(e,{props:[fe(s,/:(plac\w+)/,":"+tc+"$1")]}),Eo(e,{props:[fe(s,/:(plac\w+)/,vt+"input-$1")]})],r)}return""})}},gM=[mM],vM=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(_){var b=_.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var r=e.stylisPlugins||gM,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(_){for(var b=_.getAttribute("data-emotion").split(" "),v=1;v<b.length;v++)s[b[v]]=!0;a.push(_)});var l,c=[fM,pM];{var h,d=[oM,lM(function(_){h.insert(_)})],p=aM(c.concat(r,d)),g=function(b){return ms(rM(b),p)};l=function(b,v,w,I){h=w,g(b?b+"{"+v.styles+"}":v.styles),I&&(y.inserted[v.name]=!0)}}var y={key:t,sheet:new W2({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return y.sheet.hydrate(a),y},iT={exports:{}},ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et=typeof Symbol=="function"&&Symbol.for,Ym=et?Symbol.for("react.element"):60103,Jm=et?Symbol.for("react.portal"):60106,Yc=et?Symbol.for("react.fragment"):60107,Jc=et?Symbol.for("react.strict_mode"):60108,Zc=et?Symbol.for("react.profiler"):60114,eh=et?Symbol.for("react.provider"):60109,th=et?Symbol.for("react.context"):60110,Zm=et?Symbol.for("react.async_mode"):60111,nh=et?Symbol.for("react.concurrent_mode"):60111,ih=et?Symbol.for("react.forward_ref"):60112,rh=et?Symbol.for("react.suspense"):60113,yM=et?Symbol.for("react.suspense_list"):60120,sh=et?Symbol.for("react.memo"):60115,oh=et?Symbol.for("react.lazy"):60116,_M=et?Symbol.for("react.block"):60121,wM=et?Symbol.for("react.fundamental"):60117,EM=et?Symbol.for("react.responder"):60118,SM=et?Symbol.for("react.scope"):60119;function qt(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case Ym:switch(n=n.type,n){case Zm:case nh:case Yc:case Zc:case Jc:case rh:return n;default:switch(n=n&&n.$$typeof,n){case th:case ih:case oh:case sh:case eh:return n;default:return e}}case Jm:return e}}}function rT(n){return qt(n)===nh}ye.AsyncMode=Zm;ye.ConcurrentMode=nh;ye.ContextConsumer=th;ye.ContextProvider=eh;ye.Element=Ym;ye.ForwardRef=ih;ye.Fragment=Yc;ye.Lazy=oh;ye.Memo=sh;ye.Portal=Jm;ye.Profiler=Zc;ye.StrictMode=Jc;ye.Suspense=rh;ye.isAsyncMode=function(n){return rT(n)||qt(n)===Zm};ye.isConcurrentMode=rT;ye.isContextConsumer=function(n){return qt(n)===th};ye.isContextProvider=function(n){return qt(n)===eh};ye.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ym};ye.isForwardRef=function(n){return qt(n)===ih};ye.isFragment=function(n){return qt(n)===Yc};ye.isLazy=function(n){return qt(n)===oh};ye.isMemo=function(n){return qt(n)===sh};ye.isPortal=function(n){return qt(n)===Jm};ye.isProfiler=function(n){return qt(n)===Zc};ye.isStrictMode=function(n){return qt(n)===Jc};ye.isSuspense=function(n){return qt(n)===rh};ye.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Yc||n===nh||n===Zc||n===Jc||n===rh||n===yM||typeof n=="object"&&n!==null&&(n.$$typeof===oh||n.$$typeof===sh||n.$$typeof===eh||n.$$typeof===th||n.$$typeof===ih||n.$$typeof===wM||n.$$typeof===EM||n.$$typeof===SM||n.$$typeof===_M)};ye.typeOf=qt;iT.exports=ye;var TM=iT.exports,sT=TM,bM={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},IM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oT={};oT[sT.ForwardRef]=bM;oT[sT.Memo]=IM;var CM=!0;function RM(n,e,t){var i="";return t.split(" ").forEach(function(r){n[r]!==void 0?e.push(n[r]+";"):r&&(i+=r+" ")}),i}var aT=function(e,t,i){var r=e.key+"-"+t.name;(i===!1||CM===!1)&&e.registered[r]===void 0&&(e.registered[r]=t.styles)},PM=function(e,t,i){aT(e,t,i);var r=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function AM(n){for(var e=0,t,i=0,r=n.length;r>=4;++i,r-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var kM={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xM=!1,MM=/[A-Z]|^ms/g,OM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lT=function(e){return e.charCodeAt(1)===45},g_=function(e){return e!=null&&typeof e!="boolean"},Fd=uM(function(n){return lT(n)?n:n.replace(MM,"-$&").toLowerCase()}),v_=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(OM,function(i,r,s){return Sn={name:r,styles:s,next:Sn},r})}return kM[e]!==1&&!lT(e)&&typeof t=="number"&&t!==0?t+"px":t},VM="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Sa(n,e,t){if(t==null)return"";var i=t;if(i.__emotion_styles!==void 0)return i;switch(typeof t){case"boolean":return"";case"object":{var r=t;if(r.anim===1)return Sn={name:r.name,styles:r.styles,next:Sn},r.name;var s=t;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Sn={name:o.name,styles:o.styles,next:Sn},o=o.next;var a=s.styles+";";return a}return DM(n,e,t)}case"function":{if(n!==void 0){var l=Sn,c=t(n);return Sn=l,Sa(n,e,c)}break}}var h=t;if(e==null)return h;var d=e[h];return d!==void 0?d:h}function DM(n,e,t){var i="";if(Array.isArray(t))for(var r=0;r<t.length;r++)i+=Sa(n,e,t[r])+";";else for(var s in t){var o=t[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?i+=s+"{"+e[a]+"}":g_(a)&&(i+=Fd(s)+":"+v_(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&xM)throw new Error(VM);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)g_(o[l])&&(i+=Fd(s)+":"+v_(s,o[l])+";");else{var c=Sa(n,e,o);switch(s){case"animation":case"animationName":{i+=Fd(s)+":"+c+";";break}default:i+=s+"{"+c+"}"}}}}return i}var y_=/label:\s*([^\s;{]+)\s*(;|$)/g,Sn;function uT(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,r="";Sn=void 0;var s=n[0];if(s==null||s.raw===void 0)i=!1,r+=Sa(t,e,s);else{var o=s;r+=o[0]}for(var a=1;a<n.length;a++)if(r+=Sa(t,e,n[a]),i){var l=s;r+=l[a]}y_.lastIndex=0;for(var c="",h;(h=y_.exec(r))!==null;)c+="-"+h[1];var d=AM(r)+c;return{name:d,styles:r,next:Sn}}var NM=function(e){return e()},LM=rf["useInsertionEffect"]?rf["useInsertionEffect"]:!1,FM=LM||NM,zM=!1,cT=O.createContext(typeof HTMLElement<"u"?vM({key:"css"}):null);cT.Provider;var $M=function(e){return O.forwardRef(function(t,i){var r=O.useContext(cT);return e(t,r,i)})},UM=O.createContext({}),eg={}.hasOwnProperty,hp="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",BM=function(e,t){var i={};for(var r in t)eg.call(t,r)&&(i[r]=t[r]);return i[hp]=e,i},jM=function(e){var t=e.cache,i=e.serialized,r=e.isStringTag;return aT(t,i,r),FM(function(){return PM(t,i,r)}),null},WM=$M(function(n,e,t){var i=n.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=n[hp],s=[i],o="";typeof n.className=="string"?o=RM(e.registered,s,n.className):n.className!=null&&(o=n.className+" ");var a=uT(s,void 0,O.useContext(UM));o+=e.key+"-"+a.name;var l={};for(var c in n)eg.call(n,c)&&c!=="css"&&c!==hp&&!zM&&(l[c]=n[c]);return l.className=o,t&&(l.ref=t),O.createElement(O.Fragment,null,O.createElement(jM,{cache:e,serialized:a,isStringTag:typeof r=="string"}),O.createElement(r,l))}),HM=WM,K=function(e,t){var i=arguments;if(t==null||!eg.call(t,"css"))return O.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=HM,s[1]=BM(e,t);for(var o=2;o<r;o++)s[o]=i[o];return O.createElement.apply(null,s)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(K||(K={}));function tg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return uT(e)}function qM(){var n=tg.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function KM(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}const GM=Math.min,QM=Math.max,nc=Math.round,Wl=Math.floor,ic=n=>({x:n,y:n});function XM(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function ah(){return typeof window<"u"}function hT(n){return fT(n)?(n.nodeName||"").toLowerCase():"#document"}function dn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function dT(n){var e;return(e=(fT(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function fT(n){return ah()?n instanceof Node||n instanceof dn(n).Node:!1}function dp(n){return ah()?n instanceof Element||n instanceof dn(n).Element:!1}function ng(n){return ah()?n instanceof HTMLElement||n instanceof dn(n).HTMLElement:!1}function __(n){return!ah()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof dn(n).ShadowRoot}function pT(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=ig(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function YM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function JM(n){return["html","body","#document"].includes(hT(n))}function ig(n){return dn(n).getComputedStyle(n)}function ZM(n){if(hT(n)==="html")return n;const e=n.assignedSlot||n.parentNode||__(n)&&n.host||dT(n);return __(e)?e.host:e}function mT(n){const e=ZM(n);return JM(e)?n.ownerDocument?n.ownerDocument.body:n.body:ng(e)&&pT(e)?e:mT(e)}function rc(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=mT(n),s=r===((i=n.ownerDocument)==null?void 0:i.body),o=dn(r);if(s){const a=fp(o);return e.concat(o,o.visualViewport||[],pT(r)?r:[],a&&t?rc(a):[])}return e.concat(r,rc(r,[],t))}function fp(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function eO(n){const e=ig(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ng(n),s=r?n.offsetWidth:t,o=r?n.offsetHeight:i,a=nc(t)!==s||nc(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function rg(n){return dp(n)?n:n.contextElement}function zd(n){const e=rg(n);if(!ng(e))return ic(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=eO(e);let o=(s?nc(t.width):t.width)/i,a=(s?nc(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const tO=ic(0);function nO(n){const e=dn(n);return!YM()||!e.visualViewport?tO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function iO(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==dn(n)?!1:e}function w_(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=rg(n);let o=ic(1);e&&(i?dp(i)&&(o=zd(i)):o=zd(n));const a=iO(s,t,i)?nO(s):ic(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,h=r.width/o.x,d=r.height/o.y;if(s){const p=dn(s),g=i&&dp(i)?dn(i):i;let y=p,_=fp(y);for(;_&&i&&g!==y;){const b=zd(_),v=_.getBoundingClientRect(),w=ig(_),I=v.left+(_.clientLeft+parseFloat(w.paddingLeft))*b.x,A=v.top+(_.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,c*=b.y,h*=b.x,d*=b.y,l+=I,c+=A,y=dn(_),_=fp(y)}}return XM({width:h,height:d,x:l,y:c})}function gT(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function rO(n,e){let t=null,i;const r=dT(n);function s(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=n.getBoundingClientRect(),{left:h,top:d,width:p,height:g}=c;if(a||e(),!p||!g)return;const y=Wl(d),_=Wl(r.clientWidth-(h+p)),b=Wl(r.clientHeight-(d+g)),v=Wl(h),I={rootMargin:-y+"px "+-_+"px "+-b+"px "+-v+"px",threshold:QM(0,GM(1,l))||1};let A=!0;function V(N){const T=N[0].intersectionRatio;if(T!==l){if(!A)return o();T?o(!1,T):i=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!gT(c,n.getBoundingClientRect())&&o(),A=!1}try{t=new IntersectionObserver(V,{...I,root:r.ownerDocument})}catch{t=new IntersectionObserver(V,I)}t.observe(n)}return o(!0),s}function sO(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=rg(n),h=r||s?[...c?rc(c):[],...rc(e)]:[];h.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const d=c&&a?rO(c,t):null;let p=-1,g=null;o&&(g=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=g)==null||I.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let y,_=l?w_(n):null;l&&b();function b(){const v=w_(n);_&&!gT(_,v)&&t(),_=v,y=requestAnimationFrame(b)}return t(),()=>{var v;h.forEach(w=>{r&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),d==null||d(),(v=g)==null||v.disconnect(),g=null,l&&cancelAnimationFrame(y)}}var pp=O.useLayoutEffect,oO=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],sc=function(){};function aO(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function lO(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=[].concat(i);if(e&&n)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(aO(n,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var E_=function(e){return vO(e)?e.filter(Boolean):Er(e)==="object"&&e!==null?[e]:[]},vT=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=ii(e,oO);return X({},t)},De=function(e,t,i){var r=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(t,e),className:r(i??{},o(t,e),a)}};function lh(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function uO(n){return lh(n)?window.innerHeight:n.clientHeight}function yT(n){return lh(n)?window.pageYOffset:n.scrollTop}function oc(n,e){if(lh(n)){window.scrollTo(0,e);return}n.scrollTop=e}function cO(n){var e=getComputedStyle(n),t=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var r=n;r=r.parentElement;)if(e=getComputedStyle(r),!(t&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return r;return document.documentElement}function hO(n,e,t,i){return t*((n=n/i-1)*n*n+1)+e}function Hl(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:sc,r=yT(n),s=e-r,o=10,a=0;function l(){a+=o;var c=hO(a,r,s,t);oc(n,c),a<t?window.requestAnimationFrame(l):i(n)}l()}function S_(n,e){var t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=e.offsetHeight/3;i.bottom+r>t.bottom?oc(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+r,n.scrollHeight)):i.top-r<t.top&&oc(n,Math.max(e.offsetTop-r,0))}function dO(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function T_(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function fO(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var _T=!1,pO={get passive(){return _T=!0}},ql=typeof window<"u"?window:{};ql.addEventListener&&ql.removeEventListener&&(ql.addEventListener("p",sc,pO),ql.removeEventListener("p",sc,!1));var mO=_T;function gO(n){return n!=null}function vO(n){return Array.isArray(n)}function Kl(n,e,t){return n?e:t}var yO=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var s=Object.entries(e).filter(function(o){var a=qn(o,1),l=a[0];return!i.includes(l)});return s.reduce(function(o,a){var l=qn(a,2),c=l[0],h=l[1];return o[c]=h,o},{})},_O=["children","innerProps"],wO=["children","innerProps"];function EO(n){var e=n.maxHeight,t=n.menuEl,i=n.minHeight,r=n.placement,s=n.shouldScroll,o=n.isFixedPosition,a=n.controlHeight,l=cO(t),c={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return c;var h=l.getBoundingClientRect(),d=h.height,p=t.getBoundingClientRect(),g=p.bottom,y=p.height,_=p.top,b=t.offsetParent.getBoundingClientRect(),v=b.top,w=o?window.innerHeight:uO(l),I=yT(l),A=parseInt(getComputedStyle(t).marginBottom,10),V=parseInt(getComputedStyle(t).marginTop,10),N=v-V,T=w-_,E=N+I,C=d-I-_,R=g-w+I+A,k=I+_-V,x=160;switch(r){case"auto":case"bottom":if(T>=y)return{placement:"bottom",maxHeight:e};if(C>=y&&!o)return s&&Hl(l,R,x),{placement:"bottom",maxHeight:e};if(!o&&C>=i||o&&T>=i){s&&Hl(l,R,x);var P=o?T-A:C-A;return{placement:"bottom",maxHeight:P}}if(r==="auto"||o){var we=e,me=o?N:E;return me>=i&&(we=Math.min(me-A-a,e)),{placement:"top",maxHeight:we}}if(r==="bottom")return s&&oc(l,R),{placement:"bottom",maxHeight:e};break;case"top":if(N>=y)return{placement:"top",maxHeight:e};if(E>=y&&!o)return s&&Hl(l,k,x),{placement:"top",maxHeight:e};if(!o&&E>=i||o&&N>=i){var pe=e;return(!o&&E>=i||o&&N>=i)&&(pe=o?N-V:E-V),s&&Hl(l,k,x),{placement:"top",maxHeight:pe}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(r,'".'))}return c}function SO(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var wT=function(e){return e==="auto"?"bottom":e},TO=function(e,t){var i,r=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return X((i={label:"menu"},Po(i,SO(r),"100%"),Po(i,"position","absolute"),Po(i,"width","100%"),Po(i,"zIndex",1),i),t?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},ET=O.createContext(null),bO=function(e){var t=e.children,i=e.minMenuHeight,r=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=O.useContext(ET)||{},h=c.setPortalPlacement,d=O.useRef(null),p=O.useState(r),g=qn(p,2),y=g[0],_=g[1],b=O.useState(null),v=qn(b,2),w=v[0],I=v[1],A=l.spacing.controlHeight;return pp(function(){var V=d.current;if(V){var N=o==="fixed",T=a&&!N,E=EO({maxHeight:r,menuEl:V,minHeight:i,placement:s,shouldScroll:T,isFixedPosition:N,controlHeight:A});_(E.maxHeight),I(E.placement),h==null||h(E.placement)}},[r,s,o,a,i,h,A]),t({ref:d,placerProps:X(X({},e),{},{placement:w||wT(s),maxHeight:y})})},IO=function(e){var t=e.children,i=e.innerRef,r=e.innerProps;return K("div",Y({},De(e,"menu",{menu:!0}),{ref:i},r),t)},CO=IO,RO=function(e,t){var i=e.maxHeight,r=e.theme.spacing.baseUnit;return X({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},PO=function(e){var t=e.children,i=e.innerProps,r=e.innerRef,s=e.isMulti;return K("div",Y({},De(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},i),t)},ST=function(e,t){var i=e.theme,r=i.spacing.baseUnit,s=i.colors;return X({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},AO=ST,kO=ST,xO=function(e){var t=e.children,i=t===void 0?"No options":t,r=e.innerProps,s=ii(e,_O);return K("div",Y({},De(X(X({},s),{},{children:i,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),i)},MO=function(e){var t=e.children,i=t===void 0?"Loading...":t,r=e.innerProps,s=ii(e,wO);return K("div",Y({},De(X(X({},s),{},{children:i,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),i)},OO=function(e){var t=e.rect,i=e.offset,r=e.position;return{left:t.left,position:r,top:i,width:t.width,zIndex:1}},VO=function(e){var t=e.appendTo,i=e.children,r=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=O.useRef(null),c=O.useRef(null),h=O.useState(wT(o)),d=qn(h,2),p=d[0],g=d[1],y=O.useMemo(function(){return{setPortalPlacement:g}},[]),_=O.useState(null),b=qn(_,2),v=b[0],w=b[1],I=O.useCallback(function(){if(r){var T=dO(r),E=a==="fixed"?0:window.pageYOffset,C=T[p]+E;(C!==(v==null?void 0:v.offset)||T.left!==(v==null?void 0:v.rect.left)||T.width!==(v==null?void 0:v.rect.width))&&w({offset:C,rect:T})}},[r,a,p,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);pp(function(){I()},[I]);var A=O.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),r&&l.current&&(c.current=sO(r,l.current,I,{elementResize:"ResizeObserver"in window}))},[r,I]);pp(function(){A()},[A]);var V=O.useCallback(function(T){l.current=T,A()},[A]);if(!t&&a!=="fixed"||!v)return null;var N=K("div",Y({ref:V},De(X(X({},e),{},{offset:v.offset,position:a,rect:v.rect}),"menuPortal",{"menu-portal":!0}),s),i);return K(ET.Provider,{value:y},t?lS.createPortal(N,t):N)},DO=function(e){var t=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},NO=function(e){var t=e.children,i=e.innerProps,r=e.isDisabled,s=e.isRtl;return K("div",Y({},De(e,"container",{"--is-disabled":r,"--is-rtl":s}),i),t)},LO=function(e,t){var i=e.theme.spacing,r=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return X({alignItems:"center",display:r&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},FO=function(e){var t=e.children,i=e.innerProps,r=e.isMulti,s=e.hasValue;return K("div",Y({},De(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),i),t)},zO=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},$O=function(e){var t=e.children,i=e.innerProps;return K("div",Y({},De(e,"indicatorsContainer",{indicators:!0}),i),t)},b_,UO=["size"],BO=["innerProps","isRtl","size"],jO={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},TT=function(e){var t=e.size,i=ii(e,UO);return K("svg",Y({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:jO},i))},sg=function(e){return K(TT,Y({size:20},e),K("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},bT=function(e){return K(TT,Y({size:20},e),K("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},IT=function(e,t){var i=e.isFocused,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return X({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:i?o.neutral60:o.neutral20,padding:s*2,":hover":{color:i?o.neutral80:o.neutral40}})},WO=IT,HO=function(e){var t=e.children,i=e.innerProps;return K("div",Y({},De(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),t||K(bT,null))},qO=IT,KO=function(e){var t=e.children,i=e.innerProps;return K("div",Y({},De(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),t||K(sg,null))},GO=function(e,t){var i=e.isDisabled,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return X({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},QO=function(e){var t=e.innerProps;return K("span",Y({},t,De(e,"indicatorSeparator",{"indicator-separator":!0})))},XO=qM(b_||(b_=KM([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),YO=function(e,t){var i=e.isFocused,r=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return X({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:i?o.neutral60:o.neutral20,padding:a*2})},$d=function(e){var t=e.delay,i=e.offset;return K("span",{css:tg({animation:"".concat(XO," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},JO=function(e){var t=e.innerProps,i=e.isRtl,r=e.size,s=r===void 0?4:r,o=ii(e,BO);return K("div",Y({},De(X(X({},o),{},{innerProps:t,isRtl:i,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),K($d,{delay:0,offset:i}),K($d,{delay:160,offset:!0}),K($d,{delay:320,offset:!i}))},ZO=function(e,t){var i=e.isDisabled,r=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return X({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:r?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},eV=function(e){var t=e.children,i=e.isDisabled,r=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return K("div",Y({ref:s},De(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":r,"control--menu-is-open":a}),o,{"aria-disabled":i||void 0}),t)},tV=eV,nV=["data"],iV=function(e,t){var i=e.theme.spacing;return t?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},rV=function(e){var t=e.children,i=e.cx,r=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,h=e.theme,d=e.selectProps;return K("div",Y({},De(e,"group",{group:!0}),l),K(o,Y({},a,{selectProps:d,theme:h,getStyles:r,getClassNames:s,cx:i}),c),K("div",null,t))},sV=function(e,t){var i=e.theme,r=i.colors,s=i.spacing;return X({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},oV=function(e){var t=vT(e);t.data;var i=ii(t,nV);return K("div",Y({},De(e,"groupHeading",{"group-heading":!0}),i))},aV=rV,lV=["innerRef","isDisabled","isHidden","inputClassName"],uV=function(e,t){var i=e.isDisabled,r=e.value,s=e.theme,o=s.spacing,a=s.colors;return X(X({visibility:i?"hidden":"visible",transform:r?"translateZ(0)":""},cV),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},CT={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},cV={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":X({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},CT)},hV=function(e){return X({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},CT)},dV=function(e){var t=e.cx,i=e.value,r=vT(e),s=r.innerRef,o=r.isDisabled,a=r.isHidden,l=r.inputClassName,c=ii(r,lV);return K("div",Y({},De(e,"input",{"input-container":!0}),{"data-value":i||""}),K("input",Y({className:t({input:!0},l),ref:s,style:hV(a),disabled:o},c)))},fV=dV,pV=function(e,t){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors;return X({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},mV=function(e,t){var i=e.theme,r=i.borderRadius,s=i.colors,o=e.cropWithEllipsis;return X({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},gV=function(e,t){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors,a=e.isFocused;return X({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},RT=function(e){var t=e.children,i=e.innerProps;return K("div",i,t)},vV=RT,yV=RT;function _V(n){var e=n.children,t=n.innerProps;return K("div",Y({role:"button"},t),e||K(sg,{size:14}))}var wV=function(e){var t=e.children,i=e.components,r=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,c=i.Container,h=i.Label,d=i.Remove;return K(c,{data:r,innerProps:X(X({},De(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},K(h,{data:r,innerProps:X({},De(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),K(d,{data:r,innerProps:X(X({},De(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:l}))},EV=wV,SV=function(e,t){var i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return X({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?l.primary:r?l.primary25:"transparent",color:i?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:s?l.primary:l.primary50}})},TV=function(e){var t=e.children,i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return K("div",Y({},De(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":r,"option--is-selected":s}),{ref:o,"aria-disabled":i},a),t)},bV=TV,IV=function(e,t){var i=e.theme,r=i.spacing,s=i.colors;return X({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},CV=function(e){var t=e.children,i=e.innerProps;return K("div",Y({},De(e,"placeholder",{placeholder:!0}),i),t)},RV=CV,PV=function(e,t){var i=e.isDisabled,r=e.theme,s=r.spacing,o=r.colors;return X({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:i?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},AV=function(e){var t=e.children,i=e.isDisabled,r=e.innerProps;return K("div",Y({},De(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),r),t)},kV=AV,xV={ClearIndicator:KO,Control:tV,DropdownIndicator:HO,DownChevron:bT,CrossIcon:sg,Group:aV,GroupHeading:oV,IndicatorsContainer:$O,IndicatorSeparator:QO,Input:fV,LoadingIndicator:JO,Menu:CO,MenuList:PO,MenuPortal:VO,LoadingMessage:MO,NoOptionsMessage:xO,MultiValue:EV,MultiValueContainer:vV,MultiValueLabel:yV,MultiValueRemove:_V,Option:bV,Placeholder:RV,SelectContainer:NO,SingleValue:kV,ValueContainer:FO},MV=function(e){return X(X({},xV),e.components)},I_=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function OV(n,e){return!!(n===e||I_(n)&&I_(e))}function VV(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!OV(n[t],e[t]))return!1;return!0}function DV(n,e){e===void 0&&(e=VV);var t=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var o=n.apply(this,r);return t={lastResult:o,lastArgs:r,lastThis:this},o}return i.clear=function(){t=null},i}var NV={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},LV=function(e){return K("span",Y({css:NV},e))},C_=LV,FV={guidance:function(e){var t=e.isSearchable,i=e.isMulti,r=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,i=e.label,r=i===void 0?"":i,s=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var t=e.context,i=e.focused,r=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,c=e.isSelected,h=e.isAppleDevice,d=function(_,b){return _&&_.length?"".concat(_.indexOf(b)+1," of ").concat(_.length):""};if(t==="value"&&a)return"value ".concat(o," focused, ").concat(d(a,i),".");if(t==="menu"&&h){var p=l?" disabled":"",g="".concat(c?" selected":"").concat(p);return"".concat(o).concat(g,", ").concat(d(r,i),".")}return""},onFilter:function(e){var t=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(t?" for search term "+t:"",".")}},zV=function(e){var t=e.ariaSelection,i=e.focusedOption,r=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,h=e.isAppleDevice,d=l.ariaLiveMessages,p=l.getOptionLabel,g=l.inputValue,y=l.isMulti,_=l.isOptionDisabled,b=l.isSearchable,v=l.menuIsOpen,w=l.options,I=l.screenReaderStatus,A=l.tabSelectsValue,V=l.isLoading,N=l["aria-label"],T=l["aria-live"],E=O.useMemo(function(){return X(X({},FV),d||{})},[d]),C=O.useMemo(function(){var me="";if(t&&E.onChange){var pe=t.option,Pe=t.options,U=t.removedValue,q=t.removedValues,G=t.value,ue=function(nn){return Array.isArray(nn)?null:nn},J=U||pe||ue(G),se=J?p(J):"",He=Pe||q||void 0,Xe=He?He.map(p):[],Ne=X({isDisabled:J&&_(J,a),label:se,labels:Xe},t);me=E.onChange(Ne)}return me},[t,E,_,a,p]),R=O.useMemo(function(){var me="",pe=i||r,Pe=!!(i&&a&&a.includes(i));if(pe&&E.onFocus){var U={focused:pe,label:p(pe),isDisabled:_(pe,a),isSelected:Pe,options:s,context:pe===i?"menu":"value",selectValue:a,isAppleDevice:h};me=E.onFocus(U)}return me},[i,r,p,_,E,s,a,h]),k=O.useMemo(function(){var me="";if(v&&w.length&&!V&&E.onFilter){var pe=I({count:s.length});me=E.onFilter({inputValue:g,resultsMessage:pe})}return me},[s,g,v,E,w,I,V]),x=(t==null?void 0:t.action)==="initial-input-focus",P=O.useMemo(function(){var me="";if(E.guidance){var pe=r?"value":v?"menu":"input";me=E.guidance({"aria-label":N,context:pe,isDisabled:i&&_(i,a),isMulti:y,isSearchable:b,tabSelectsValue:A,isInitialFocus:x})}return me},[N,i,r,y,_,b,v,E,a,A,x]),we=K(O.Fragment,null,K("span",{id:"aria-selection"},C),K("span",{id:"aria-focused"},R),K("span",{id:"aria-results"},k),K("span",{id:"aria-guidance"},P));return K(O.Fragment,null,K(C_,{id:c},x&&we),K(C_,{"aria-live":T,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!x&&we))},$V=zV,mp=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],UV=new RegExp("["+mp.map(function(n){return n.letters}).join("")+"]","g"),PT={};for(var Ud=0;Ud<mp.length;Ud++)for(var Bd=mp[Ud],jd=0;jd<Bd.letters.length;jd++)PT[Bd.letters[jd]]=Bd.base;var AT=function(e){return e.replace(UV,function(t){return PT[t]})},BV=DV(AT),R_=function(e){return e.replace(/^\s+|\s+$/g,"")},jV=function(e){return"".concat(e.label," ").concat(e.value)},WV=function(e){return function(t,i){if(t.data.__isNew__)return!0;var r=X({ignoreCase:!0,ignoreAccents:!0,stringify:jV,trim:!0,matchFrom:"any"},e),s=r.ignoreCase,o=r.ignoreAccents,a=r.stringify,l=r.trim,c=r.matchFrom,h=l?R_(i):i,d=l?R_(a(t)):a(t);return s&&(h=h.toLowerCase(),d=d.toLowerCase()),o&&(h=BV(h),d=AT(d)),c==="start"?d.substr(0,h.length)===h:d.indexOf(h)>-1}},HV=["innerRef"];function qV(n){var e=n.innerRef,t=ii(n,HV),i=yO(t,"onExited","in","enter","exit","appear");return K("input",Y({ref:e},i,{css:tg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var KV=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function GV(n){var e=n.isEnabled,t=n.onBottomArrive,i=n.onBottomLeave,r=n.onTopArrive,s=n.onTopLeave,o=O.useRef(!1),a=O.useRef(!1),l=O.useRef(0),c=O.useRef(null),h=O.useCallback(function(b,v){if(c.current!==null){var w=c.current,I=w.scrollTop,A=w.scrollHeight,V=w.clientHeight,N=c.current,T=v>0,E=A-V-I,C=!1;E>v&&o.current&&(i&&i(b),o.current=!1),T&&a.current&&(s&&s(b),a.current=!1),T&&v>E?(t&&!o.current&&t(b),N.scrollTop=A,C=!0,o.current=!0):!T&&-v>I&&(r&&!a.current&&r(b),N.scrollTop=0,C=!0,a.current=!0),C&&KV(b)}},[t,i,r,s]),d=O.useCallback(function(b){h(b,b.deltaY)},[h]),p=O.useCallback(function(b){l.current=b.changedTouches[0].clientY},[]),g=O.useCallback(function(b){var v=l.current-b.changedTouches[0].clientY;h(b,v)},[h]),y=O.useCallback(function(b){if(b){var v=mO?{passive:!1}:!1;b.addEventListener("wheel",d,v),b.addEventListener("touchstart",p,v),b.addEventListener("touchmove",g,v)}},[g,p,d]),_=O.useCallback(function(b){b&&(b.removeEventListener("wheel",d,!1),b.removeEventListener("touchstart",p,!1),b.removeEventListener("touchmove",g,!1))},[g,p,d]);return O.useEffect(function(){if(e){var b=c.current;return y(b),function(){_(b)}}},[e,y,_]),function(b){c.current=b}}var P_=["boxSizing","height","overflow","paddingRight","position"],A_={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function k_(n){n.cancelable&&n.preventDefault()}function x_(n){n.stopPropagation()}function M_(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function O_(){return"ontouchstart"in window||navigator.maxTouchPoints}var V_=!!(typeof window<"u"&&window.document&&window.document.createElement),So=0,Wr={capture:!1,passive:!1};function QV(n){var e=n.isEnabled,t=n.accountForScrollbars,i=t===void 0?!0:t,r=O.useRef({}),s=O.useRef(null),o=O.useCallback(function(l){if(V_){var c=document.body,h=c&&c.style;if(i&&P_.forEach(function(y){var _=h&&h[y];r.current[y]=_}),i&&So<1){var d=parseInt(r.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,g=window.innerWidth-p+d||0;Object.keys(A_).forEach(function(y){var _=A_[y];h&&(h[y]=_)}),h&&(h.paddingRight="".concat(g,"px"))}c&&O_()&&(c.addEventListener("touchmove",k_,Wr),l&&(l.addEventListener("touchstart",M_,Wr),l.addEventListener("touchmove",x_,Wr))),So+=1}},[i]),a=O.useCallback(function(l){if(V_){var c=document.body,h=c&&c.style;So=Math.max(So-1,0),i&&So<1&&P_.forEach(function(d){var p=r.current[d];h&&(h[d]=p)}),c&&O_()&&(c.removeEventListener("touchmove",k_,Wr),l&&(l.removeEventListener("touchstart",M_,Wr),l.removeEventListener("touchmove",x_,Wr)))}},[i]);return O.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var XV=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},YV={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function JV(n){var e=n.children,t=n.lockEnabled,i=n.captureEnabled,r=i===void 0?!0:i,s=n.onBottomArrive,o=n.onBottomLeave,a=n.onTopArrive,l=n.onTopLeave,c=GV({isEnabled:r,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),h=QV({isEnabled:t}),d=function(g){c(g),h(g)};return K(O.Fragment,null,t&&K("div",{onClick:XV,css:YV}),e(d))}var ZV={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},eD=function(e){var t=e.name,i=e.onFocus;return K("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:ZV,value:"",onChange:function(){}})},tD=eD;function og(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function nD(){return og(/^iPhone/i)}function kT(){return og(/^Mac/i)}function iD(){return og(/^iPad/i)||kT()&&navigator.maxTouchPoints>1}function rD(){return nD()||iD()}function sD(){return kT()||rD()}var oD=function(e){return e.label},aD=function(e){return e.label},lD=function(e){return e.value},uD=function(e){return!!e.isDisabled},cD={clearIndicator:qO,container:DO,control:ZO,dropdownIndicator:WO,group:iV,groupHeading:sV,indicatorsContainer:zO,indicatorSeparator:GO,input:uV,loadingIndicator:YO,loadingMessage:kO,menu:TO,menuList:RO,menuPortal:OO,multiValue:pV,multiValueLabel:mV,multiValueRemove:gV,noOptionsMessage:AO,option:SV,placeholder:IV,singleValue:PV,valueContainer:LO},hD={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},dD=4,xT=4,fD=38,pD=xT*2,mD={baseUnit:xT,controlHeight:fD,menuGutter:pD},Wd={borderRadius:dD,colors:hD,spacing:mD},gD={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:T_(),captureMenuScroll:!T_(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:WV(),formatGroupLabel:oD,getOptionLabel:aD,getOptionValue:lD,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:uD,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!fO(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function D_(n,e,t,i){var r=VT(n,e,t),s=DT(n,e,t),o=OT(n,e),a=ac(n,e);return{type:"option",data:e,isDisabled:r,isSelected:s,label:o,value:a,index:i}}function gu(n,e){return n.options.map(function(t,i){if("options"in t){var r=t.options.map(function(o,a){return D_(n,o,e,a)}).filter(function(o){return L_(n,o)});return r.length>0?{type:"group",data:t,options:r,index:i}:void 0}var s=D_(n,t,e,i);return L_(n,s)?s:void 0}).filter(gO)}function MT(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Km(t.options.map(function(i){return i.data}))):e.push(t.data),e},[])}function N_(n,e){return n.reduce(function(t,i){return i.type==="group"?t.push.apply(t,Km(i.options.map(function(r){return{data:r.data,id:"".concat(e,"-").concat(i.index,"-").concat(r.index)}}))):t.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),t},[])}function vD(n,e){return MT(gu(n,e))}function L_(n,e){var t=n.inputValue,i=t===void 0?"":t,r=e.data,s=e.isSelected,o=e.label,a=e.value;return(!LT(n)||!s)&&NT(n,{label:o,value:a,data:r},i)}function yD(n,e){var t=n.focusedValue,i=n.selectValue,r=i.indexOf(t);if(r>-1){var s=e.indexOf(t);if(s>-1)return t;if(r<e.length)return e[r]}return null}function _D(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Hd=function(e,t){var i,r=(i=e.find(function(s){return s.data===t}))===null||i===void 0?void 0:i.id;return r||null},OT=function(e,t){return e.getOptionLabel(t)},ac=function(e,t){return e.getOptionValue(t)};function VT(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function DT(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var i=ac(n,e);return t.some(function(r){return ac(n,r)===i})}function NT(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var LT=function(e){var t=e.hideSelectedOptions,i=e.isMulti;return t===void 0?i:t},wD=1,FT=function(n){V2(t,n);var e=L2(t);function t(i){var r;if(M2(this,t),r=e.call(this,i),r.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.isAppleDevice=sD(),r.controlRef=null,r.getControlRef=function(l){r.controlRef=l},r.focusedOptionRef=null,r.getFocusedOptionRef=function(l){r.focusedOptionRef=l},r.menuListRef=null,r.getMenuListRef=function(l){r.menuListRef=l},r.inputRef=null,r.getInputRef=function(l){r.inputRef=l},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(l,c){var h=r.props,d=h.onChange,p=h.name;c.name=p,r.ariaOnChange(l,c),d(l,c)},r.setValue=function(l,c,h){var d=r.props,p=d.closeMenuOnSelect,g=d.isMulti,y=d.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:y}),p&&(r.setState({inputIsHiddenAfterUpdate:!g}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(l,{action:c,option:h})},r.selectOption=function(l){var c=r.props,h=c.blurInputOnSelect,d=c.isMulti,p=c.name,g=r.state.selectValue,y=d&&r.isOptionSelected(l,g),_=r.isOptionDisabled(l,g);if(y){var b=r.getOptionValue(l);r.setValue(g.filter(function(v){return r.getOptionValue(v)!==b}),"deselect-option",l)}else if(!_)d?r.setValue([].concat(Km(g),[l]),"select-option",l):r.setValue(l,"select-option");else{r.ariaOnChange(l,{action:"select-option",option:l,name:p});return}h&&r.blurInput()},r.removeValue=function(l){var c=r.props.isMulti,h=r.state.selectValue,d=r.getOptionValue(l),p=h.filter(function(y){return r.getOptionValue(y)!==d}),g=Kl(c,p,p[0]||null);r.onChange(g,{action:"remove-value",removedValue:l}),r.focusInput()},r.clearValue=function(){var l=r.state.selectValue;r.onChange(Kl(r.props.isMulti,[],null),{action:"clear",removedValues:l})},r.popValue=function(){var l=r.props.isMulti,c=r.state.selectValue,h=c[c.length-1],d=c.slice(0,c.length-1),p=Kl(l,d,d[0]||null);h&&r.onChange(p,{action:"pop-value",removedValue:h})},r.getFocusedOptionId=function(l){return Hd(r.state.focusableOptionsWithIds,l)},r.getFocusableOptionsWithIds=function(){return N_(gu(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var l=arguments.length,c=new Array(l),h=0;h<l;h++)c[h]=arguments[h];return lO.apply(void 0,[r.props.classNamePrefix].concat(c))},r.getOptionLabel=function(l){return OT(r.props,l)},r.getOptionValue=function(l){return ac(r.props,l)},r.getStyles=function(l,c){var h=r.props.unstyled,d=cD[l](c,h);d.boxSizing="border-box";var p=r.props.styles[l];return p?p(d,c):d},r.getClassNames=function(l,c){var h,d;return(h=(d=r.props.classNames)[l])===null||h===void 0?void 0:h.call(d,c)},r.getElementId=function(l){return"".concat(r.state.instancePrefix,"-").concat(l)},r.getComponents=function(){return MV(r.props)},r.buildCategorizedOptions=function(){return gu(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return MT(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(l,c){r.setState({ariaSelection:X({value:l},c)})},r.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(l){r.blockOptionHover=!1},r.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&r.onMenuClose():c&&r.openMenu("first"):(c&&(r.openAfterFocus=!0),r.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},r.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!r.props.isDisabled){var c=r.props,h=c.isMulti,d=c.menuIsOpen;r.focusInput(),d?(r.setState({inputIsHiddenAfterUpdate:!h}),r.onMenuClose()):r.openMenu("first"),l.preventDefault()}},r.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(r.clearValue(),l.preventDefault(),r.openAfterFocus=!1,l.type==="touchend"?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(l){typeof r.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&lh(l.target)&&r.props.onMenuClose():typeof r.props.closeMenuOnScroll=="function"&&r.props.closeMenuOnScroll(l)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(l){var c=l.touches,h=c&&c.item(0);h&&(r.initialTouchX=h.clientX,r.initialTouchY=h.clientY,r.userIsDragging=!1)},r.onTouchMove=function(l){var c=l.touches,h=c&&c.item(0);if(h){var d=Math.abs(h.clientX-r.initialTouchX),p=Math.abs(h.clientY-r.initialTouchY),g=5;r.userIsDragging=d>g||p>g}},r.onTouchEnd=function(l){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(l.target)&&r.menuListRef&&!r.menuListRef.contains(l.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(l){r.userIsDragging||r.onControlMouseDown(l)},r.onClearIndicatorTouchEnd=function(l){r.userIsDragging||r.onClearIndicatorMouseDown(l)},r.onDropdownIndicatorTouchEnd=function(l){r.userIsDragging||r.onDropdownIndicatorMouseDown(l)},r.handleInputChange=function(l){var c=r.props.inputValue,h=l.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(h,{action:"input-change",prevInputValue:c}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(l){r.props.onFocus&&r.props.onFocus(l),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(l){var c=r.props.inputValue;if(r.menuListRef&&r.menuListRef.contains(document.activeElement)){r.inputRef.focus();return}r.props.onBlur&&r.props.onBlur(l),r.onInputChange("",{action:"input-blur",prevInputValue:c}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1})},r.onOptionHover=function(l){if(!(r.blockOptionHover||r.state.focusedOption===l)){var c=r.getFocusableOptions(),h=c.indexOf(l);r.setState({focusedOption:l,focusedOptionId:h>-1?r.getFocusedOptionId(l):null})}},r.shouldHideSelectedOptions=function(){return LT(r.props)},r.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),r.focus()},r.onKeyDown=function(l){var c=r.props,h=c.isMulti,d=c.backspaceRemovesValue,p=c.escapeClearsValue,g=c.inputValue,y=c.isClearable,_=c.isDisabled,b=c.menuIsOpen,v=c.onKeyDown,w=c.tabSelectsValue,I=c.openMenuOnFocus,A=r.state,V=A.focusedOption,N=A.focusedValue,T=A.selectValue;if(!_&&!(typeof v=="function"&&(v(l),l.defaultPrevented))){switch(r.blockOptionHover=!0,l.key){case"ArrowLeft":if(!h||g)return;r.focusValue("previous");break;case"ArrowRight":if(!h||g)return;r.focusValue("next");break;case"Delete":case"Backspace":if(g)return;if(N)r.removeValue(N);else{if(!d)return;h?r.popValue():y&&r.clearValue()}break;case"Tab":if(r.isComposing||l.shiftKey||!b||!w||!V||I&&r.isOptionSelected(V,T))return;r.selectOption(V);break;case"Enter":if(l.keyCode===229)break;if(b){if(!V||r.isComposing)return;r.selectOption(V);break}return;case"Escape":b?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:g}),r.onMenuClose()):y&&p&&r.clearValue();break;case" ":if(g)return;if(!b){r.openMenu("first");break}if(!V)return;r.selectOption(V);break;case"ArrowUp":b?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":b?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!b)return;r.focusOption("pageup");break;case"PageDown":if(!b)return;r.focusOption("pagedown");break;case"Home":if(!b)return;r.focusOption("first");break;case"End":if(!b)return;r.focusOption("last");break;default:return}l.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++wD),r.state.selectValue=E_(i.value),i.menuIsOpen&&r.state.selectValue.length){var s=r.getFocusableOptionsWithIds(),o=r.buildFocusableOptions(),a=o.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=s,r.state.focusedOption=o[a],r.state.focusedOptionId=Hd(s,o[a])}return r}return O2(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&S_(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&r.isDisabled||l&&a&&!r.menuIsOpen)&&this.focusInput(),l&&o&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(S_(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,s){this.props.onInputChange(r,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,c=this.buildFocusableOptions(),h=r==="first"?0:c.length-1;if(!this.props.isMulti){var d=c.indexOf(a[0]);d>-1&&(h=d)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[h],focusedOptionId:this.getFocusedOptionId(c[h])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(r){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var c=o.length-1,h=-1;if(o.length){switch(r){case"previous":l===0?h=0:l===-1?h=c:h=l-1;break;case"next":l>-1&&l<c&&(h=l+1);break}this.setState({inputIsHidden:h!==-1,focusedValue:o[h]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(o);o||(c=-1),r==="up"?l=c>0?c-1:a.length-1:r==="down"?l=(c+1)%a.length:r==="pageup"?(l=c-s,l<0&&(l=0)):r==="pagedown"?(l=c+s,l>a.length-1&&(l=a.length-1)):r==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Wd):X(X({},Wd),this.props.theme):Wd}},{key:"getCommonProps",value:function(){var r=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,h=this.setValue,d=this.props,p=d.isMulti,g=d.isRtl,y=d.options,_=this.hasValue();return{clearValue:r,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:_,isMulti:p,isRtl:g,options:y,selectOption:c,selectProps:d,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,s=r.isClearable,o=r.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(r,s){return VT(this.props,r,s)}},{key:"isOptionSelected",value:function(r,s){return DT(this.props,r,s)}},{key:"filterOption",value:function(r,s){return NT(this.props,r,s)}},{key:"formatOptionLabel",value:function(r,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(r,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var r=this.props,s=r.isDisabled,o=r.isSearchable,a=r.inputId,l=r.inputValue,c=r.tabIndex,h=r.form,d=r.menuIsOpen,p=r.required,g=this.getComponents(),y=g.Input,_=this.state,b=_.inputIsHidden,v=_.ariaSelection,w=this.commonProps,I=a||this.getElementId("input"),A=X(X(X({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},d&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(v==null?void 0:v.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?O.createElement(y,Y({},w,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:I,innerRef:this.getInputRef,isDisabled:s,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:h,type:"text",value:l},A)):O.createElement(qV,Y({id:I,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:sc,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:h,value:""},A))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,c=s.MultiValueRemove,h=s.SingleValue,d=s.Placeholder,p=this.commonProps,g=this.props,y=g.controlShouldRenderValue,_=g.isDisabled,b=g.isMulti,v=g.inputValue,w=g.placeholder,I=this.state,A=I.selectValue,V=I.focusedValue,N=I.isFocused;if(!this.hasValue()||!y)return v?null:O.createElement(d,Y({},p,{key:"placeholder",isDisabled:_,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),w);if(b)return A.map(function(E,C){var R=E===V,k="".concat(r.getOptionLabel(E),"-").concat(r.getOptionValue(E));return O.createElement(o,Y({},p,{components:{Container:a,Label:l,Remove:c},isFocused:R,isDisabled:_,key:k,index:C,removeProps:{onClick:function(){return r.removeValue(E)},onTouchEnd:function(){return r.removeValue(E)},onMouseDown:function(P){P.preventDefault()}},data:E}),r.formatOptionLabel(E,"value"))});if(v)return null;var T=A[0];return O.createElement(h,Y({},p,{data:T,isDisabled:_}),this.formatOptionLabel(T,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),s=r.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,h=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||c)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(s,Y({},o,{innerProps:d,isFocused:h}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),s=r.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,h=this.state.isFocused;if(!s||!c)return null;var d={"aria-hidden":"true"};return O.createElement(s,Y({},o,{innerProps:d,isDisabled:l,isFocused:h}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator,o=r.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return O.createElement(o,Y({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(s,Y({},o,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var r=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,c=s.MenuList,h=s.MenuPortal,d=s.LoadingMessage,p=s.NoOptionsMessage,g=s.Option,y=this.commonProps,_=this.state.focusedOption,b=this.props,v=b.captureMenuScroll,w=b.inputValue,I=b.isLoading,A=b.loadingMessage,V=b.minMenuHeight,N=b.maxMenuHeight,T=b.menuIsOpen,E=b.menuPlacement,C=b.menuPosition,R=b.menuPortalTarget,k=b.menuShouldBlockScroll,x=b.menuShouldScrollIntoView,P=b.noOptionsMessage,we=b.onMenuScrollToTop,me=b.onMenuScrollToBottom;if(!T)return null;var pe=function(se,He){var Xe=se.type,Ne=se.data,qe=se.isDisabled,nn=se.isSelected,Vr=se.label,Dr=se.value,Gi=_===Ne,Nr=qe?void 0:function(){return r.onOptionHover(Ne)},Xs=qe?void 0:function(){return r.selectOption(Ne)},Lr="".concat(r.getElementId("option"),"-").concat(He),Ys={id:Lr,onClick:Xs,onMouseMove:Nr,onMouseOver:Nr,tabIndex:-1,role:"option","aria-selected":r.isAppleDevice?void 0:nn};return O.createElement(g,Y({},y,{innerProps:Ys,data:Ne,isDisabled:qe,isSelected:nn,key:Lr,label:Vr,type:Xe,value:Dr,isFocused:Gi,innerRef:Gi?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(se.data,"menu"))},Pe;if(this.hasOptions())Pe=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var se=J.data,He=J.options,Xe=J.index,Ne="".concat(r.getElementId("group"),"-").concat(Xe),qe="".concat(Ne,"-heading");return O.createElement(o,Y({},y,{key:Ne,data:se,options:He,Heading:a,headingProps:{id:qe,data:J.data},label:r.formatGroupLabel(J.data)}),J.options.map(function(nn){return pe(nn,"".concat(Xe,"-").concat(nn.index))}))}else if(J.type==="option")return pe(J,"".concat(J.index))});else if(I){var U=A({inputValue:w});if(U===null)return null;Pe=O.createElement(d,y,U)}else{var q=P({inputValue:w});if(q===null)return null;Pe=O.createElement(p,y,q)}var G={minMenuHeight:V,maxMenuHeight:N,menuPlacement:E,menuPosition:C,menuShouldScrollIntoView:x},ue=O.createElement(bO,Y({},y,G),function(J){var se=J.ref,He=J.placerProps,Xe=He.placement,Ne=He.maxHeight;return O.createElement(l,Y({},y,G,{innerRef:se,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove},isLoading:I,placement:Xe}),O.createElement(JV,{captureEnabled:v,onTopArrive:we,onBottomArrive:me,lockEnabled:k},function(qe){return O.createElement(c,Y({},y,{innerRef:function(Vr){r.getMenuListRef(Vr),qe(Vr)},innerProps:{role:"listbox","aria-multiselectable":y.isMulti,id:r.getElementId("listbox")},isLoading:I,maxHeight:Ne,focusedOption:_}),Pe)}))});return R||C==="fixed"?O.createElement(h,Y({},y,{appendTo:R,controlElement:this.controlRef,menuPlacement:E,menuPosition:C}),ue):ue}},{key:"renderFormField",value:function(){var r=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,c=s.name,h=s.required,d=this.state.selectValue;if(h&&!this.hasValue()&&!a)return O.createElement(tD,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(o){var p=d.map(function(_){return r.getOptionValue(_)}).join(o);return O.createElement("input",{name:c,type:"hidden",value:p})}else{var g=d.length>0?d.map(function(_,b){return O.createElement("input",{key:"i-".concat(b),name:c,type:"hidden",value:r.getOptionValue(_)})}):O.createElement("input",{name:c,type:"hidden",value:""});return O.createElement("div",null,g)}else{var y=d[0]?this.getOptionValue(d[0]):"";return O.createElement("input",{name:c,type:"hidden",value:y})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,c=s.isFocused,h=s.selectValue,d=this.getFocusableOptions();return O.createElement($V,Y({},r,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:c,selectValue:h,focusableOptions:d,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var r=this.getComponents(),s=r.Control,o=r.IndicatorsContainer,a=r.SelectContainer,l=r.ValueContainer,c=this.props,h=c.className,d=c.id,p=c.isDisabled,g=c.menuIsOpen,y=this.state.isFocused,_=this.commonProps=this.getCommonProps();return O.createElement(a,Y({},_,{className:h,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:y}),this.renderLiveRegion(),O.createElement(s,Y({},_,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:y,menuIsOpen:g}),O.createElement(l,Y({},_,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),O.createElement(o,Y({},_,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,h=s.isFocused,d=s.prevWasFocused,p=s.instancePrefix,g=r.options,y=r.value,_=r.menuIsOpen,b=r.inputValue,v=r.isMulti,w=E_(y),I={};if(o&&(y!==o.value||g!==o.options||_!==o.menuIsOpen||b!==o.inputValue)){var A=_?vD(r,w):[],V=_?N_(gu(r,w),"".concat(p,"-option")):[],N=a?yD(s,w):null,T=_D(s,A),E=Hd(V,T);I={selectValue:w,focusedOption:T,focusedOptionId:E,focusableOptionsWithIds:V,focusedValue:N,clearFocusValueOnUpdate:!1}}var C=l!=null&&r!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},R=c,k=h&&d;return h&&!k&&(R={value:Kl(v,w,w[0]||null),options:w,action:"initial-input-focus"},k=!d),(c==null?void 0:c.action)==="initial-input-focus"&&(R=null),X(X(X({},I),C),{},{prevProps:r,ariaSelection:R,prevWasFocused:k})}}]),t}(O.Component);FT.defaultProps=gD;var ED=O.forwardRef(function(n,e){var t=x2(n);return O.createElement(FT,Y({ref:e},t))}),v3=ED;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},SD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),i.push(t[h],t[d],t[p],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new TD;const p=s<<2|a>>4;if(i.push(p),c!==64){const g=a<<4&240|c>>2;if(i.push(g),d!==64){const y=c<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bD=function(n){const e=zT(n);return $T.encodeByteArray(e,!0)},lc=function(n){return bD(n).replace(/\./g,"")},UT=function(n){try{return $T.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=()=>ID().__FIREBASE_DEFAULTS__,RD=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&UT(n[1]);return e&&JSON.parse(e)},uh=()=>{try{return CD()||RD()||PD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BT=n=>{var e,t;return(t=(e=uh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},AD=n=>{const e=BT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},jT=()=>{var n;return(n=uh())===null||n===void 0?void 0:n.config},WT=n=>{var e;return(e=uh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[lc(JSON.stringify(t)),lc(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function OD(){var n;const e=(n=uh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ND(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LD(){const n=St();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FD(){return!OD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zD(){try{return typeof indexedDB=="object"}catch{return!1}}function $D(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="FirebaseError";class ri extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=UD,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?BD(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ri(r,a,i)}}function BD(n,e){return n.replace(jD,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const jD=/\{\$([^}]+)}/g;function WD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(F_(s)&&F_(o)){if(!uc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function F_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function HD(n,e){const t=new qD(n,e);return t.subscribe.bind(t)}class qD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");KD(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=qd),r.error===void 0&&(r.error=qd),r.complete===void 0&&(r.complete=qd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class Sr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new kD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XD(e))try{this.getOrInitializeService({instanceIdentifier:nr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nr){return this.instances.has(e)}getOptions(e=nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=nr){return this.component?this.component.multipleInstances?e:nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QD(n){return n===nr?void 0:n}function XD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(oe||(oe={}));const JD={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},ZD=oe.INFO,eN={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},tN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=eN[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ag{constructor(e){this.name=e,this._logLevel=ZD,this._logHandler=tN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const nN=(n,e)=>e.some(t=>n instanceof t);let z_,$_;function iN(){return z_||(z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rN(){return $_||($_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HT=new WeakMap,gp=new WeakMap,qT=new WeakMap,Kd=new WeakMap,lg=new WeakMap;function sN(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Mi(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&HT.set(t,n)}).catch(()=>{}),lg.set(e,n),e}function oN(n){if(gp.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});gp.set(n,e)}let vp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aN(n){vp=n(vp)}function lN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Gd(this),e,...t);return qT.set(i,e.sort?e.sort():[e]),Mi(i)}:rN().includes(n)?function(...e){return n.apply(Gd(this),e),Mi(HT.get(this))}:function(...e){return Mi(n.apply(Gd(this),e))}}function uN(n){return typeof n=="function"?lN(n):(n instanceof IDBTransaction&&oN(n),nN(n,iN())?new Proxy(n,vp):n)}function Mi(n){if(n instanceof IDBRequest)return sN(n);if(Kd.has(n))return Kd.get(n);const e=uN(n);return e!==n&&(Kd.set(n,e),lg.set(e,n)),e}const Gd=n=>lg.get(n);function cN(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=Mi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Mi(o.result),l.oldVersion,l.newVersion,Mi(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const hN=["get","getKey","getAll","getAllKeys","count"],dN=["put","add","delete","clear"],Qd=new Map;function U_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qd.get(e))return Qd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=dN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hN.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return Qd.set(e,s),s}aN(n=>({...n,get:(e,t,i)=>U_(e,t)||n.get(e,t,i),has:(e,t)=>!!U_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function pN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yp="@firebase/app",B_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new ag("@firebase/app"),mN="@firebase/app-compat",gN="@firebase/analytics-compat",vN="@firebase/analytics",yN="@firebase/app-check-compat",_N="@firebase/app-check",wN="@firebase/auth",EN="@firebase/auth-compat",SN="@firebase/database",TN="@firebase/data-connect",bN="@firebase/database-compat",IN="@firebase/functions",CN="@firebase/functions-compat",RN="@firebase/installations",PN="@firebase/installations-compat",AN="@firebase/messaging",kN="@firebase/messaging-compat",xN="@firebase/performance",MN="@firebase/performance-compat",ON="@firebase/remote-config",VN="@firebase/remote-config-compat",DN="@firebase/storage",NN="@firebase/storage-compat",LN="@firebase/firestore",FN="@firebase/vertexai-preview",zN="@firebase/firestore-compat",$N="firebase",UN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",BN={[yp]:"fire-core",[mN]:"fire-core-compat",[vN]:"fire-analytics",[gN]:"fire-analytics-compat",[_N]:"fire-app-check",[yN]:"fire-app-check-compat",[wN]:"fire-auth",[EN]:"fire-auth-compat",[SN]:"fire-rtdb",[TN]:"fire-data-connect",[bN]:"fire-rtdb-compat",[IN]:"fire-fn",[CN]:"fire-fn-compat",[RN]:"fire-iid",[PN]:"fire-iid-compat",[AN]:"fire-fcm",[kN]:"fire-fcm-compat",[xN]:"fire-perf",[MN]:"fire-perf-compat",[ON]:"fire-rc",[VN]:"fire-rc-compat",[DN]:"fire-gcs",[NN]:"fire-gcs-compat",[LN]:"fire-fst",[zN]:"fire-fst-compat",[FN]:"fire-vertex","fire-js":"fire-js",[$N]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,jN=new Map,wp=new Map;function j_(n,e){try{n.container.addComponent(e)}catch(t){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ks(n){const e=n.name;if(wp.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,n);for(const t of cc.values())j_(t,n);for(const t of jN.values())j_(t,n);return!0}function ug(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function In(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new Ba("app","Firebase",WN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=UN;function qN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:_p,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Oi.create("bad-app-name",{appName:String(r)});if(t||(t=jT()),!t)throw Oi.create("no-options");const s=cc.get(r);if(s){if(uc(t,s.options)&&uc(i,s.config))return s;throw Oi.create("duplicate-app",{appName:r})}const o=new YD(r);for(const l of wp.values())o.addComponent(l);const a=new HN(t,i,o);return cc.set(r,a),a}function KT(n=_p){const e=cc.get(n);if(!e&&n===_p&&jT())return qN();if(!e)throw Oi.create("no-app",{appName:n});return e}function Vi(n,e,t){var i;let r=(i=BN[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(a.join(" "));return}ks(new Sr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="firebase-heartbeat-database",GN=1,Ta="firebase-heartbeat-store";let Xd=null;function GT(){return Xd||(Xd=cN(KN,GN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ta)}catch(t){console.warn(t)}}}}).catch(n=>{throw Oi.create("idb-open",{originalErrorMessage:n.message})})),Xd}async function QN(n){try{const t=(await GT()).transaction(Ta),i=await t.objectStore(Ta).get(QT(n));return await t.done,i}catch(e){if(e instanceof ri)Jn.warn(e.message);else{const t=Oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jn.warn(t.message)}}}async function W_(n,e){try{const i=(await GT()).transaction(Ta,"readwrite");await i.objectStore(Ta).put(e,QT(n)),await i.done}catch(t){if(t instanceof ri)Jn.warn(t.message);else{const i=Oi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Jn.warn(i.message)}}}function QT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=1024,YN=30*24*60*60*1e3;class JN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eL(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=H_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=YN}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Jn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=H_(),{heartbeatsToSend:i,unsentEntries:r}=ZN(this._heartbeatsCache.heartbeats),s=lc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Jn.warn(t),""}}}function H_(){return new Date().toISOString().substring(0,10)}function ZN(n,e=XN){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),q_(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),q_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class eL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zD()?$D().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return W_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return W_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function q_(n){return lc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(n){ks(new Sr("platform-logger",e=>new fN(e),"PRIVATE")),ks(new Sr("heartbeat",e=>new JN(e),"PRIVATE")),Vi(yp,B_,n),Vi(yp,B_,"esm2017"),Vi("fire-js","")}tL("");var nL="firebase",iL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi(nL,iL,"app");var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,XT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function C(){}C.prototype=E.prototype,T.D=E.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(R,k,x){for(var P=Array(arguments.length-2),we=2;we<arguments.length;we++)P[we-2]=arguments[we];return E.prototype[k].apply(R,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,E,C){C||(C=0);var R=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)R[k]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(k=0;16>k;++k)R[k]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=T.g[0],C=T.g[1],k=T.g[2];var x=T.g[3],P=E+(x^C&(k^x))+R[0]+3614090360&4294967295;E=C+(P<<7&4294967295|P>>>25),P=x+(k^E&(C^k))+R[1]+3905402710&4294967295,x=E+(P<<12&4294967295|P>>>20),P=k+(C^x&(E^C))+R[2]+606105819&4294967295,k=x+(P<<17&4294967295|P>>>15),P=C+(E^k&(x^E))+R[3]+3250441966&4294967295,C=k+(P<<22&4294967295|P>>>10),P=E+(x^C&(k^x))+R[4]+4118548399&4294967295,E=C+(P<<7&4294967295|P>>>25),P=x+(k^E&(C^k))+R[5]+1200080426&4294967295,x=E+(P<<12&4294967295|P>>>20),P=k+(C^x&(E^C))+R[6]+2821735955&4294967295,k=x+(P<<17&4294967295|P>>>15),P=C+(E^k&(x^E))+R[7]+4249261313&4294967295,C=k+(P<<22&4294967295|P>>>10),P=E+(x^C&(k^x))+R[8]+1770035416&4294967295,E=C+(P<<7&4294967295|P>>>25),P=x+(k^E&(C^k))+R[9]+2336552879&4294967295,x=E+(P<<12&4294967295|P>>>20),P=k+(C^x&(E^C))+R[10]+4294925233&4294967295,k=x+(P<<17&4294967295|P>>>15),P=C+(E^k&(x^E))+R[11]+2304563134&4294967295,C=k+(P<<22&4294967295|P>>>10),P=E+(x^C&(k^x))+R[12]+1804603682&4294967295,E=C+(P<<7&4294967295|P>>>25),P=x+(k^E&(C^k))+R[13]+4254626195&4294967295,x=E+(P<<12&4294967295|P>>>20),P=k+(C^x&(E^C))+R[14]+2792965006&4294967295,k=x+(P<<17&4294967295|P>>>15),P=C+(E^k&(x^E))+R[15]+1236535329&4294967295,C=k+(P<<22&4294967295|P>>>10),P=E+(k^x&(C^k))+R[1]+4129170786&4294967295,E=C+(P<<5&4294967295|P>>>27),P=x+(C^k&(E^C))+R[6]+3225465664&4294967295,x=E+(P<<9&4294967295|P>>>23),P=k+(E^C&(x^E))+R[11]+643717713&4294967295,k=x+(P<<14&4294967295|P>>>18),P=C+(x^E&(k^x))+R[0]+3921069994&4294967295,C=k+(P<<20&4294967295|P>>>12),P=E+(k^x&(C^k))+R[5]+3593408605&4294967295,E=C+(P<<5&4294967295|P>>>27),P=x+(C^k&(E^C))+R[10]+38016083&4294967295,x=E+(P<<9&4294967295|P>>>23),P=k+(E^C&(x^E))+R[15]+3634488961&4294967295,k=x+(P<<14&4294967295|P>>>18),P=C+(x^E&(k^x))+R[4]+3889429448&4294967295,C=k+(P<<20&4294967295|P>>>12),P=E+(k^x&(C^k))+R[9]+568446438&4294967295,E=C+(P<<5&4294967295|P>>>27),P=x+(C^k&(E^C))+R[14]+3275163606&4294967295,x=E+(P<<9&4294967295|P>>>23),P=k+(E^C&(x^E))+R[3]+4107603335&4294967295,k=x+(P<<14&4294967295|P>>>18),P=C+(x^E&(k^x))+R[8]+1163531501&4294967295,C=k+(P<<20&4294967295|P>>>12),P=E+(k^x&(C^k))+R[13]+2850285829&4294967295,E=C+(P<<5&4294967295|P>>>27),P=x+(C^k&(E^C))+R[2]+4243563512&4294967295,x=E+(P<<9&4294967295|P>>>23),P=k+(E^C&(x^E))+R[7]+1735328473&4294967295,k=x+(P<<14&4294967295|P>>>18),P=C+(x^E&(k^x))+R[12]+2368359562&4294967295,C=k+(P<<20&4294967295|P>>>12),P=E+(C^k^x)+R[5]+4294588738&4294967295,E=C+(P<<4&4294967295|P>>>28),P=x+(E^C^k)+R[8]+2272392833&4294967295,x=E+(P<<11&4294967295|P>>>21),P=k+(x^E^C)+R[11]+1839030562&4294967295,k=x+(P<<16&4294967295|P>>>16),P=C+(k^x^E)+R[14]+4259657740&4294967295,C=k+(P<<23&4294967295|P>>>9),P=E+(C^k^x)+R[1]+2763975236&4294967295,E=C+(P<<4&4294967295|P>>>28),P=x+(E^C^k)+R[4]+1272893353&4294967295,x=E+(P<<11&4294967295|P>>>21),P=k+(x^E^C)+R[7]+4139469664&4294967295,k=x+(P<<16&4294967295|P>>>16),P=C+(k^x^E)+R[10]+3200236656&4294967295,C=k+(P<<23&4294967295|P>>>9),P=E+(C^k^x)+R[13]+681279174&4294967295,E=C+(P<<4&4294967295|P>>>28),P=x+(E^C^k)+R[0]+3936430074&4294967295,x=E+(P<<11&4294967295|P>>>21),P=k+(x^E^C)+R[3]+3572445317&4294967295,k=x+(P<<16&4294967295|P>>>16),P=C+(k^x^E)+R[6]+76029189&4294967295,C=k+(P<<23&4294967295|P>>>9),P=E+(C^k^x)+R[9]+3654602809&4294967295,E=C+(P<<4&4294967295|P>>>28),P=x+(E^C^k)+R[12]+3873151461&4294967295,x=E+(P<<11&4294967295|P>>>21),P=k+(x^E^C)+R[15]+530742520&4294967295,k=x+(P<<16&4294967295|P>>>16),P=C+(k^x^E)+R[2]+3299628645&4294967295,C=k+(P<<23&4294967295|P>>>9),P=E+(k^(C|~x))+R[0]+4096336452&4294967295,E=C+(P<<6&4294967295|P>>>26),P=x+(C^(E|~k))+R[7]+1126891415&4294967295,x=E+(P<<10&4294967295|P>>>22),P=k+(E^(x|~C))+R[14]+2878612391&4294967295,k=x+(P<<15&4294967295|P>>>17),P=C+(x^(k|~E))+R[5]+4237533241&4294967295,C=k+(P<<21&4294967295|P>>>11),P=E+(k^(C|~x))+R[12]+1700485571&4294967295,E=C+(P<<6&4294967295|P>>>26),P=x+(C^(E|~k))+R[3]+2399980690&4294967295,x=E+(P<<10&4294967295|P>>>22),P=k+(E^(x|~C))+R[10]+4293915773&4294967295,k=x+(P<<15&4294967295|P>>>17),P=C+(x^(k|~E))+R[1]+2240044497&4294967295,C=k+(P<<21&4294967295|P>>>11),P=E+(k^(C|~x))+R[8]+1873313359&4294967295,E=C+(P<<6&4294967295|P>>>26),P=x+(C^(E|~k))+R[15]+4264355552&4294967295,x=E+(P<<10&4294967295|P>>>22),P=k+(E^(x|~C))+R[6]+2734768916&4294967295,k=x+(P<<15&4294967295|P>>>17),P=C+(x^(k|~E))+R[13]+1309151649&4294967295,C=k+(P<<21&4294967295|P>>>11),P=E+(k^(C|~x))+R[4]+4149444226&4294967295,E=C+(P<<6&4294967295|P>>>26),P=x+(C^(E|~k))+R[11]+3174756917&4294967295,x=E+(P<<10&4294967295|P>>>22),P=k+(E^(x|~C))+R[2]+718787259&4294967295,k=x+(P<<15&4294967295|P>>>17),P=C+(x^(k|~E))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+x&4294967295}i.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var C=E-this.blockSize,R=this.B,k=this.h,x=0;x<E;){if(k==0)for(;x<=C;)r(this,T,x),x+=this.blockSize;if(typeof T=="string"){for(;x<E;)if(R[k++]=T.charCodeAt(x++),k==this.blockSize){r(this,R),k=0;break}}else for(;x<E;)if(R[k++]=T[x++],k==this.blockSize){r(this,R),k=0;break}}this.h=k,this.o+=E},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var C=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=C&255,C/=256;for(this.u(T),T=Array(16),E=C=0;4>E;++E)for(var R=0;32>R;R+=8)T[C++]=this.g[E]>>>R&255;return T};function s(T,E){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=E(T)}function o(T,E){this.h=E;for(var C=[],R=!0,k=T.length-1;0<=k;k--){var x=T[k]|0;R&&x==E||(C[k]=x,R=!1)}this.g=C}var a={};function l(T){return-128<=T&&128>T?s(T,function(E){return new o([E|0],0>E?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return b(c(-T));for(var E=[],C=1,R=0;T>=C;R++)E[R]=T/C|0,C*=4294967296;return new o(E,0)}function h(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return b(h(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(E,8)),R=d,k=0;k<T.length;k+=8){var x=Math.min(8,T.length-k),P=parseInt(T.substring(k,k+x),E);8>x?(x=c(Math.pow(E,x)),R=R.j(x).add(c(P))):(R=R.j(C),R=R.add(c(P)))}return R}var d=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(_(this))return-b(this).m();for(var T=0,E=1,C=0;C<this.g.length;C++){var R=this.i(C);T+=(0<=R?R:4294967296+R)*E,E*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(_(this))return"-"+b(this).toString(T);for(var E=c(Math.pow(T,6)),C=this,R="";;){var k=A(C,E).g;C=v(C,k.j(E));var x=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=k,y(C))return x+R;for(;6>x.length;)x="0"+x;R=x+R}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function _(T){return T.h==-1}n.l=function(T){return T=v(this,T),_(T)?-1:y(T)?0:1};function b(T){for(var E=T.g.length,C=[],R=0;R<E;R++)C[R]=~T.g[R];return new o(C,~T.h).add(p)}n.abs=function(){return _(this)?b(this):this},n.add=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],R=0,k=0;k<=E;k++){var x=R+(this.i(k)&65535)+(T.i(k)&65535),P=(x>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);R=P>>>16,x&=65535,P&=65535,C[k]=P<<16|x}return new o(C,C[C.length-1]&-2147483648?-1:0)};function v(T,E){return T.add(b(E))}n.j=function(T){if(y(this)||y(T))return d;if(_(this))return _(T)?b(this).j(b(T)):b(b(this).j(T));if(_(T))return b(this.j(b(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var E=this.g.length+T.g.length,C=[],R=0;R<2*E;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<T.g.length;k++){var x=this.i(R)>>>16,P=this.i(R)&65535,we=T.i(k)>>>16,me=T.i(k)&65535;C[2*R+2*k]+=P*me,w(C,2*R+2*k),C[2*R+2*k+1]+=x*me,w(C,2*R+2*k+1),C[2*R+2*k+1]+=P*we,w(C,2*R+2*k+1),C[2*R+2*k+2]+=x*we,w(C,2*R+2*k+2)}for(R=0;R<E;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=E;R<2*E;R++)C[R]=0;return new o(C,0)};function w(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function I(T,E){this.g=T,this.h=E}function A(T,E){if(y(E))throw Error("division by zero");if(y(T))return new I(d,d);if(_(T))return E=A(b(T),E),new I(b(E.g),b(E.h));if(_(E))return E=A(T,b(E)),new I(b(E.g),E.h);if(30<T.g.length){if(_(T)||_(E))throw Error("slowDivide_ only works with positive integers.");for(var C=p,R=E;0>=R.l(T);)C=V(C),R=V(R);var k=N(C,1),x=N(R,1);for(R=N(R,2),C=N(C,2);!y(R);){var P=x.add(R);0>=P.l(T)&&(k=k.add(C),x=P),R=N(R,1),C=N(C,1)}return E=v(T,k.j(E)),new I(k,E)}for(k=d;0<=T.l(E);){for(C=Math.max(1,Math.floor(T.m()/E.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),x=c(C),P=x.j(E);_(P)||0<P.l(T);)C-=R,x=c(C),P=x.j(E);y(x)&&(x=p),k=k.add(x),T=v(T,P)}return new I(k,T)}n.A=function(T){return A(this,T).h},n.and=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],R=0;R<E;R++)C[R]=this.i(R)&T.i(R);return new o(C,this.h&T.h)},n.or=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],R=0;R<E;R++)C[R]=this.i(R)|T.i(R);return new o(C,this.h|T.h)},n.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],R=0;R<E;R++)C[R]=this.i(R)^T.i(R);return new o(C,this.h^T.h)};function V(T){for(var E=T.g.length+1,C=[],R=0;R<E;R++)C[R]=T.i(R)<<1|T.i(R-1)>>>31;return new o(C,T.h)}function N(T,E){var C=E>>5;E%=32;for(var R=T.g.length-C,k=[],x=0;x<R;x++)k[x]=0<E?T.i(x+C)>>>E|T.i(x+C+1)<<32-E:T.i(x+C);return new o(k,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,XT=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,hr=o}).apply(typeof K_<"u"?K_:typeof self<"u"?self:typeof window<"u"?window:{});var Gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YT,Ao,JT,vu,Ep,ZT,eb,tb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gl=="object"&&Gl];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=t(this);function r(u,f){if(f)e:{var m=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var M=u[S];if(!(M in m))break e;m=m[M]}u=u[u.length-1],S=m[u],f=f(S),f!=S&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,S=!1,M={next:function(){if(!S&&m<u.length){var D=m++;return{value:f(D,u[D]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var S=m.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(S,M,D){for(var B=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)B[_e-2]=arguments[_e];return f.prototype[M].apply(S,B)}}function _(u){const f=u.length;if(0<f){const m=Array(f);for(let S=0;S<f;S++)m[S]=u[S];return m}return[]}function b(u,f){for(let m=1;m<arguments.length;m++){const S=arguments[m];if(l(S)){const M=u.length||0,D=S.length||0;u.length=M+D;for(let B=0;B<D;B++)u[M+B]=S[B]}else u.push(S)}}class v{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var V=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function N(u,f,m){for(const S in u)f.call(m,u[S],S,u)}function T(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function E(u){const f={};for(const m in u)f[m]=u[m];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,f){let m,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(m in S)u[m]=S[m];for(let D=0;D<C.length;D++)m=C[D],Object.prototype.hasOwnProperty.call(S,m)&&(u[m]=S[m])}}function k(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function x(u){a.setTimeout(()=>{throw u},0)}function P(){var u=q;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class we{constructor(){this.h=this.g=null}add(f,m){const S=me.get();S.set(f,m),this.h?this.h.next=S:this.g=S,this.h=S}}var me=new v(()=>new pe,u=>u.reset());class pe{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,U=!1,q=new we,G=()=>{const u=a.Promise.resolve(void 0);Pe=()=>{u.then(ue)}};var ue=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(m){x(m)}var f=me;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}U=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var He=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Xe(u,f){if(se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{A(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Xe.aa.h.call(this)}}y(Xe,se);var Ne={2:"touch",3:"pen",4:"mouse"};Xe.prototype.h=function(){Xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),nn=0;function Vr(u,f,m,S,M){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!S,this.ha=M,this.key=++nn,this.da=this.fa=!1}function Dr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Gi(u){this.src=u,this.g={},this.h=0}Gi.prototype.add=function(u,f,m,S,M){var D=u.toString();u=this.g[D],u||(u=this.g[D]=[],this.h++);var B=Xs(u,f,S,M);return-1<B?(f=u[B],m||(f.fa=!1)):(f=new Vr(f,this.src,D,!!S,M),f.fa=m,u.push(f)),f};function Nr(u,f){var m=f.type;if(m in u.g){var S=u.g[m],M=Array.prototype.indexOf.call(S,f,void 0),D;(D=0<=M)&&Array.prototype.splice.call(S,M,1),D&&(Dr(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Xs(u,f,m,S){for(var M=0;M<u.length;++M){var D=u[M];if(!D.da&&D.listener==f&&D.capture==!!m&&D.ha==S)return M}return-1}var Lr="closure_lm_"+(1e6*Math.random()|0),Ys={};function Yg(u,f,m,S,M){if(S&&S.once)return Zg(u,f,m,S,M);if(Array.isArray(f)){for(var D=0;D<f.length;D++)Yg(u,f[D],m,S,M);return null}return m=Ah(m),u&&u[qe]?u.K(f,m,c(S)?!!S.capture:!!S,M):Jg(u,f,m,!1,S,M)}function Jg(u,f,m,S,M,D){if(!f)throw Error("Invalid event type");var B=c(M)?!!M.capture:!!M,_e=Rh(u);if(_e||(u[Lr]=_e=new Gi(u)),m=_e.add(f,m,S,B,D),m.proxy)return m;if(S=GI(),m.proxy=S,S.src=u,S.listener=m,u.addEventListener)He||(M=B),M===void 0&&(M=!1),u.addEventListener(f.toString(),S,M);else if(u.attachEvent)u.attachEvent(tv(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return m}function GI(){function u(m){return f.call(u.src,u.listener,m)}const f=QI;return u}function Zg(u,f,m,S,M){if(Array.isArray(f)){for(var D=0;D<f.length;D++)Zg(u,f[D],m,S,M);return null}return m=Ah(m),u&&u[qe]?u.L(f,m,c(S)?!!S.capture:!!S,M):Jg(u,f,m,!0,S,M)}function ev(u,f,m,S,M){if(Array.isArray(f))for(var D=0;D<f.length;D++)ev(u,f[D],m,S,M);else S=c(S)?!!S.capture:!!S,m=Ah(m),u&&u[qe]?(u=u.i,f=String(f).toString(),f in u.g&&(D=u.g[f],m=Xs(D,m,S,M),-1<m&&(Dr(D[m]),Array.prototype.splice.call(D,m,1),D.length==0&&(delete u.g[f],u.h--)))):u&&(u=Rh(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Xs(f,m,S,M)),(m=-1<u?f[u]:null)&&Ch(m))}function Ch(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[qe])Nr(f.i,u);else{var m=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(m,S,u.capture):f.detachEvent?f.detachEvent(tv(m),S):f.addListener&&f.removeListener&&f.removeListener(S),(m=Rh(f))?(Nr(m,u),m.h==0&&(m.src=null,f[Lr]=null)):Dr(u)}}}function tv(u){return u in Ys?Ys[u]:Ys[u]="on"+u}function QI(u,f){if(u.da)u=!0;else{f=new Xe(f,this);var m=u.listener,S=u.ha||u.src;u.fa&&Ch(u),u=m.call(S,f)}return u}function Rh(u){return u=u[Lr],u instanceof Gi?u:null}var Ph="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ah(u){return typeof u=="function"?u:(u[Ph]||(u[Ph]=function(f){return u.handleEvent(f)}),u[Ph])}function ht(){J.call(this),this.i=new Gi(this),this.M=this,this.F=null}y(ht,J),ht.prototype[qe]=!0,ht.prototype.removeEventListener=function(u,f,m,S){ev(this,u,f,m,S)};function Tt(u,f){var m,S=u.F;if(S)for(m=[];S;S=S.F)m.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new se(f,u);else if(f instanceof se)f.target=f.target||u;else{var M=f;f=new se(S,u),R(f,M)}if(M=!0,m)for(var D=m.length-1;0<=D;D--){var B=f.g=m[D];M=el(B,S,!0,f)&&M}if(B=f.g=u,M=el(B,S,!0,f)&&M,M=el(B,S,!1,f)&&M,m)for(D=0;D<m.length;D++)B=f.g=m[D],M=el(B,S,!1,f)&&M}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],S=0;S<m.length;S++)Dr(m[S]);delete u.g[f],u.h--}}this.F=null},ht.prototype.K=function(u,f,m,S){return this.i.add(String(u),f,!1,m,S)},ht.prototype.L=function(u,f,m,S){return this.i.add(String(u),f,!0,m,S)};function el(u,f,m,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,D=0;D<f.length;++D){var B=f[D];if(B&&!B.da&&B.capture==m){var _e=B.listener,tt=B.ha||B.src;B.fa&&Nr(u.i,B),M=_e.call(tt,S)!==!1&&M}}return M&&!S.defaultPrevented}function nv(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function iv(u){u.g=nv(()=>{u.g=null,u.i&&(u.i=!1,iv(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class XI extends J{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:iv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(u){J.call(this),this.h=u,this.g={}}y(Js,J);var rv=[];function sv(u){N(u.g,function(f,m){this.g.hasOwnProperty(m)&&Ch(f)},u),u.g={}}Js.prototype.N=function(){Js.aa.N.call(this),sv(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kh=a.JSON.stringify,YI=a.JSON.parse,JI=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function xh(){}xh.prototype.h=null;function ov(u){return u.h||(u.h=u.i())}function av(){}var Zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mh(){se.call(this,"d")}y(Mh,se);function Oh(){se.call(this,"c")}y(Oh,se);var Qi={},lv=null;function tl(){return lv=lv||new ht}Qi.La="serverreachability";function uv(u){se.call(this,Qi.La,u)}y(uv,se);function eo(u){const f=tl();Tt(f,new uv(f))}Qi.STAT_EVENT="statevent";function cv(u,f){se.call(this,Qi.STAT_EVENT,u),this.stat=f}y(cv,se);function bt(u){const f=tl();Tt(f,new cv(f,u))}Qi.Ma="timingevent";function hv(u,f){se.call(this,Qi.Ma,u),this.size=f}y(hv,se);function to(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function no(){this.g=!0}no.prototype.xa=function(){this.g=!1};function ZI(u,f,m,S,M,D){u.info(function(){if(u.g)if(D)for(var B="",_e=D.split("&"),tt=0;tt<_e.length;tt++){var ce=_e[tt].split("=");if(1<ce.length){var dt=ce[0];ce=ce[1];var ft=dt.split("_");B=2<=ft.length&&ft[1]=="type"?B+(dt+"="+ce+"&"):B+(dt+"=redacted&")}}else B=null;else B=D;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+f+`
`+m+`
`+B})}function eC(u,f,m,S,M,D,B){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+f+`
`+m+`
`+D+" "+B})}function Fr(u,f,m,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+nC(u,m)+(S?" "+S:"")})}function tC(u,f){u.info(function(){return"TIMEOUT: "+f})}no.prototype.info=function(){};function nC(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var S=m[u];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var D=M[0];if(D!="noop"&&D!="stop"&&D!="close")for(var B=1;B<M.length;B++)M[B]=""}}}}return kh(m)}catch{return f}}var nl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vh;function il(){}y(il,xh),il.prototype.g=function(){return new XMLHttpRequest},il.prototype.i=function(){return{}},Vh=new il;function si(u,f,m,S){this.j=u,this.i=f,this.l=m,this.R=S||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fv}function fv(){this.i=null,this.g="",this.h=!1}var pv={},Dh={};function Nh(u,f,m){u.L=1,u.v=al(Vn(f)),u.m=m,u.P=!0,mv(u,null)}function mv(u,f){u.F=Date.now(),rl(u),u.A=Vn(u.v);var m=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Av(m.i,"t",S),u.C=0,m=u.j.J,u.h=new fv,u.g=Kv(u.j,m?f:null,!u.m),0<u.O&&(u.M=new XI(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,S=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(rv[0]=M.toString()),M=rv);for(var D=0;D<M.length;D++){var B=Yg(m,M[D],S||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),eo(),ZI(u.i,u.u,u.A,u.l,u.R,u.m)}si.prototype.ca=function(u){u=u.target;const f=this.M;f&&Dn(u)==3?f.j():this.Y(u)},si.prototype.Y=function(u){try{if(u==this.g)e:{const ft=Dn(this.g);var f=this.g.Ba();const Ur=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Nv(this.g)))){this.J||ft!=4||f==7||(f==8||0>=Ur?eo(3):eo(2)),Lh(this);var m=this.g.Z();this.X=m;t:if(gv(this)){var S=Nv(this.g);u="";var M=S.length,D=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xi(this),io(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(D&&f==M-1)});S.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,eC(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,tt=this.g;if((_e=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(_e)){var ce=_e;break t}}ce=null}if(m=ce)Fr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fh(this,m);else{this.o=!1,this.s=3,bt(12),Xi(this),io(this);break e}}if(this.P){m=!0;let rn;for(;!this.J&&this.C<B.length;)if(rn=iC(this,B),rn==Dh){ft==4&&(this.s=4,bt(14),m=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==pv){this.s=4,bt(15),Fr(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Fr(this.i,this.l,rn,null),Fh(this,rn);if(gv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||B.length!=0||this.h.h||(this.s=1,bt(16),m=!1),this.o=this.o&&m,!m)Fr(this.i,this.l,B,"[Invalid Chunked Response]"),Xi(this),io(this);else if(0<B.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Wh(dt),dt.M=!0,bt(11))}}else Fr(this.i,this.l,B,null),Fh(this,B);ft==4&&Xi(this),this.o&&!this.J&&(ft==4?jv(this.j,this):(this.o=!1,rl(this)))}else wC(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Xi(this),io(this)}}}catch{}finally{}};function gv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function iC(u,f){var m=u.C,S=f.indexOf(`
`,m);return S==-1?Dh:(m=Number(f.substring(m,S)),isNaN(m)?pv:(S+=1,S+m>f.length?Dh:(f=f.slice(S,S+m),u.C=S+m,f)))}si.prototype.cancel=function(){this.J=!0,Xi(this)};function rl(u){u.S=Date.now()+u.I,vv(u,u.I)}function vv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=to(p(u.ba,u),f)}function Lh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}si.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(tC(this.i,this.A),this.L!=2&&(eo(),bt(17)),Xi(this),this.s=2,io(this)):vv(this,this.S-u)};function io(u){u.j.G==0||u.J||jv(u.j,u)}function Xi(u){Lh(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,sv(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Fh(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||zh(m.h,u))){if(!u.K&&zh(m.h,u)&&m.G==3){try{var S=m.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)fl(m),hl(m);else break e;jh(m),bt(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=to(p(m.Za,m),6e3));if(1>=wv(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ji(m,11)}else if((u.K||m.g==u)&&fl(m),!w(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let ce=M[f];if(m.T=ce[0],ce=ce[1],m.G==2)if(ce[0]=="c"){m.K=ce[1],m.ia=ce[2];const dt=ce[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ft=ce[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const Ur=ce[5];Ur!=null&&typeof Ur=="number"&&0<Ur&&(S=1.5*Ur,m.L=S,m.j.info("backChannelRequestTimeoutMs_="+S)),S=m;const rn=u.g;if(rn){const ml=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var D=S.h;D.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&($h(D,D.h),D.h=null))}if(S.D){const Hh=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hh&&(S.ya=Hh,Se(S.I,S.D,Hh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),S=m;var B=u;if(S.qa=qv(S,S.J?S.ia:null,S.W),B.K){Ev(S.h,B);var _e=B,tt=S.L;tt&&(_e.I=tt),_e.B&&(Lh(_e),rl(_e)),S.g=B}else Uv(S);0<m.i.length&&dl(m)}else ce[0]!="stop"&&ce[0]!="close"||Ji(m,7);else m.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Ji(m,7):Bh(m):ce[0]!="noop"&&m.l&&m.l.ta(ce),m.v=0)}}eo(4)}catch{}}var rC=class{constructor(u,f){this.g=u,this.map=f}};function yv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _v(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wv(u){return u.h?1:u.g?u.g.size:0}function zh(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function $h(u,f){u.g?u.g.add(f):u.h=f}function Ev(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}yv.prototype.cancel=function(){if(this.i=Sv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Sv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return _(u.i)}function sC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,S=0;S<m;S++)f.push(u[S]);return f}f=[],m=0;for(S in u)f[m++]=u[S];return f}function oC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const S in u)f[m++]=S;return f}}}function Tv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=oC(u),S=sC(u),M=S.length,D=0;D<M;D++)f.call(void 0,S[D],m&&m[D],u)}var bv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aC(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var S=u[m].indexOf("="),M=null;if(0<=S){var D=u[m].substring(0,S);M=u[m].substring(S+1)}else D=u[m];f(D,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Yi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Yi){this.h=u.h,sl(this,u.j),this.o=u.o,this.g=u.g,ol(this,u.s),this.l=u.l;var f=u.i,m=new oo;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Iv(this,m),this.m=u.m}else u&&(f=String(u).match(bv))?(this.h=!1,sl(this,f[1]||"",!0),this.o=ro(f[2]||""),this.g=ro(f[3]||"",!0),ol(this,f[4]),this.l=ro(f[5]||"",!0),Iv(this,f[6]||"",!0),this.m=ro(f[7]||"")):(this.h=!1,this.i=new oo(null,this.h))}Yi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(so(f,Cv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(so(f,Cv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(so(m,m.charAt(0)=="/"?cC:uC,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",so(m,dC)),u.join("")};function Vn(u){return new Yi(u)}function sl(u,f,m){u.j=m?ro(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function ol(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Iv(u,f,m){f instanceof oo?(u.i=f,fC(u.i,u.h)):(m||(f=so(f,hC)),u.i=new oo(f,u.h))}function Se(u,f,m){u.i.set(f,m)}function al(u){return Se(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ro(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function so(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,lC),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cv=/[#\/\?@]/g,uC=/[#\?:]/g,cC=/[#\?]/g,hC=/[#\?@]/g,dC=/#/g;function oo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function oi(u){u.g||(u.g=new Map,u.h=0,u.i&&aC(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=oo.prototype,n.add=function(u,f){oi(this),this.i=null,u=zr(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Rv(u,f){oi(u),f=zr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Pv(u,f){return oi(u),f=zr(u,f),u.g.has(f)}n.forEach=function(u,f){oi(this),this.g.forEach(function(m,S){m.forEach(function(M){u.call(f,M,S,this)},this)},this)},n.na=function(){oi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let S=0;S<f.length;S++){const M=u[S];for(let D=0;D<M.length;D++)m.push(f[S])}return m},n.V=function(u){oi(this);let f=[];if(typeof u=="string")Pv(this,u)&&(f=f.concat(this.g.get(zr(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return oi(this),this.i=null,u=zr(this,u),Pv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Av(u,f,m){Rv(u,f),0<m.length&&(u.i=null,u.g.set(zr(u,f),_(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var S=f[m];const D=encodeURIComponent(String(S)),B=this.V(S);for(S=0;S<B.length;S++){var M=D;B[S]!==""&&(M+="="+encodeURIComponent(String(B[S]))),u.push(M)}}return this.i=u.join("&")};function zr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function fC(u,f){f&&!u.j&&(oi(u),u.i=null,u.g.forEach(function(m,S){var M=S.toLowerCase();S!=M&&(Rv(this,S),Av(this,M,m))},u)),u.j=f}function pC(u,f){const m=new no;if(a.Image){const S=new Image;S.onload=g(ai,m,"TestLoadImage: loaded",!0,f,S),S.onerror=g(ai,m,"TestLoadImage: error",!1,f,S),S.onabort=g(ai,m,"TestLoadImage: abort",!1,f,S),S.ontimeout=g(ai,m,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function mC(u,f){const m=new no,S=new AbortController,M=setTimeout(()=>{S.abort(),ai(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(D=>{clearTimeout(M),D.ok?ai(m,"TestPingServer: ok",!0,f):ai(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),ai(m,"TestPingServer: error",!1,f)})}function ai(u,f,m,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(m)}catch{}}function gC(){this.g=new JI}function vC(u,f,m){const S=m||"";try{Tv(u,function(M,D){let B=M;c(M)&&(B=kh(M)),f.push(S+D+"="+encodeURIComponent(B))})}catch(M){throw f.push(S+"type="+encodeURIComponent("_badmap")),M}}function ll(u){this.l=u.Ub||null,this.j=u.eb||!1}y(ll,xh),ll.prototype.g=function(){return new ul(this.l,this.j)},ll.prototype.i=function(u){return function(){return u}}({});function ul(u,f){ht.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(ul,ht),n=ul.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,lo(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,lo(this)),this.g&&(this.readyState=3,lo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function kv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ao(this):lo(this),this.readyState==3&&kv(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ao(this))},n.Qa=function(u){this.g&&(this.response=u,ao(this))},n.ga=function(){this.g&&ao(this)};function ao(u){u.readyState=4,u.l=null,u.j=null,u.v=null,lo(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function lo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xv(u){let f="";return N(u,function(m,S){f+=S,f+=":",f+=m,f+=`\r
`}),f}function Uh(u,f,m){e:{for(S in m){var S=!1;break e}S=!0}S||(m=xv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Se(u,f,m))}function Oe(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Oe,ht);var yC=/^https?$/i,_C=["POST","PUT"];n=Oe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vh.g(),this.v=this.o?ov(this.o):ov(Vh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(D){Mv(this,D);return}if(u=m||"",m=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)m.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const D of S.keys())m.set(D,S.get(D));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(m.keys()).find(D=>D.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_C,f,void 0))||S||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,B]of m)this.g.setRequestHeader(D,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dv(this),this.u=!0,this.g.send(u),this.u=!1}catch(D){Mv(this,D)}};function Mv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Ov(u),cl(u)}function Ov(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),cl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cl(this,!0)),Oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vv(this):this.bb())},n.bb=function(){Vv(this)};function Vv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Dn(u)!=4||u.Z()!=2)){if(u.u&&Dn(u)==4)nv(u.Ea,0,u);else if(Tt(u,"readystatechange"),Dn(u)==4){u.h=!1;try{const B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var S;if(S=B===0){var M=String(u.D).match(bv)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),S=!yC.test(M?M.toLowerCase():"")}m=S}if(m)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var D=2<Dn(u)?u.g.statusText:""}catch{D=""}u.l=D+" ["+u.Z()+"]",Ov(u)}}finally{cl(u)}}}}function cl(u,f){if(u.g){Dv(u);const m=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Tt(u,"ready");try{m.onreadystatechange=S}catch{}}}function Dv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Dn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),YI(f)}};function Nv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function wC(u){const f={};u=(u.g&&2<=Dn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(w(u[S]))continue;var m=k(u[S]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const D=f[M]||[];f[M]=D,D.push(m)}T(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Lv(u){this.Aa=0,this.i=[],this.j=new no,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uo("baseRetryDelayMs",5e3,u),this.cb=uo("retryDelaySeedMs",1e4,u),this.Wa=uo("forwardChannelMaxRetries",2,u),this.wa=uo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new yv(u&&u.concurrentRequestLimit),this.Da=new gC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lv.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,S){bt(0),this.W=u,this.H=f||{},m&&S!==void 0&&(this.H.OSID=m,this.H.OAID=S),this.F=this.X,this.I=qv(this,null,this.W),dl(this)};function Bh(u){if(Fv(u),u.G==3){var f=u.U++,m=Vn(u.I);if(Se(m,"SID",u.K),Se(m,"RID",f),Se(m,"TYPE","terminate"),co(u,m),f=new si(u,u.j,f),f.L=2,f.v=al(Vn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Kv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),rl(f)}Hv(u)}function hl(u){u.g&&(Wh(u),u.g.cancel(),u.g=null)}function Fv(u){hl(u),u.u&&(a.clearTimeout(u.u),u.u=null),fl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function dl(u){if(!_v(u.h)&&!u.s){u.s=!0;var f=u.Ga;Pe||G(),U||(Pe(),U=!0),q.add(f,u),u.B=0}}function EC(u,f){return wv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=to(p(u.Ga,u,f),Wv(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new si(this,this.j,u);let D=this.o;if(this.S&&(D?(D=E(D),R(D,this.S)):D=this.S),this.m!==null||this.O||(M.H=D,D=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var S=this.i[m];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=$v(this,M,f),m=Vn(this.I),Se(m,"RID",u),Se(m,"CVER",22),this.D&&Se(m,"X-HTTP-Session-Id",this.D),co(this,m),D&&(this.O?f="headers="+encodeURIComponent(String(xv(D)))+"&"+f:this.m&&Uh(m,this.m,D)),$h(this.h,M),this.Ua&&Se(m,"TYPE","init"),this.P?(Se(m,"$req",f),Se(m,"SID","null"),M.T=!0,Nh(M,m,null)):Nh(M,m,f),this.G=2}}else this.G==3&&(u?zv(this,u):this.i.length==0||_v(this.h)||zv(this))};function zv(u,f){var m;f?m=f.l:m=u.U++;const S=Vn(u.I);Se(S,"SID",u.K),Se(S,"RID",m),Se(S,"AID",u.T),co(u,S),u.m&&u.o&&Uh(S,u.m,u.o),m=new si(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=$v(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$h(u.h,m),Nh(m,S,f)}function co(u,f){u.H&&N(u.H,function(m,S){Se(f,S,m)}),u.l&&Tv({},function(m,S){Se(f,S,m)})}function $v(u,f,m){m=Math.min(u.i.length,m);var S=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let D=-1;for(;;){const B=["count="+m];D==-1?0<m?(D=M[0].g,B.push("ofs="+D)):D=0:B.push("ofs="+D);let _e=!0;for(let tt=0;tt<m;tt++){let ce=M[tt].g;const dt=M[tt].map;if(ce-=D,0>ce)D=Math.max(0,M[tt].g-100),_e=!1;else try{vC(dt,B,"req"+ce+"_")}catch{S&&S(dt)}}if(_e){S=B.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,S}function Uv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Pe||G(),U||(Pe(),U=!0),q.add(f,u),u.v=0}}function jh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=to(p(u.Fa,u),Wv(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Bv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=to(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),hl(this),Bv(this))};function Wh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Bv(u){u.g=new si(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Vn(u.qa);Se(f,"RID","rpc"),Se(f,"SID",u.K),Se(f,"AID",u.T),Se(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Se(f,"TO",u.ja),Se(f,"TYPE","xmlhttp"),co(u,f),u.m&&u.o&&Uh(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=al(Vn(f)),m.m=null,m.P=!0,mv(m,u)}n.Za=function(){this.C!=null&&(this.C=null,hl(this),jh(this),bt(19))};function fl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function jv(u,f){var m=null;if(u.g==f){fl(u),Wh(u),u.g=null;var S=2}else if(zh(u.h,f))m=f.D,Ev(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;S=tl(),Tt(S,new hv(S,m)),dl(u)}else Uv(u);else if(M=f.s,M==3||M==0&&0<f.X||!(S==1&&EC(u,f)||S==2&&jh(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),M){case 1:Ji(u,5);break;case 4:Ji(u,10);break;case 3:Ji(u,6);break;default:Ji(u,2)}}}function Wv(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Ji(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),S=u.Xa;const M=!S;S=new Yi(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sl(S,"https"),al(S),M?pC(S.toString(),m):mC(S.toString(),m)}else bt(2);u.G=0,u.l&&u.l.sa(f),Hv(u),Fv(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Hv(u){if(u.G=0,u.ka=[],u.l){const f=Sv(u.h);(f.length!=0||u.i.length!=0)&&(b(u.ka,f),b(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function qv(u,f,m){var S=m instanceof Yi?Vn(m):new Yi(m);if(S.g!="")f&&(S.g=f+"."+S.g),ol(S,S.s);else{var M=a.location;S=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var D=new Yi(null);S&&sl(D,S),f&&(D.g=f),M&&ol(D,M),m&&(D.l=m),S=D}return m=u.D,f=u.ya,m&&f&&Se(S,m,f),Se(S,"VER",u.la),co(u,S),S}function Kv(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Oe(new ll({eb:m})):new Oe(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gv(){}n=Gv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pl(){}pl.prototype.g=function(u,f){return new Ft(u,f)};function Ft(u,f){ht.call(this),this.g=new Lv(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new $r(this)}y(Ft,ht),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Bh(this.g)},Ft.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=kh(u),u=m);f.i.push(new rC(f.Ya++,u)),f.G==3&&dl(f)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Bh(this.g),delete this.g,Ft.aa.N.call(this)};function Qv(u){Mh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(Qv,Mh);function Xv(){Oh.call(this),this.status=1}y(Xv,Oh);function $r(u){this.g=u}y($r,Gv),$r.prototype.ua=function(){Tt(this.g,"a")},$r.prototype.ta=function(u){Tt(this.g,new Qv(u))},$r.prototype.sa=function(u){Tt(this.g,new Xv)},$r.prototype.ra=function(){Tt(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,tb=function(){return new pl},eb=function(){return tl()},ZT=Qi,Ep={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nl.NO_ERROR=0,nl.TIMEOUT=8,nl.HTTP_ERROR=6,vu=nl,dv.COMPLETE="complete",JT=dv,av.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Ao=av,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,YT=Oe}).apply(typeof Gl<"u"?Gl:typeof self<"u"?self:typeof window<"u"?window:{});const G_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new ag("@firebase/firestore");function To(){return Tr.logLevel}function H(n,...e){if(Tr.logLevel<=oe.DEBUG){const t=e.map(cg);Tr.debug(`Firestore (${Ws}): ${n}`,...t)}}function Zn(n,...e){if(Tr.logLevel<=oe.ERROR){const t=e.map(cg);Tr.error(`Firestore (${Ws}): ${n}`,...t)}}function xs(n,...e){if(Tr.logLevel<=oe.WARN){const t=e.map(cg);Tr.warn(`Firestore (${Ws}): ${n}`,...t)}}function cg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(n="Unexpected state"){const e=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: `+n;throw Zn(e),new Error(e)}function ve(n,e){n||ee()}function ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}}class sL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oL{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Di,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Di)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string"),new nb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new yt(e)}}class aL{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lL{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new aL(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ve(this.o===void 0);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new uL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=hL(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function he(n,e){return n<e?-1:n>e?1:0}function Ms(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Qe(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Qe(0,0))}static max(){return new te(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t,i){t===void 0?t=0:t>e.length&&ee(),i===void 0?i=e.length-t:i>e.length-t&&ee(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ba.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ie extends ba{construct(e,t,i){return new Ie(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new W(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Ie(t)}static emptyPath(){return new Ie([])}}const dL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends ba{construct(e,t,i){return new ot(e,t,i)}static isValidIdentifier(e){return dL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new W(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new W(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ie.fromString(e))}static fromName(e){return new Q(Ie.fromString(e).popFirst(5))}static empty(){return new Q(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ie(e.slice()))}}function fL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new Qe(t+1,0):new Qe(t,i));return new Ui(r,Q.empty(),e)}function pL(n){return new Ui(n.readTime,n.key,-1)}class Ui{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ui(te.min(),Q.empty(),-1)}static max(){return new Ui(te.max(),Q.empty(),-1)}}function mL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==gL)throw n;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):F.reject(t)}static resolve(e){return new F((t,i)=>{t(e)})}static reject(e){return new F((t,i)=>{i(e)})}static waitFor(e){return new F((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=F.resolve(!1);for(const i of e)t=t.next(r=>r?F.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,t){return new F((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}function yL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ha(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hg.oe=-1;function ch(n){return n==null}function hc(n){return n===0&&1/n==-1/0}function _L(n){return typeof n=="number"&&Number.isInteger(n)&&!hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,t){this.comparator=e,this.root=t||rt.EMPTY}insert(e,t){return new Me(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??rt.RED,this.left=r??rt.EMPTY,this.right=s??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new rt(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return rt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,t,i,r,s){return this}insert(e,t,i){return new rt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(e){return new X_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new lt(this.comparator);return t.data=e,t}}class X_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new un([])}unionWith(e){let t=new lt(ot.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sb("Invalid base64 string: "+s):s}}(e);return new ct(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const wL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(n){if(ve(!!n),typeof n=="string"){let e=0;const t=wL.exec(n);if(ve(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function br(n){return typeof n=="string"?ct.fromBase64String(n):ct.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function fg(n){const e=n.mapValue.fields.__previous_value__;return dg(e)?fg(e):e}function Ia(n){const e=Bi(n.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ca{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ir(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dg(n)?4:TL(n)?9007199254740991:SL(n)?10:11:ee()}function Mn(n,e){if(n===e)return!0;const t=Ir(n);if(t!==Ir(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ia(n).isEqual(Ia(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Bi(r.timestampValue),a=Bi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return br(r.bytesValue).isEqual(br(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Le(r.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(r.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Le(r.integerValue)===Le(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Le(r.doubleValue),a=Le(s.doubleValue);return o===a?hc(o)===hc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ms(n.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Q_(o)!==Q_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mn(o[l],a[l])))return!1;return!0}(n,e);default:return ee()}}function Ra(n,e){return(n.values||[]).find(t=>Mn(t,e))!==void 0}function Os(n,e){if(n===e)return 0;const t=Ir(n),i=Ir(e);if(t!==i)return he(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Le(s.integerValue||s.doubleValue),l=Le(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Y_(n.timestampValue,e.timestampValue);case 4:return Y_(Ia(n),Ia(e));case 5:return he(n.stringValue,e.stringValue);case 6:return function(s,o){const a=br(s),l=br(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=he(a[c],l[c]);if(h!==0)return h}return he(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Le(s.latitude),Le(o.latitude));return a!==0?a:he(Le(s.longitude),Le(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return J_(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=he(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:J_(g,y)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Xl.mapValue&&o===Xl.mapValue)return 0;if(s===Xl.mapValue)return 1;if(o===Xl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=he(l[d],h[d]);if(p!==0)return p;const g=Os(a[l[d]],c[h[d]]);if(g!==0)return g}return he(l.length,h.length)}(n.mapValue,e.mapValue);default:throw ee()}}function Y_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);const t=Bi(n),i=Bi(e),r=he(t.seconds,i.seconds);return r!==0?r:he(t.nanos,i.nanos)}function J_(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const s=Os(t[r],i[r]);if(s)return s}return he(t.length,i.length)}function Vs(n){return Sp(n)}function Sp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Bi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return br(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=Sp(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Sp(t.fields[o])}`;return r+"}"}(n.mapValue):ee()}function Z_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tp(n){return!!n&&"integerValue"in n}function pg(n){return!!n&&"arrayValue"in n}function e1(n){return!!n&&"nullValue"in n}function t1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yu(n){return!!n&&"mapValue"in n}function SL(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ho(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hs(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ho(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ho(n.arrayValue.values[t]);return e}return Object.assign({},n)}function TL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ho(t)}setAll(e){let t=ot.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Ho(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];yu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Hs(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Xt(Ho(this.value))}}function ob(n){const e=[];return Hs(n.fields,(t,i)=>{const r=new ot([t]);if(yu(i)){const s=ob(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,te.min(),te.min(),te.min(),Xt.empty(),0)}static newFoundDocument(e,t,i,r){return new wt(e,1,t,te.min(),i,r,0)}static newNoDocument(e,t){return new wt(e,2,t,te.min(),te.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new wt(e,3,t,te.min(),te.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.position=e,this.inclusive=t}}function n1(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(o.referenceValue),t.key):i=Os(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function i1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t="asc"){this.field=e,this.dir=t}}function bL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{}class je extends ab{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new CL(e,t,i):t==="array-contains"?new AL(e,i):t==="in"?new kL(e,i):t==="not-in"?new xL(e,i):t==="array-contains-any"?new ML(e,i):new je(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new RL(e,i):new PL(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Os(t,this.value)):t!==null&&Ir(this.value)===Ir(t)&&this.matchesComparison(Os(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends ab{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new gn(e,t)}matches(e){return lb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lb(n){return n.op==="and"}function ub(n){return IL(n)&&lb(n)}function IL(n){for(const e of n.filters)if(e instanceof gn)return!1;return!0}function bp(n){if(n instanceof je)return n.field.canonicalString()+n.op.toString()+Vs(n.value);if(ub(n))return n.filters.map(e=>bp(e)).join(",");{const e=n.filters.map(t=>bp(t)).join(",");return`${n.op}(${e})`}}function cb(n,e){return n instanceof je?function(i,r){return r instanceof je&&i.op===r.op&&i.field.isEqual(r.field)&&Mn(i.value,r.value)}(n,e):n instanceof gn?function(i,r){return r instanceof gn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&cb(o,r.filters[a]),!0):!1}(n,e):void ee()}function hb(n){return n instanceof je?function(t){return`${t.field.canonicalString()} ${t.op} ${Vs(t.value)}`}(n):n instanceof gn?function(t){return t.op.toString()+" {"+t.getFilters().map(hb).join(" ,")+"}"}(n):"Filter"}class CL extends je{constructor(e,t,i){super(e,t,i),this.key=Q.fromName(i.referenceValue)}matches(e){const t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}}class RL extends je{constructor(e,t){super(e,"in",t),this.keys=db("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PL extends je{constructor(e,t){super(e,"not-in",t),this.keys=db("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function db(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Q.fromName(i.referenceValue))}class AL extends je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pg(t)&&Ra(t.arrayValue,this.value)}}class kL extends je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ra(this.value.arrayValue,t)}}class xL extends je{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ra(this.value.arrayValue,t)}}class ML extends je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ra(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function r1(n,e=null,t=[],i=[],r=null,s=null,o=null){return new OL(n,e,t,i,r,s,o)}function mg(n){const e=ne(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>bp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Vs(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Vs(i)).join(",")),e.ue=t}return e.ue}function gg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!i1(n.startAt,e.startAt)&&i1(n.endAt,e.endAt)}function Ip(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VL(n,e,t,i,r,s,o,a){return new qs(n,e,t,i,r,s,o,a)}function fb(n){return new qs(n)}function s1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pb(n){return n.collectionGroup!==null}function qo(n){const e=ne(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Pa(s,i))}),t.has(ot.keyField().canonicalString())||e.ce.push(new Pa(ot.keyField(),i))}return e.ce}function An(n){const e=ne(n);return e.le||(e.le=DL(e,qo(n))),e.le}function DL(n,e){if(n.limitType==="F")return r1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Pa(r.field,s)});const t=n.endAt?new dc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new dc(n.startAt.position,n.startAt.inclusive):null;return r1(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Cp(n,e){const t=n.filters.concat([e]);return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rp(n,e,t){return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return gg(An(n),An(e))&&n.limitType===e.limitType}function mb(n){return`${mg(An(n))}|lt:${n.limitType}`}function Hr(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>hb(r)).join(", ")}]`),ch(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Vs(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Vs(r)).join(",")),`Target(${i})`}(An(n))}; limitType=${n.limitType})`}function dh(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of qo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=n1(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,qo(i),r)||i.endAt&&!function(o,a,l){const c=n1(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,qo(i),r))}(n,e)}function NL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gb(n){return(e,t)=>{let i=!1;for(const r of qo(n)){const s=LL(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function LL(n,e,t){const i=n.field.isKeyField()?Q.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Os(l,c):ee()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new Me(Q.comparator);function ei(){return FL}const vb=new Me(Q.comparator);function ko(...n){let e=vb;for(const t of n)e=e.insert(t.key,t);return e}function yb(n){let e=vb;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function or(){return Ko()}function _b(){return Ko()}function Ko(){return new Ks(n=>n.toString(),(n,e)=>n.isEqual(e))}const zL=new Me(Q.comparator),$L=new lt(Q.comparator);function re(...n){let e=$L;for(const t of n)e=e.add(t);return e}const UL=new lt(he);function BL(){return UL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function wb(n){return{integerValue:""+n}}function jL(n,e){return _L(e)?wb(e):vg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function WL(n,e,t){return n instanceof fc?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&dg(s)&&(s=fg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Aa?Sb(n,e):n instanceof ka?Tb(n,e):function(r,s){const o=Eb(r,s),a=o1(o)+o1(r.Pe);return Tp(o)&&Tp(r.Pe)?wb(a):vg(r.serializer,a)}(n,e)}function HL(n,e,t){return n instanceof Aa?Sb(n,e):n instanceof ka?Tb(n,e):t}function Eb(n,e){return n instanceof pc?function(i){return Tp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class fc extends fh{}class Aa extends fh{constructor(e){super(),this.elements=e}}function Sb(n,e){const t=bb(e);for(const i of n.elements)t.some(r=>Mn(r,i))||t.push(i);return{arrayValue:{values:t}}}class ka extends fh{constructor(e){super(),this.elements=e}}function Tb(n,e){let t=bb(e);for(const i of n.elements)t=t.filter(r=>!Mn(r,i));return{arrayValue:{values:t}}}class pc extends fh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function o1(n){return Le(n.integerValue||n.doubleValue)}function bb(n){return pg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qL(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Aa&&r instanceof Aa||i instanceof ka&&r instanceof ka?Ms(i.elements,r.elements,Mn):i instanceof pc&&r instanceof pc?Mn(i.Pe,r.Pe):i instanceof fc&&r instanceof fc}(n.transform,e.transform)}class KL{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _u(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ph{}function Ib(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rb(n.key,Kn.none()):new qa(n.key,n.data,Kn.none());{const t=n.data,i=Xt.empty();let r=new lt(ot.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new xr(n.key,i,new un(r.toArray()),Kn.none())}}function GL(n,e,t){n instanceof qa?function(r,s,o){const a=r.value.clone(),l=l1(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof xr?function(r,s,o){if(!_u(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=l1(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Cb(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Go(n,e,t,i){return n instanceof qa?function(s,o,a,l){if(!_u(s.precondition,o))return a;const c=s.value.clone(),h=u1(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof xr?function(s,o,a,l){if(!_u(s.precondition,o))return a;const c=u1(s.fieldTransforms,l,o),h=o.data;return h.setAll(Cb(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,i):function(s,o,a){return _u(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function QL(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=Eb(i.transform,r||null);s!=null&&(t===null&&(t=Xt.empty()),t.set(i.field,s))}return t||null}function a1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ms(i,r,(s,o)=>qL(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class qa extends ph{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xr extends ph{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Cb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function l1(n,e,t){const i=new Map;ve(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,HL(o,a,t[r]))}return i}function u1(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,WL(s,o,e))}return i}class Rb extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XL extends ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&GL(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Go(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Go(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=_b();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=Ib(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(t,i)=>a1(t,i))&&Ms(this.baseMutations,e.baseMutations,(t,i)=>a1(t,i))}}class yg{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ve(e.mutations.length===i.length);let r=function(){return zL}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new yg(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ae;function eF(n){switch(n){default:return ee();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function Pb(n){if(n===void 0)return Zn("GRPC error has no .code"),L.UNKNOWN;switch(n){case $e.OK:return L.OK;case $e.CANCELLED:return L.CANCELLED;case $e.UNKNOWN:return L.UNKNOWN;case $e.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case $e.INTERNAL:return L.INTERNAL;case $e.UNAVAILABLE:return L.UNAVAILABLE;case $e.UNAUTHENTICATED:return L.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case $e.NOT_FOUND:return L.NOT_FOUND;case $e.ALREADY_EXISTS:return L.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return L.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case $e.ABORTED:return L.ABORTED;case $e.OUT_OF_RANGE:return L.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return L.UNIMPLEMENTED;case $e.DATA_LOSS:return L.DATA_LOSS;default:return ee()}}(ae=$e||($e={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=new hr([4294967295,4294967295],0);function c1(n){const e=tF().encode(n),t=new XT;return t.update(e),new Uint8Array(t.digest())}function h1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hr([t,i],0),new hr([r,s],0)]}class _g{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new xo(`Invalid padding: ${t}`);if(i<0)throw new xo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xo(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new xo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=hr.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(hr.fromNumber(i)));return r.compare(nF)===1&&(r=new hr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=c1(e),[i,r]=h1(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _g(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=c1(e),[i,r]=h1(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Ka.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new mh(te.min(),r,new Me(he),ei(),re())}}class Ka{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ka(i,t,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}}class Ab{constructor(e,t){this.targetId=e,this.me=t}}class kb{constructor(e,t,i=ct.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class d1{constructor(){this.fe=0,this.ge=p1(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),t=re(),i=re();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ee()}}),new Ka(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=p1()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class iF{constructor(e){this.Le=e,this.Be=new Map,this.ke=ei(),this.qe=f1(),this.Qe=new Me(he)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){const t=e.targetId,i=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Ip(s))if(i===0){const o=new Q(s.path);this.Ue(t,o,wt.newNoDocument(o,te.min()))}else ve(i===1);else{const o=this.Ye(t);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=br(i).toUint8Array()}catch(l){if(l instanceof sb)return xs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _g(o,r,s)}catch(l){return xs(l instanceof xo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Ip(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,wt.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=re();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new mh(e,t,this.Qe,this.ke,i);return this.ke=ei(),this.qe=f1(),this.Qe=new Me(he),r}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new d1,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new lt(he),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new d1),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function f1(){return new Me(Q.comparator)}function p1(){return new Me(Q.comparator)}const rF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),sF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),oF=(()=>({and:"AND",or:"OR"}))();class aF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pp(n,e){return n.useProto3Json||ch(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lF(n,e){return mc(n,e.toTimestamp())}function kn(n){return ve(!!n),te.fromTimestamp(function(t){const i=Bi(t);return new Qe(i.seconds,i.nanos)}(n))}function wg(n,e){return Ap(n,e).canonicalString()}function Ap(n,e){const t=function(r){return new Ie(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Mb(n){const e=Ie.fromString(n);return ve(Lb(e)),e}function kp(n,e){return wg(n.databaseId,e.path)}function Yd(n,e){const t=Mb(e);if(t.get(1)!==n.databaseId.projectId)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(Vb(t))}function Ob(n,e){return wg(n.databaseId,e)}function uF(n){const e=Mb(n);return e.length===4?Ie.emptyPath():Vb(e)}function xp(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Vb(n){return ve(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function m1(n,e,t){return{name:kp(n,e),fields:t.value.mapValue.fields}}function cF(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ve(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?L.UNKNOWN:Pb(c.code);return new W(h,c.message||"")}(o);t=new kb(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Yd(n,i.document.name),s=kn(i.document.updateTime),o=i.document.createTime?kn(i.document.createTime):te.min(),a=new Xt({mapValue:{fields:i.document.fields}}),l=wt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];t=new wu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Yd(n,i.document),s=i.readTime?kn(i.readTime):te.min(),o=wt.newNoDocument(r,s),a=i.removedTargetIds||[];t=new wu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Yd(n,i.document),s=i.removedTargetIds||[];t=new wu([],s,r,null)}else{if(!("filter"in e))return ee();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new ZL(r,s),a=i.targetId;t=new Ab(a,o)}}return t}function hF(n,e){let t;if(e instanceof qa)t={update:m1(n,e.key,e.value)};else if(e instanceof Rb)t={delete:kp(n,e.key)};else if(e instanceof xr)t={update:m1(n,e.key,e.data),updateMask:wF(e.fieldMask)};else{if(!(e instanceof XL))return ee();t={verify:kp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Aa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ka)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ee()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:lF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee()}(n,e.precondition)),t}function dF(n,e){return n&&n.length>0?(ve(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?kn(r.updateTime):kn(s);return o.isEqual(te.min())&&(o=kn(s)),new KL(o,r.transformResults||[])}(t,e))):[]}function fF(n,e){return{documents:[Ob(n,e.path)]}}function pF(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Ob(n,r);const s=function(c){if(c.length!==0)return Nb(gn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:qr(p.field),direction:vF(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Pp(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:r}}function mF(n){let e=uF(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ve(i===1);const h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){const p=Db(d);return p instanceof gn&&ub(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(y){return new Pa(Kr(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,ch(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new dc(g,p)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new dc(g,p)}(t.endAt)),VL(e,r,o,s,a,"F",l,c)}function gF(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Db(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Kr(t.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Kr(t.unaryFilter.field);return je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kr(t.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kr(t.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(n):n.fieldFilter!==void 0?function(t){return je.create(Kr(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gn.create(t.compositeFilter.filters.map(i=>Db(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ee()}}(t.compositeFilter.op))}(n):ee()}function vF(n){return rF[n]}function yF(n){return sF[n]}function _F(n){return oF[n]}function qr(n){return{fieldPath:n.canonicalString()}}function Kr(n){return ot.fromServerFormat(n.fieldPath)}function Nb(n){return n instanceof je?function(t){if(t.op==="=="){if(t1(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NAN"}};if(e1(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(t1(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NAN"}};if(e1(t.value))return{unaryFilter:{field:qr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qr(t.field),op:yF(t.op),value:t.value}}}(n):n instanceof gn?function(t){const i=t.getFilters().map(r=>Nb(r));return i.length===1?i[0]:{compositeFilter:{op:_F(t.op),filters:i}}}(n):ee()}function wF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Lb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t,i,r,s=te.min(),o=te.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.ct=e}}function SF(n){const e=mF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(){this.un=new bF}addToCollectionParentIndex(e,t){return this.un.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Ui.min())}updateCollectionGroup(e,t,i){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class bF{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new lt(Ie.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new lt(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ds(0)}static kn(){return new Ds(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.changes=new Ks(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?F.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Go(i.mutation,r,un.empty(),Qe.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,re()).next(()=>i))}getLocalViewOfDocuments(e,t,i=re()){const r=or();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=ko();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=or();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,re()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=ei();const o=Ko(),a=function(){return Ko()}();return t.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof xr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Go(h.mutation,c,h.mutation.getFieldMask(),Qe.now())):o.set(c.key,un.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new CF(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Ko();let r=new Me((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=i.get(l)||un.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||re()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=_b();h.forEach(p=>{if(!s.has(p)){const g=Ib(t.get(p),i.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):F.resolve(or());let a=-1,l=s;return o.next(c=>F.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,re())).next(h=>({batchId:a,changes:yb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(i=>{let r=ko();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=ko();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(d,p){return new qs(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,wt.newInvalidDocument(h)))});let a=ko();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Go(h.mutation,c,un.empty(),Qe.now()),dh(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return F.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:kn(r.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:SF(r.bundledQuery),readTime:kn(r.readTime)}}(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.overlays=new Me(Q.comparator),this.Ir=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const i=or();return F.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),F.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(e,t,i){const r=or(),s=t.length+1,o=new Q(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Me((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=or(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=or(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return F.resolve(a)}ht(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new JL(t,i));let s=this.Ir.get(t);s===void 0&&(s=re(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.Tr=new lt(Ye.Er),this.dr=new lt(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Ye(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Ye(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new Q(new Ie([])),i=new Ye(t,e),r=new Ye(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Q(new Ie([])),i=new Ye(t,e),r=new Ye(t,e+1);let s=re();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ye(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ye{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||he(e.wr,t.wr)}static Ar(e,t){return he(e.wr,t.wr)||Q.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new lt(Ye.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YL(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,t){return F.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.vr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ye(t,0),r=new Ye(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new lt(he);return t.forEach(r=>{const s=new Ye(r,0),o=new Ye(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const o=new Ye(new Q(s),0);let a=new lt(he);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){ve(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(t.mutations,r=>{const s=new Ye(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new Ye(t,0),r=this.br.firstAfterOrEqual(i);return F.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.Mr=e,this.docs=function(){return new Me(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return F.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let i=ei();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():wt.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=ei();const o=t.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||mL(pL(h),i)<=0||(r.has(h.key)||dh(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ee()}Or(e,t){return F.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new OF(this)}getSize(e){return F.resolve(this.size)}}class OF extends IF{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),F.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.persistence=e,this.Nr=new Ks(t=>mg(t),gg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Eg,this.targetCount=0,this.kr=Ds.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),F.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ds(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Kn(t),F.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return F.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),F.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return F.resolve(i)}containsKey(e,t){return F.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,t){this.qr={},this.overlays={},this.Qr=new hg(0),this.Kr=!1,this.Kr=!0,this.$r=new kF,this.referenceDelegate=e(this),this.Ur=new VF(this),this.indexManager=new TF,this.remoteDocumentCache=function(r){return new MF(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new EF(t),this.Gr=new PF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new xF(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){H("MemoryPersistence","Starting transaction:",e);const r=new NF(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class NF extends vL{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.Jr=new Eg,this.Yr=null}static Zr(e){return new Sg(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),F.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{const r=Q.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,te.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return F.or([()=>F.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=re(),r=re();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Tg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return FD()?8:yL(St())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new LF;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(To()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Hr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(To()<=oe.DEBUG&&H("QueryEngine","Query:",Hr(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(To()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Hr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(t))):F.resolve())}Yi(e,t){if(s1(t))return F.resolve(null);let i=An(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Rp(t,null,"F"),i=An(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=re(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,Rp(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,i,r){return s1(t)||r.isEqual(te.min())?F.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(t,s);return this.ns(t,o,i,r)?F.resolve(null):(To()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hr(t)),this.rs(e,o,t,fL(r,-1)).next(a=>a))})}ts(e,t){let i=new lt(gb(e));return t.forEach((r,s)=>{dh(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return To()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Hr(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ui.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Me(he),this._s=new Ks(s=>mg(s),gg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function $F(n,e,t,i){return new zF(n,e,t,i)}async function Fb(n,e){const t=ne(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=re();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function UF(n,e){const t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=F.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(_=>{const b=c.docVersions.get(y);ve(b!==null),_.version.compareTo(b)<0&&(d.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),h.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=re();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function zb(n){const e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function BF(n,e){const t=ne(n),i=e.snapshotVersion;let r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ct.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(_,b,v){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,h)&&a.push(t.Ur.updateTargetData(s,g))});let l=ei(),c=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(jF(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(te.min())){const h=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=r,s))}function jF(n,e,t){let i=re(),r=re();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=ei();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function WF(n,e){const t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function HF(n,e){const t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Si(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function Mp(n,e,t){const i=ne(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ha(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function g1(n,e,t){const i=ne(n);let r=te.min(),s=re();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ne(l),p=d._s.get(h);return p!==void 0?F.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(i,o,An(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:te.min(),t?s:re())).next(a=>(qF(i,NL(e),a),{documents:a,Ts:s})))}function qF(n,e,t){let i=n.us.get(e)||te.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}class v1{constructor(){this.activeTargetIds=BL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KF{constructor(){this.so=new v1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new v1,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function Jd(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class YF extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){const a=Jd(),l=this.xo(t,i.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,r).then(h=>(H("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw xs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(t,i,r,s,o,a){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){const r=QF[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){const s=Jd();return new Promise((o,a)=>{const l=new YT;l.setWithCredentials(!0),l.listenOnce(JT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vu.NO_ERROR:const h=l.getResponseJson();H(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case vu.TIMEOUT:H(gt,`RPC '${e}' ${s} timed out`),a(new W(L.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const d=l.getStatus();if(H(gt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(g.status);a(new W(y,g.message))}else a(new W(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(L.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{H(gt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);H(gt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Bo(e,t,i){const r=Jd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tb(),a=eb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(gt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new XF({Io:b=>{g?H(gt,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(p||(H(gt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),H(gt,`RPC '${e}' stream ${r} sending:`,b),d.send(b))},To:()=>d.close()}),_=(b,v,w)=>{b.listen(v,I=>{try{w(I)}catch(A){setTimeout(()=>{throw A},0)}})};return _(d,Ao.EventType.OPEN,()=>{g||(H(gt,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),_(d,Ao.EventType.CLOSE,()=>{g||(g=!0,H(gt,`RPC '${e}' stream ${r} transport closed`),y.So())}),_(d,Ao.EventType.ERROR,b=>{g||(g=!0,xs(gt,`RPC '${e}' stream ${r} transport errored:`,b),y.So(new W(L.UNAVAILABLE,"The operation could not be completed")))}),_(d,Ao.EventType.MESSAGE,b=>{var v;if(!g){const w=b.data[0];ve(!!w);const I=w,A=I.error||((v=I[0])===null||v===void 0?void 0:v.error);if(A){H(gt,`RPC '${e}' stream ${r} received error:`,A);const V=A.status;let N=function(C){const R=$e[C];if(R!==void 0)return Pb(R)}(V),T=A.message;N===void 0&&(N=L.INTERNAL,T="Unknown error status: "+V+" with message "+A.message),g=!0,y.So(new W(N,T)),d.close()}else H(gt,`RPC '${e}' stream ${r} received:`,w),y.bo(w)}}),_(a,ZT.STAT_EVENT,b=>{b.stat===Ep.PROXY?H(gt,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===Ep.NOPROXY&&H(gt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n){return new aF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $b(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(Zn(t.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{const r=new W(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JF extends Ub{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=cF(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?kn(o.readTime):te.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=xp(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Ip(l)?{documents:fF(s,l)}:{query:pF(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xb(s,o.resumeToken);const c=Pp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=mc(s,o.snapshotVersion.toTimestamp());const c=Pp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=gF(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=xp(this.serializer),t.removeTarget=e,this.a_(t)}}class ZF extends Ub{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=dF(e.writeResults,e.commitTime),i=kn(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=xp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>hF(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4 extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ap(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(L.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ap(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class t4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zn(t),this.D_=!1):H("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Mr(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ne(l);c.L_.add(4),await Ga(c),c.q_.set("Unknown"),c.L_.delete(4),await vh(c)}(this))})}),this.q_=new t4(i,r)}}async function vh(n){if(Mr(n))for(const e of n.B_)await e(!0)}async function Ga(n){for(const e of n.B_)await e(!1)}function Bb(n,e){const t=ne(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Rg(t)?Cg(t):Gs(t).r_()&&Ig(t,e))}function bg(n,e){const t=ne(n),i=Gs(t);t.N_.delete(e),i.r_()&&jb(t,e),t.N_.size===0&&(i.r_()?i.o_():Mr(t)&&t.q_.set("Unknown"))}function Ig(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gs(n).A_(e)}function jb(n,e){n.Q_.xe(e),Gs(n).R_(e)}function Cg(n){n.Q_=new iF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Gs(n).start(),n.q_.v_()}function Rg(n){return Mr(n)&&!Gs(n).n_()&&n.N_.size>0}function Mr(n){return ne(n).L_.size===0}function Wb(n){n.Q_=void 0}async function i4(n){n.q_.set("Online")}async function r4(n){n.N_.forEach((e,t)=>{Ig(n,e)})}async function s4(n,e){Wb(n),Rg(n)?(n.q_.M_(e),Cg(n)):n.q_.set("Unknown")}async function o4(n,e,t){if(n.q_.set("Online"),e instanceof kb&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(n,e)}catch(i){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gc(n,i)}else if(e instanceof wu?n.Q_.Ke(e):e instanceof Ab?n.Q_.He(e):n.Q_.We(e),!t.isEqual(te.min()))try{const i=await zb(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),jb(s,l);const d=new Si(h.target,l,c,h.sequenceNumber);Ig(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){H("RemoteStore","Failed to raise snapshot:",i),await gc(n,i)}}async function gc(n,e,t){if(!Ha(e))throw e;n.L_.add(1),await Ga(n),n.q_.set("Offline"),t||(t=()=>zb(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await vh(n)})}function Hb(n,e){return e().catch(t=>gc(n,t,e))}async function yh(n){const e=ne(n),t=ji(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;a4(e);)try{const r=await WF(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,l4(e,r)}catch(r){await gc(e,r)}qb(e)&&Kb(e)}function a4(n){return Mr(n)&&n.O_.length<10}function l4(n,e){n.O_.push(e);const t=ji(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qb(n){return Mr(n)&&!ji(n).n_()&&n.O_.length>0}function Kb(n){ji(n).start()}async function u4(n){ji(n).p_()}async function c4(n){const e=ji(n);for(const t of n.O_)e.m_(t.mutations)}async function h4(n,e,t){const i=n.O_.shift(),r=yg.from(i,e,t);await Hb(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await yh(n)}async function d4(n,e){e&&ji(n).V_&&await async function(i,r){if(function(o){return eF(o)&&o!==L.ABORTED}(r.code)){const s=i.O_.shift();ji(i).s_(),await Hb(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await yh(i)}}(n,e),qb(n)&&Kb(n)}async function _1(n,e){const t=ne(n);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const i=Mr(t);t.L_.add(3),await Ga(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await vh(t)}async function f4(n,e){const t=ne(n);e?(t.L_.delete(2),await vh(t)):e||(t.L_.add(2),await Ga(t),t.q_.set("Unknown"))}function Gs(n){return n.K_||(n.K_=function(t,i,r){const s=ne(t);return s.w_(),new JF(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:i4.bind(null,n),Ro:r4.bind(null,n),mo:s4.bind(null,n),d_:o4.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Rg(n)?Cg(n):n.q_.set("Unknown")):(await n.K_.stop(),Wb(n))})),n.K_}function ji(n){return n.U_||(n.U_=function(t,i,r){const s=ne(t);return s.w_(),new ZF(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:u4.bind(null,n),mo:d4.bind(null,n),f_:c4.bind(null,n),g_:h4.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await yh(n)):(await n.U_.stop(),n.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new Pg(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ag(n,e){if(Zn("AsyncQueue",`${e}: ${n}`),Ha(n))return new W(L.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Q.comparator(t.key,i.key):(t,i)=>Q.comparator(t.key,i.key),this.keyedMap=ko(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gs)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new gs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.W_=new Me(Q.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ns{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Ns(e,t,gs.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class m4{constructor(){this.queries=E1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const r=ne(t),s=r.queries;r.queries=E1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new W(L.ABORTED,"Firestore shutting down"))}}function E1(){return new Ks(n=>mb(n),hh)}async function g4(n,e){const t=ne(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new p4,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await t.onListen(r,!0);break;case 1:s.z_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=Ag(o,`Initialization of query '${Hr(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&kg(t)}async function v4(n,e){const t=ne(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function y4(n,e){const t=ne(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&kg(t)}function _4(n,e,t){const i=ne(n),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(t);i.queries.delete(e)}function kg(n){n.Y_.forEach(e=>{e.next()})}var Op,S1;(S1=Op||(Op={})).ea="default",S1.Cache="cache";class w4{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ns(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.key=e}}class Qb{constructor(e){this.key=e}}class E4{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=gb(e),this.Ra=new gs(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new w1,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),g=dh(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?y!==_&&(i.track({type:3,doc:g}),b=!0):this.ga(p,g)||(i.track({type:2,doc:g}),b=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(i.track({type:0,doc:g}),b=!0):p&&!g&&(i.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,y){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return _(g)-_(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ns(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new w1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Qb(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Gb(i))}),t}ba(e){this.Ta=e.Ts,this.da=re();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ns.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class S4{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class T4{constructor(e){this.key=e,this.va=!1}}class b4{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ks(a=>mb(a),hh),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(Q.comparator),this.Na=new Map,this.La=new Eg,this.Ba={},this.ka=new Map,this.qa=Ds.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function I4(n,e,t=!0){const i=tI(n);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await Xb(i,e,t,!0),r}async function C4(n,e){const t=tI(n);await Xb(t,e,!0,!1)}async function Xb(n,e,t,i){const r=await HF(n.localStore,An(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return i&&(a=await R4(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Bb(n.remoteStore,r),a}async function R4(n,e,t,i,r){n.Ka=(d,p,g)=>async function(_,b,v,w){let I=b.view.ma(v);I.ns&&(I=await g1(_.localStore,b.query,!1).then(({documents:T})=>b.view.ma(T,I)));const A=w&&w.targetChanges.get(b.targetId),V=w&&w.targetMismatches.get(b.targetId)!=null,N=b.view.applyChanges(I,_.isPrimaryClient,A,V);return b1(_,b.targetId,N.wa),N.snapshot}(n,d,p,g);const s=await g1(n.localStore,e,!0),o=new E4(e,s.Ts),a=o.ma(s.documents),l=Ka.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);b1(n,t,c.wa);const h=new S4(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function P4(n,e,t){const i=ne(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!hh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Mp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&bg(i.remoteStore,r.targetId),Vp(i,r.targetId)}).catch(Wa)):(Vp(i,r.targetId),await Mp(i.localStore,r.targetId,!0))}async function A4(n,e){const t=ne(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),bg(t.remoteStore,i.targetId))}async function k4(n,e,t){const i=L4(n);try{const r=await function(o,a){const l=ne(o),c=Qe.now(),h=a.reduce((g,y)=>g.add(y.key),re());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=ei(),_=re();return l.cs.getEntries(g,h).next(b=>{y=b,y.forEach((v,w)=>{w.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(b=>{d=b;const v=[];for(const w of a){const I=QL(w,d.get(w.key).overlayedDocument);I!=null&&v.push(new xr(w.key,I,ob(I.value.mapValue),Kn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(b=>{p=b;const v=b.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(g,b.batchId,v)})}).then(()=>({batchId:p.batchId,changes:yb(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Me(he)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,t),await Qa(i,r.changes),await yh(i.remoteStore)}catch(r){const s=Ag(r,"Failed to persist write");t.reject(s)}}async function Yb(n,e){const t=ne(n);try{const i=await BF(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Na.get(s);o&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?ve(o.va):r.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await Qa(t,i,e)}catch(i){await Wa(i)}}function T1(n,e,t){const i=ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ne(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&kg(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function x4(n,e,t){const i=ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Me(Q.comparator);o=o.insert(s,wt.newNoDocument(s,te.min()));const a=re().add(s),l=new mh(te.min(),new Map,new Me(he),o,a);await Yb(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),xg(i)}else await Mp(i.localStore,e,!1).then(()=>Vp(i,e,t)).catch(Wa)}async function M4(n,e){const t=ne(n),i=e.batch.batchId;try{const r=await UF(t.localStore,e);Zb(t,i,null),Jb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Qa(t,r)}catch(r){await Wa(r)}}async function O4(n,e,t){const i=ne(n);try{const r=await function(o,a){const l=ne(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ve(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);Zb(i,e,t),Jb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Qa(i,r)}catch(r){await Wa(r)}}function Jb(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Zb(n,e,t){const i=ne(n);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Vp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||eI(n,i)})}function eI(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(bg(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),xg(n))}function b1(n,e,t){for(const i of t)i instanceof Gb?(n.La.addReference(i.key,e),V4(n,i)):i instanceof Qb?(H("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||eI(n,i.key)):ee()}function V4(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(H("SyncEngine","New document in limbo: "+t),n.xa.add(i),xg(n))}function xg(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Q(Ie.fromString(e)),i=n.qa.next();n.Na.set(i,new T4(t)),n.Oa=n.Oa.insert(t,i),Bb(n.remoteStore,new Si(An(fb(t.path)),i,"TargetPurposeLimboResolution",hg.oe))}}async function Qa(n,e,t){const i=ne(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,t).then(c=>{var h;if((c||t)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Tg.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=ne(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,p=>F.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>F.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!Ha(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),y=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,_)}}}(i.localStore,s))}async function D4(n,e){const t=ne(n);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const i=await Fb(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(L.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Qa(t,i.hs)}}function N4(n,e){const t=ne(n),i=t.Na.get(e);if(i&&i.va)return re().add(i.key);{let r=re();const s=t.Ma.get(e);if(!s)return r;for(const o of s){const a=t.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function tI(n){const e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x4.bind(null,e),e.Ca.d_=y4.bind(null,e.eventManager),e.Ca.$a=_4.bind(null,e.eventManager),e}function L4(n){const e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O4.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return $F(this.persistence,new FF,e.initialUser,this.serializer)}Ga(e){return new DF(Sg.Zr,this.serializer)}Wa(e){return new KF}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class Dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>T1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D4.bind(null,this.syncEngine),await f4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m4}()}createDatastore(e){const t=gh(e.databaseInfo.databaseId),i=function(s){return new YF(s)}(e.databaseInfo);return function(s,o,a,l){return new e4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new n4(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>T1(this.syncEngine,t,0),function(){return y1.D()?new y1:new GF}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,h){const d=new b4(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const s=ne(r);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ga(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=ib.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ag(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ef(n,e){n.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Fb(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function I1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $4(n);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>_1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>_1(e.remoteStore,r)),n._onlineComponents=e}async function $4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await ef(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===L.FAILED_PRECONDITION||r.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;xs("Error using user provided cache. Falling back to memory cache: "+t),await ef(n,new vc)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await ef(n,new vc);return n._offlineComponents}async function nI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await I1(n,n._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await I1(n,new Dp))),n._onlineComponents}function U4(n){return nI(n).then(e=>e.syncEngine)}async function B4(n){const e=await nI(n),t=e.eventManager;return t.onListen=I4.bind(null,e.syncEngine),t.onUnlisten=P4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A4.bind(null,e.syncEngine),t}function j4(n,e,t={}){const i=new Di;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new F4({next:p=>{h.Za(),o.enqueueAndForget(()=>v4(s,d)),p.fromCache&&l.source==="server"?c.reject(new W(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new w4(a,h,{includeMetadataChanges:!0,_a:!0});return g4(s,d)}(await B4(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n,e,t){if(!t)throw new W(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W4(n,e,t,i){if(e===!0&&i===!0)throw new W(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function R1(n){if(!Q.isDocumentKey(n))throw new W(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function P1(n){if(Q.isDocumentKey(n))throw new W(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _h(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee()}function yc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new W(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_h(n);throw new W(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A1(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new rL;switch(i.type){case"firstParty":return new lL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=C1.get(t);i&&(H("ComponentProvider","Removing Datastore"),C1.delete(t),i.terminate())}(this),Promise.resolve()}}function H4(n,e,t,i={}){var r;const s=(n=yc(n,wh))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=yt.MOCK_USER;else{a=xD(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new W(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(c)}n._authCredentials=new sL(new nb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class Zt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class Ni extends Or{constructor(e,t,i){super(e,t,fb(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Q(e))}withConverter(e){return new Ni(this.firestore,e,this._path)}}function E3(n,e,...t){if(n=Lt(n),rI("collection","path",e),n instanceof wh){const i=Ie.fromString(e,...t);return P1(i),new Ni(n,null,i)}{if(!(n instanceof Zt||n instanceof Ni))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ie.fromString(e,...t));return P1(i),new Ni(n.firestore,null,i)}}function q4(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=ib.newId()),rI("doc","path",e),n instanceof wh){const i=Ie.fromString(e,...t);return R1(i),new Zt(n,null,new Q(i))}{if(!(n instanceof Zt||n instanceof Ni))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ie.fromString(e,...t));return R1(i),new Zt(n.firestore,n instanceof Ni?n.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $b(this,"async_queue_retry"),this.Vu=()=>{const i=Zd();i&&H("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Zd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Zd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Di;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ha(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Zn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Pg.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Mg extends wh{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new k1,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new k1(e),this._firestoreClient=void 0,await e}}}function S3(n,e){const t=typeof n=="object"?n:KT(),i=typeof n=="string"?n:e||"(default)",r=ug(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=AD("firestore");s&&H4(r,...s)}return r}function sI(n){if(n._terminated)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||K4(n),n._firestoreClient}function K4(n){var e,t,i;const r=n._freezeSettings(),s=function(a,l,c,h){return new EL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,iI(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new z4(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ls(ct.fromBase64String(e))}catch(t){throw new W(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ls(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^__.*__$/;class Q4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xr(e,this.data,this.fieldMask,t,this.fieldTransforms):new qa(e,this.data,t,this.fieldTransforms)}}function aI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class Ng{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _c(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(aI(this.Cu)&&G4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class X4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||gh(e)}Qu(e,t,i,r=!1){return new Ng({Cu:e,methodName:t,qu:i,path:ot.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lI(n){const e=n._freezeSettings(),t=gh(n._databaseId);return new X4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Y4(n,e,t,i,r,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,r);hI("Data must be an object, but it was:",o,i);const a=uI(i,o);let l,c;if(s.merge)l=new un(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Z4(e,d,t);if(!o.contains(p))throw new W(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);tz(h,p)||h.push(p)}l=new un(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Q4(new Xt(a),l,c)}function J4(n,e,t,i=!1){return Lg(t,n.Qu(i?4:3,e))}function Lg(n,e){if(cI(n=Lt(n)))return hI("Unsupported field value:",e,n),uI(n,e);if(n instanceof oI)return function(i,r){if(!aI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Lg(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jL(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Qe.fromDate(i);return{timestampValue:mc(r.serializer,s)}}if(i instanceof Qe){const s=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mc(r.serializer,s)}}if(i instanceof Vg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ls)return{bytesValue:xb(r.serializer,i._byteString)};if(i instanceof Zt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wg(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Dg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return vg(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${_h(i)}`)}(n,e)}function uI(n,e){const t={};return rb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(n,(i,r)=>{const s=Lg(r,e.Mu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function cI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof Vg||n instanceof Ls||n instanceof Zt||n instanceof oI||n instanceof Dg)}function hI(n,e,t){if(!cI(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=_h(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Z4(n,e,t){if((e=Lt(e))instanceof Og)return e._internalPath;if(typeof e=="string")return dI(n,e);throw _c("Field path arguments must be of type string or ",n,!1,void 0,t)}const ez=new RegExp("[~\\*/\\[\\]]");function dI(n,e,t){if(e.search(ez)>=0)throw _c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Og(...e.split("."))._internalPath}catch{throw _c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _c(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new W(L.INVALID_ARGUMENT,a+n+l)}function tz(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Eh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nz extends fI{data(){return super.data()}}function Eh(n,e){return typeof e=="string"?dI(n,e):e instanceof Og?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new W(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fg{}class pI extends Fg{}function T3(n,e,...t){let i=[];e instanceof Fg&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof zg).length,a=s.filter(l=>l instanceof Sh).length;if(o>1||o>0&&a>0)throw new W(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Sh extends pI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Sh(e,t,i)}_apply(e){const t=this._parse(e);return mI(e._query,t),new Or(e.firestore,e.converter,Cp(e._query,t))}_parse(e){const t=lI(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){M1(d,h);const g=[];for(const y of d)g.push(x1(l,s,y));p={arrayValue:{values:g}}}else p=x1(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||M1(d,h),p=J4(a,o,d,h==="in"||h==="not-in");return je.create(c,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function b3(n,e,t){const i=e,r=Eh("where",n);return Sh._create(r,i,t)}class zg extends Fg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zg(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)mI(o,l),o=Cp(o,l)}(e._query,t),new Or(e.firestore,e.converter,Cp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $g extends pI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $g(e,t)}_apply(e){const t=function(r,s,o){if(r.startAt!==null)throw new W(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new W(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pa(s,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new qs(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function I3(n,e="asc"){const t=e,i=Eh("orderBy",n);return $g._create(i,t)}function x1(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new W(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pb(e)&&t.indexOf("/")!==-1)throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ie.fromString(t));if(!Q.isDocumentKey(i))throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Z_(n,new Q(i))}if(t instanceof Zt)return Z_(n,t._key);throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(t)}.`)}function M1(n,e){if(!Array.isArray(n)||n.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mI(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rz{convertValue(e,t="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Hs(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;const s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Le(o.doubleValue));return new Dg(s)}convertGeoPoint(e){return new Vg(Le(e.latitude),Le(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=fg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ia(e));default:return null}}convertTimestamp(e){const t=Bi(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ie.fromString(e);ve(Lb(i));const r=new Ca(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(t)||Zn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oz extends fI{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Eh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Eu extends oz{data(e={}){return super.data(e)}}class az{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Jl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Eu(this._firestore,this._userDataWriter,i.key,i,new Jl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Eu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Jl(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Eu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Jl(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:lz(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}class uz extends rz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ls(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function C3(n){n=yc(n,Or);const e=yc(n.firestore,Mg),t=sI(e),i=new uz(e);return iz(n._query),j4(t,n._query).then(r=>new az(e,i,n,r))}function R3(n,e){const t=yc(n.firestore,Mg),i=q4(n),r=sz(n.converter,e);return cz(t,[Y4(lI(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Kn.exists(!1))]).then(()=>i)}function cz(n,e){return function(i,r){const s=new Di;return i.asyncQueue.enqueueAndForget(async()=>k4(await U4(i),r,s)),s.promise}(sI(n),e)}(function(e,t=!0){(function(r){Ws=r})(js),ks(new Sr("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Mg(new oL(i.getProvider("auth-internal")),new cL(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Vi(G_,"4.7.3",e),Vi(G_,"4.7.3","esm2017")})();function Ug(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function gI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hz=gI,vI=new Ba("auth","Firebase",gI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new ag("@firebase/auth");function dz(n,...e){wc.logLevel<=oe.WARN&&wc.warn(`Auth (${js}): ${n}`,...e)}function Su(n,...e){wc.logLevel<=oe.ERROR&&wc.error(`Auth (${js}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(n,...e){throw jg(n,...e)}function fn(n,...e){return jg(n,...e)}function Bg(n,e,t){const i=Object.assign(Object.assign({},hz()),{[e]:t});return new Ba("auth","Firebase",i).create(e,{appName:n.name})}function Li(n){return Bg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fz(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&On(n,"argument-error"),Bg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return vI.create(n,...e)}function Z(n,e,...t){if(!n)throw jg(e,...t)}function Bn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Su(e),new Error(e)}function ti(n,e){n||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pz(){return O1()==="http:"||O1()==="https:"}function O1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pz()||DD()||"connection"in navigator)?navigator.onLine:!0}function gz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t){this.shortDelay=e,this.longDelay=t,ti(t>e,"Short delay should be less than long delay!"),this.isMobile=MD()||ND()}get(){return mz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(n,e){ti(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz=new Xa(3e4,6e4);function Th(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Qs(n,e,t,i,r={}){return _I(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=ja(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return VD()||(c.referrerPolicy="no-referrer"),yI.fetch()(EI(n,n.config.apiHost,t,a),c)})}async function _I(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},vz),e);try{const r=new _z(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Zl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zl(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zl(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zl(n,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Bg(n,h,c);On(n,h)}}catch(r){if(r instanceof ri)throw r;On(n,"network-request-failed",{message:String(r)})}}async function wI(n,e,t,i,r={}){const s=await Qs(n,e,t,i,r);return"mfaPendingCredential"in s&&On(n,"multi-factor-auth-required",{_serverResponse:s}),s}function EI(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?Wg(n.config,r):`${n.config.apiScheme}://${r}`}class _z{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fn(this.auth,"network-request-failed")),yz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zl(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=fn(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wz(n,e){return Qs(n,"POST","/v1/accounts:delete",e)}async function SI(n,e){return Qs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ez(n,e=!1){const t=Lt(n),i=await t.getIdToken(e),r=Hg(i);Z(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Qo(tf(r.auth_time)),issuedAtTime:Qo(tf(r.iat)),expirationTime:Qo(tf(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tf(n){return Number(n)*1e3}function Hg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Su("JWT malformed, contained fewer than 3 sections"),null;try{const r=UT(t);return r?JSON.parse(r):(Su("Failed to decode base64 JWT payload"),null)}catch(r){return Su("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function V1(n){const e=Hg(n);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ri&&Sz(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Sz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(n){var e;const t=n.auth,i=await n.getIdToken(),r=await xa(n,SI(t,{idToken:i}));Z(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TI(s.providerUserInfo):[],a=Iz(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function bz(n){const e=Lt(n);await Ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Iz(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function TI(n){return n.map(e=>{var{providerId:t}=e,i=Ug(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(n,e){const t=await _I(n,{},async()=>{const i=ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=EI(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yI.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rz(n,e){return Qs(n,"POST","/v2/accounts:revokeToken",Th(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const t=V1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await Cz(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new vs;return i&&(Z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vs,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,e){Z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class jn{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await xa(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ez(this,e)}reload(){return bz(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ec(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await xa(this,wz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,h;const d=(i=t.displayName)!==null&&i!==void 0?i:void 0,p=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,b=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=t.createdAt)!==null&&c!==void 0?c:void 0,w=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:A,isAnonymous:V,providerData:N,stsTokenManager:T}=t;Z(I&&T,e,"internal-error");const E=vs.fromJSON(this.name,T);Z(typeof I=="string",e,"internal-error"),ci(d,e.name),ci(p,e.name),Z(typeof A=="boolean",e,"internal-error"),Z(typeof V=="boolean",e,"internal-error"),ci(g,e.name),ci(y,e.name),ci(_,e.name),ci(b,e.name),ci(v,e.name),ci(w,e.name);const C=new jn({uid:I,auth:e,email:p,emailVerified:A,displayName:d,isAnonymous:V,photoURL:y,phoneNumber:g,tenantId:_,stsTokenManager:E,createdAt:v,lastLoginAt:w});return N&&Array.isArray(N)&&(C.providerData=N.map(R=>Object.assign({},R))),b&&(C._redirectEventId=b),C}static async _fromIdTokenResponse(e,t,i=!1){const r=new vs;r.updateFromServerResponse(t);const s=new jn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ec(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Z(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?TI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new vs;a.updateFromIdToken(i);const l=new jn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Lp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new Map;function Wn(n){ti(n instanceof Function,"Expected a class definition");let e=D1.get(n);return e?(ti(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,D1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bI.type="NONE";const N1=bI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(n,e,t){return`firebase:${n}:${e}:${t}`}class ys{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Tu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Tu("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ys(Wn(N1),e,i);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Wn(N1);const o=Tu(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){const d=jn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ys(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ys(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(II(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kI(e))return"Blackberry";if(xI(e))return"Webos";if(CI(e))return"Safari";if((e.includes("chrome/")||RI(e))&&!e.includes("edge/"))return"Chrome";if(AI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function II(n=St()){return/firefox\//i.test(n)}function CI(n=St()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RI(n=St()){return/crios\//i.test(n)}function PI(n=St()){return/iemobile/i.test(n)}function AI(n=St()){return/android/i.test(n)}function kI(n=St()){return/blackberry/i.test(n)}function xI(n=St()){return/webos/i.test(n)}function qg(n=St()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Pz(n=St()){var e;return qg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Az(){return LD()&&document.documentMode===10}function MI(n=St()){return qg(n)||AI(n)||xI(n)||kI(n)||/windows phone/i.test(n)||PI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(n,e=[]){let t;switch(n){case"Browser":t=L1(St());break;case"Worker":t=`${L1(St())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${js}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xz(n,e={}){return Qs(n,"GET","/v2/passwordPolicy",Th(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=6;class Oz{constructor(e){var t,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Mz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F1(this),this.idTokenSubscription=new F1(this),this.beforeStateQueue=new kz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wn(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await ys.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await SI(this,{idToken:e}),i=await jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(In(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ec(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(Li(this));const t=e?Lt(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xz(this),t=new Oz(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Rz(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wn(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=await ys.create(this,[Wn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&dz(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ya(n){return Lt(n)}class F1{constructor(e){this.auth=e,this.observer=null,this.addObserver=HD(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dz(n){Kg=n}function Nz(n){return Kg.loadJS(n)}function Lz(){return Kg.gapiScript}function Fz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(n,e){const t=ug(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(uc(s,e??{}))return r;On(r,"already-initialized")}return t.initialize({options:e})}function $z(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Wn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Uz(n,e,t){const i=Ya(n);Z(i._canInitEmulator,i,"emulator-config-failed"),Z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(t!=null&&t.disableWarnings),s=VI(e),{host:o,port:a}=Bz(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||jz()}function VI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Bz(n){const e=VI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:z1(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:z1(o)}}}function z1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,t){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(n,e){return wI(n,"POST","/v1/accounts:signInWithIdp",Th(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz="http://localhost";class Cr extends DI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):On("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Ug(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Cr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return _s(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,_s(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_s(e,t)}buildRequest(){const e={requestUri:Wz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ja(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Ja{constructor(){super("facebook.com")}static credential(e){return Cr._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cr._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gi.credential(t,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Ja{constructor(){super("github.com")}static credential(e){return Cr._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Ja{constructor(){super("twitter.com")}static credential(e,t){return Cr._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yi.credential(t,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await jn._fromIdTokenResponse(e,i,r),o=$1(i);return new Rr({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=$1(i);return new Rr({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function $1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends ri{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Sc(e,t,i,r)}}function NI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(n,s,e,i):s})}async function Hz(n,e,t=!1){const i=await xa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rr._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qz(n,e,t=!1){const{auth:i}=n;if(In(i.app))return Promise.reject(Li(i));const r="reauthenticate";try{const s=await xa(n,NI(i,r,e,n),t);Z(s.idToken,i,"internal-error");const o=Hg(s.idToken);Z(o,i,"internal-error");const{sub:a}=o;return Z(n.uid===a,i,"user-mismatch"),Rr._forOperation(n,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&On(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz(n,e,t=!1){if(In(n.app))return Promise.reject(Li(n));const i="signIn",r=await NI(n,i,e),s=await Rr._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(n,e){return wI(n,"POST","/v1/accounts:signInWithCustomToken",Th(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(n,e){if(In(n.app))return Promise.reject(Li(n));const t=Ya(n),i=await Gz(t,{token:e,returnSecureToken:!0}),r=await Rr._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(r.user),r}function Qz(n,e,t,i){return Lt(n).onIdTokenChanged(e,t,i)}function Xz(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function A3(n,e,t,i){return Lt(n).onAuthStateChanged(e,t,i)}function k3(n){return Lt(n).signOut()}const Tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=1e3,Jz=10;class FI extends LI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);Az()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Jz):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FI.type="LOCAL";const Zz=FI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI extends LI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zI.type="SESSION";const $I=zI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new bh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await e$(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Qg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function n$(n){xn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function i$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r$(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function s$(){return UI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="firebaseLocalStorageDb",o$=1,bc="firebaseLocalStorage",jI="fbase_key";class Za{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ih(n,e){return n.transaction([bc],e?"readwrite":"readonly").objectStore(bc)}function a$(){const n=indexedDB.deleteDatabase(BI);return new Za(n).toPromise()}function Fp(){const n=indexedDB.open(BI,o$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(bc,{keyPath:jI})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(bc)?e(i):(i.close(),await a$(),e(await Fp()))})})}async function U1(n,e,t){const i=Ih(n,!0).put({[jI]:e,value:t});return new Za(i).toPromise()}async function l$(n,e){const t=Ih(n,!1).get(e),i=await new Za(t).toPromise();return i===void 0?null:i.value}function B1(n,e){const t=Ih(n,!0).delete(e);return new Za(t).toPromise()}const u$=800,c$=3;class WI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>c$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(s$()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await i$(),!this.activeServiceWorker)return;this.sender=new t$(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fp();return await U1(e,Tc,"1"),await B1(e,Tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>U1(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>l$(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>B1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Ih(r,!1).getAll();return new Za(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WI.type="LOCAL";const h$=WI;new Xa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n,e){return e?Wn(e):(Z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends DI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _s(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _s(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _s(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function d$(n){return Kz(n.auth,new Xg(n),n.bypassAuthState)}function f$(n){const{auth:e,user:t}=n;return Z(t,e,"internal-error"),qz(t,new Xg(n),n.bypassAuthState)}async function p$(n){const{auth:e,user:t}=n;return Z(t,e,"internal-error"),Hz(t,new Xg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d$;case"linkViaPopup":case"linkViaRedirect":return p$;case"reauthViaPopup":case"reauthViaRedirect":return f$;default:On(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$=new Xa(2e3,1e4);async function x3(n,e,t){if(In(n.app))return Promise.reject(fn(n,"operation-not-supported-in-this-environment"));const i=Ya(n);fz(n,e,Gg);const r=HI(i,t);return new ar(i,"signInViaPopup",e,r).executeNotNull()}class ar extends qI{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ar.currentPopupAction&&ar.currentPopupAction.cancel(),ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m$.get())};e()}}ar.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$="pendingRedirect",bu=new Map;class v$ extends qI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=bu.get(this.auth._key());if(!e){try{const i=await y$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}bu.set(this.auth._key(),e)}return this.bypassAuthState||bu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y$(n,e){const t=E$(e),i=w$(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function _$(n,e){bu.set(n._key(),e)}function w$(n){return Wn(n._redirectPersistence)}function E$(n){return Tu(g$,n.config.apiKey,n.name)}async function S$(n,e,t=!1){if(In(n.app))return Promise.reject(Li(n));const i=Ya(n),r=HI(i,e),o=await new v$(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=10*60*1e3;class b${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!KI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(fn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T$&&this.cachedEventUids.clear(),this.cachedEventUids.has(j1(e))}saveEventToCache(e){this.cachedEventUids.add(j1(e)),this.lastProcessedEventTime=Date.now()}}function j1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function KI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function I$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C$(n,e={}){return Qs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P$=/^https?/;async function A$(n){if(n.config.emulator)return;const{authorizedDomains:e}=await C$(n);for(const t of e)try{if(k$(t))return}catch{}On(n,"unauthorized-domain")}function k$(n){const e=Np(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!P$.test(t))return!1;if(R$.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=new Xa(3e4,6e4);function W1(){const n=xn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M$(n){return new Promise((e,t)=>{var i,r,s;function o(){W1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W1(),t(fn(n,"network-request-failed"))},timeout:x$.get()})}if(!((r=(i=xn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=xn().gapi)===null||s===void 0)&&s.load)o();else{const a=Fz("iframefcb");return xn()[a]=()=>{gapi.load?o():t(fn(n,"network-request-failed"))},Nz(`${Lz()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Iu=null,e})}let Iu=null;function O$(n){return Iu=Iu||M$(n),Iu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=new Xa(5e3,15e3),D$="__/auth/iframe",N$="emulator/auth/iframe",L$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z$(n){const e=n.config;Z(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wg(e,N$):`https://${n.config.authDomain}/${D$}`,i={apiKey:e.apiKey,appName:n.name,v:js},r=F$.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ja(i).slice(1)}`}async function $$(n){const e=await O$(n),t=xn().gapi;return Z(t,n,"internal-error"),e.open({where:document.body,url:z$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L$,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=fn(n,"network-request-failed"),a=xn().setTimeout(()=>{s(o)},V$.get());function l(){xn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B$=500,j$=600,W$="_blank",H$="http://localhost";class H1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q$(n,e,t,i=B$,r=j$){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},U$),{width:i.toString(),height:r.toString(),top:s,left:o}),c=St().toLowerCase();t&&(a=RI(c)?W$:t),II(c)&&(e=e||H$,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(Pz(c)&&a!=="_self")return K$(e||"",a),new H1(null);const d=window.open(e||"",a,h);Z(d,n,"popup-blocked");try{d.focus()}catch{}return new H1(d)}function K$(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="__/auth/handler",Q$="emulator/auth/handler",X$=encodeURIComponent("fac");async function q1(n,e,t,i,r,s){Z(n.config.authDomain,n,"auth-domain-config-required"),Z(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:js,eventId:r};if(e instanceof Gg){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",WD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof Ja){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${X$}=${encodeURIComponent(l)}`:"";return`${Y$(n)}?${ja(a).slice(1)}${c}`}function Y$({config:n}){return n.emulator?Wg(n,Q$):`https://${n.authDomain}/${G$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="webStorageSupport";class J${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$I,this._completeRedirectFn=S$,this._overrideRedirectResult=_$}async _openPopup(e,t,i,r){var s;ti((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await q1(e,t,i,Np(),r);return q$(e,o,Qg())}async _openRedirect(e,t,i,r){await this._originValidation(e);const s=await q1(e,t,i,Np(),r);return n$(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(ti(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await $$(e),i=new b$(e);return t.register("authEvent",r=>(Z(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nf,{type:nf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[nf];o!==void 0&&t(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MI()||CI()||qg()}}const Z$=J$;var K1="@firebase/auth",G1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n3(n){ks(new Sr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OI(n)},c=new Vz(i,r,s,l);return $z(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ks(new Sr("auth-internal",e=>{const t=Ya(e.getProvider("auth").getImmediate());return(i=>new e3(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(K1,G1,t3(n)),Vi(K1,G1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=5*60,r3=WT("authIdTokenMaxAge")||i3;let Q1=null;const s3=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>r3)return;const r=t==null?void 0:t.token;Q1!==r&&(Q1=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function M3(n=KT()){const e=ug(n,"auth");if(e.isInitialized())return e.getImmediate();const t=zz(n,{popupRedirectResolver:Z$,persistence:[h$,Zz,$I]}),i=WT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=s3(s.toString());Xz(t,o,()=>o(t.currentUser)),Qz(t,a=>o(a))}}const r=BT("auth");return r&&Uz(t,`http://${r}`),t}function o3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Dz({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=fn("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",o3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n3("Browser");export{c3 as B,gi as G,h3 as L,u3 as R,v3 as S,g3 as V,Ty as a,l3 as b,d3 as c,M3 as d,vS as e,x3 as f,S3 as g,R3 as h,qN as i,a3 as j,E3 as k,C3 as l,I3 as m,P3 as n,A3 as o,FA as p,T3 as q,O as r,k3 as s,e0 as t,Fa as u,zC as v,b3 as w};
